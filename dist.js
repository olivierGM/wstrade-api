!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("source-map-support"),require("node-fetch"),require("cloudscraper")):"function"==typeof define&&define.amd?define(["source-map-support","node-fetch","cloudscraper"],t):"object"==typeof exports?exports["wstrade-api"]=t(require("source-map-support"),require("node-fetch"),require("cloudscraper")):e["wstrade-api"]=t(e._,e._,e._)}(global,(function(e,t,r){return(()=>{var n={228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},858:e=>{e.exports=function(e){if(Array.isArray(e))return e}},646:(e,t,r)=>{var n=r(228);e.exports=function(e){if(Array.isArray(e))return n(e)}},926:e=>{function t(e,t,r,n,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(i,a){var s=e.apply(r,n);function o(e){t(s,i,a,o,u,"next",e)}function u(e){t(s,i,a,o,u,"throw",e)}o(void 0)}))}}},575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},913:e=>{function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}},713:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},884:e=>{e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}}},521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},38:(e,t,r)=>{var n=r(858),i=r(884),a=r(379),s=r(521);e.exports=function(e,t){return n(e)||i(e,t)||a(e,t)||s()}},319:(e,t,r)=>{var n=r(646),i=r(860),a=r(379),s=r(206);e.exports=function(e){return n(e)||i(e)||a(e)||s()}},379:(e,t,r)=>{var n=r(228);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},757:(e,t,r)=>{e.exports=r(666)},391:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(319),i=r.n(n),a=r(757),s=r.n(a),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(726),d=99,y=["sell","deposit","withdrawal","dividend","institutional_transfer","internal_transfer","refund","referral_bonus","affiliate","buy"];const v=function(){function e(t){l()(this,e),this.worker=t}var t,r,n,a,o,c,h,v,m;return p()(e,[{key:"all",value:(m=u()(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.worker.handleRequest(f.Z.ACCOUNT_IDS,{});case 2:return t=e.sent,e.abrupt("return",{tfsa:t.find((function(e){return e.startsWith("tfsa")})),rrsp:t.find((function(e){return e.startsWith("rrsp")})),crypto:t.find((function(e){return e.startsWith("non-registered-crypto")})),personal:t.find((function(e){return e.startsWith("non-registered")&&!e.startsWith("non-registered-crypto")}))});case 4:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"data",value:(v=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.LIST_ACCOUNT,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"me",value:(h=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.ME,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"person",value:(c=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.PERSON,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"history",value:(o=u()(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.HISTORY_ACCOUNT,{interval:t,accountId:r}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"activities",value:(a=u()(s().mark((function e(){var t,r,n,a,o,u,c,l,h,p,v=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=(o=v.length>0&&void 0!==v[0]?v[0]:{})&&o.limit&&o.limit>d)){e.next=3;break}throw new Error("filters.limit can not exceed 99! Leave filters.limit undefined if you want to retrieve all.");case 3:if(null==o||!o.accounts||Array.isArray(o.accounts)){e.next=5;break}throw new Error("filters.accounts must be an array!");case 5:if(null==o||!o.type||Array.isArray(o.type)){e.next=7;break}throw new Error("filters.type must be an array!");case 7:return u=[],e.next=10,this.worker.handleRequest(f.Z.ACTIVITIES,{limit:null!==(t=null==o?void 0:o.limit)&&void 0!==t?t:d,accountIds:null!==(r=null==o||null===(n=o.accounts)||void 0===n?void 0:n.join())&&void 0!==r?r:"",bookmark:"",type:null!==(a=null==o?void 0:o.type)&&void 0!==a?a:y});case 10:if(c=e.sent,u.push.apply(u,i()(c.results)),null!=o&&o.limit){e.next=22;break}case 13:if(u.length%d!=0){e.next=22;break}return e.next=16,this.worker.handleRequest(f.Z.ACTIVITIES,{limit:d,accountIds:null!==(l=null==o||null===(h=o.accounts)||void 0===h?void 0:h.join())&&void 0!==l?l:"",bookmark:c.bookmark,type:null!==(p=null==o?void 0:o.type)&&void 0!==p?p:y});case 16:if(0!==(c=e.sent).results.length){e.next=19;break}return e.abrupt("break",22);case 19:u.push.apply(u,i()(c.results)),e.next=13;break;case 22:return e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getBankAccounts",value:(n=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.BANK_ACCOUNTS,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"deposits",value:(r=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.DEPOSITS,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"positions",value:(t=u()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.POSITIONS,{accountId:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n={onFailure:function(e){return{status:e.statusCode,reason:e.statusMessage,body:e.body}},onSuccess:function(e){return e.body}};const i={LOGIN:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/login",authenticated:!1,onSuccess:function(e){return{tokens:{access:e.headers["x-access-token"],refresh:e.headers["x-refresh-token"],expires:parseInt(e.headers["x-access-token-expires"],10)},accountInfo:e.body}},onFailure:n.onFailure},REFRESH:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/refresh",authenticated:!1,onSuccess:function(e){return{tokens:{access:e.headers["x-access-token"],refresh:e.headers["x-refresh-token"],expires:parseInt(e.headers["x-access-token-expires"],10)}}},onFailure:n.onFailure},ACCOUNT_IDS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",authenticated:!0,onSuccess:function(e){return e.body.results.map((function(e){return e.id}))},onFailure:n.onFailure},LIST_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},ME:{method:"GET",url:"https://trade-service.wealthsimple.com/me",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},PERSON:{method:"GET",url:"https://trade-service.wealthsimple.com/person",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},HISTORY_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/history/{0}?account_id={1}",authenticated:!0,parameters:{0:"interval",1:"accountId"},onSuccess:n.onSuccess,onFailure:n.onFailure},ACTIVITIES:{method:"GET",url:"https://trade-service.wealthsimple.com/account/activities?limit={0}&account_ids={1}&[2]&bookmark={3}",authenticated:!0,parameters:{0:"limit",1:"accountIds",2:"type",3:"bookmark"},onSuccess:n.onSuccess,onFailure:n.onFailure},DEPOSITS:{method:"GET",url:"https://trade-service.wealthsimple.com/deposits",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},BANK_ACCOUNTS:{method:"GET",url:"https://trade-service.wealthsimple.com/bank-accounts",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},EXCHANGE_RATES:{method:"GET",url:"https://trade-service.wealthsimple.com/forex",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},SECURITY:{method:"GET",url:"https://trade-service.wealthsimple.com/securities?query={0}",authenticated:!0,parameters:{0:"ticker"},onSuccess:function(e){var t=e.body;if(0===t.results.length)throw new Error("Security does not exist");return t.results},onFailure:n.onFailure},EXTENSIVE_SECURITY_DETAILS:{method:"GET",url:"https://trade-service.wealthsimple.com/securities/{0}",authenticated:!0,parameters:{0:"id"},onSuccess:n.onSuccess,onFailure:n.onFailure},SECURITY_GROUPS:{method:"GET",url:"https://trade-service.wealthsimple.com/security-groups?limit=99",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},SECURITY_GROUP:{method:"GET",url:"https://trade-service.wealthsimple.com/security-groups/{0}/securities",authenticated:!0,parameters:{0:"groupId"},onSuccess:function(e){return e.body.results},onFailure:n.onFailure},QUOTES_HISTORY:{method:"GET",url:"https://trade-service.wealthsimple.com/securities/{0}/historical_quotes/{1}?mic=XNAS",authenticated:!0,parameters:{0:"id",1:"interval"},onSuccess:n.onSuccess,onFailure:n.onFailure},POSITIONS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/positions?account_id={0}",authenticated:!0,parameters:{0:"accountId"},onSuccess:function(e){return e.body.results},onFailure:n.onFailure},ORDERS_BY_PAGE:{method:"GET",url:"https://trade-service.wealthsimple.com/orders?offset={0}&account_id={1}",authenticated:!0,parameters:{0:"offset",1:"accountId"},onSuccess:function(e){var t=e.body;return{total:t.total,orders:t.results}},onFailure:n.onFailure},CANCEL_ORDER:{method:"DELETE",url:"https://trade-service.wealthsimple.com/orders/{0}",authenticated:!0,parameters:{0:"orderId"},onSuccess:n.onSuccess,onFailure:n.onFailure},PLACE_ORDER:{method:"POST",url:"https://trade-service.wealthsimple.com/orders",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure}}},464:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(757),i=r.n(n),a=r(926),s=r.n(a),o=r(575),u=r.n(o),c=r(913),l=r.n(c);const h=function(){function e(t){u()(this,e),this.worker=t}var t,r;return l()(e,[{key:"on",value:function(e,t){this.worker.on(e,t)}},{key:"use",value:function(e){this.worker.tokens.store(e)}},{key:"tokens",value:function(){return{access:this.worker.tokens.access,refresh:this.worker.tokens.refresh,expires:this.worker.tokens.expires}}},{key:"login",value:(r=s()(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.login(t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"refresh",value:(t=s()(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.refreshAuthentication());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},500:(e,t,r)=>{"use strict";r.d(t,{e:()=>a,Z:()=>s});var n=["implicit_token_refresh","securities_cache"],i=["securities_cache"],a=function(e){return!i.includes(e)};function s(e){if(!function(e){return null!=e&&e.startsWith("no_")?n.includes(e.substring("no_".length)):n.includes(e)}(e))throw new Error("'".concat(e,"' is not supported!"));if(null!=e&&e.startsWith("no_")){var t=e.substring(e.indexOf("_")+1);a(t)&&i.push(t)}else a(e)||i.splice(i.indexOf(e),1)}},657:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(38),i=r.n(n),a=r(575),s=r.n(a),o=r(913),u=r.n(o),c=["NASDAQ","NYSE","TSX","TSX-V","AEQUITAS NEO EXCHANGE","CC"];const l=function(){function e(t){var r;if(s()(this,e),this.symbol=null,this.exchange=null,this.id=null,this.crypto=!1,"string"==typeof t){if(""===t)throw new Error("Empty ticker");var n=t.split(":"),a=i()(n,2);this.symbol=a[0],this.exchange=a[1]}else{if(!t.symbol&&!t.id)throw new Error("Invalid ticker '".concat(t,"'"));this.symbol=t.symbol||null,this.exchange=t.exchange||null,this.id=t.id||null}if("NEO"===this.exchange&&(this.exchange="AEQUITAS NEO EXCHANGE"),this.exchange&&!c.includes(this.exchange))throw new Error("Invalid exchange '".concat(this.exchange,"'!"));("CC"===this.exchange||null!==(r=this.id)&&void 0!==r&&r.startsWith("sec-z"))&&(this.crypto=!0)}return u()(e,[{key:"format",value:function(){return this.id?this.id:"AEQUITAS NEO EXCHANGE"===this.exchange?"".concat(this.symbol,":NEO"):"".concat(this.symbol).concat(this.exchange?":".concat(this.exchange):"")}},{key:"weakEquals",value:function(e){return!(!this.id||this.id!==e.id)||!(!this.symbol||this.symbol!==e.symbol||this.crypto!==e.crypto)}}]),e}()},752:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(713),i=r.n(n),a=r(38),s=r.n(a),o=r(757),u=r.n(o),c=r(926),l=r.n(c),h=r(575),p=r.n(h),f=r(913),d=r.n(f),y=r(726),v=r(657),m=r(500),w=new(function(){function e(t){p()(this,e),this.cache=new Map,this.size=t}return d()(e,[{key:"insert",value:function(e,t){this.cache.size>=this.size&&this.cache.delete(this.cache.keys().next().value),this.cache.set(e,t)}},{key:"get",value:function(e){return this.cache.get(e)}}]),e}())(10);const k=function(e){var t=w.get(new v.Z(e).format());return void 0===t?null:t};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const g=function(){function e(t){p()(this,e),this.worker=t}var t,r,n,a;return d()(e,[{key:"exchangeRates",value:(a=l()(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(y.Z.EXCHANGE_RATES,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getSecurity",value:(n=l()(u().mark((function e(t,r){var n,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,i=new v.Z(t),r||!(0,m.e)("securities_cache")){e.next=6;break}if(!(n=k(i))){e.next=6;break}return e.abrupt("return",n);case 6:if(!i.id){e.next=12;break}return e.next=9,this.worker.handleRequest(y.Z.EXTENSIVE_SECURITY_DETAILS,{id:i.id});case 9:n=e.sent,e.next=28;break;case 12:return e.next=14,this.worker.handleRequest(y.Z.SECURITY,{ticker:i.symbol});case 14:if(n=(n=e.sent).filter((function(e){return e.stock.symbol===i.symbol})),i.crypto?n=n.filter((function(e){return"cryptocurrency"===e.security_type})):i.exchange&&(n=n.filter((function(e){return e.stock.primary_exchange===i.exchange}))),!(n.length>1)){e.next=19;break}throw new Error("Multiple securities matched query.");case 19:if(0!==n.length){e.next=21;break}throw new Error("No securities matched query.");case 21:if(a=n,o=s()(a,1),n=o[0],!r){e.next=28;break}return e.next=27,this.worker.handleRequest(y.Z.EXTENSIVE_SECURITY_DETAILS,{id:n.id});case 27:n=e.sent;case 28:return(0,m.e)("securities_cache")&&null===k(i)&&(u=i,c=n,w.insert(new v.Z(u).format(),c)),e.abrupt("return",n);case 30:case"end":return e.stop()}var u,c}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"securityGroups",value:(r=l()(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.worker.handleRequest(y.Z.SECURITY_GROUPS,{});case 2:return t=e.sent,e.abrupt("return",t.reduce((function(e,t){return b(b({},e),{},i()({},t.name,t.external_security_group_id))}),{}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getSecurityGroup",value:(t=l()(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,null!=t&&t.startsWith("security-group")){e.next=8;break}return e.next=4,this.securityGroups();case 4:if(n=e.sent,t in n){e.next=7;break}throw new Error("'".concat(t,"' is not a valid group name!"));case 7:r=n[t];case 8:return e.abrupt("return",this.worker.handleRequest(y.Z.SECURITY_GROUP,{groupId:r}));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},568:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(319),i=r.n(n),a=new(r(545).Headers);const s={add:function(e,t){return a.append(e,t)},remove:function(e){return a.delete(e)},clear:function(){return i()(a).forEach((function(e){return a.delete(e[0])}))},values:function(){return i()(a)}}},352:(e,t,r)=>{r(949).install();var n=r(464).Z,i=r(568).Z,a=r(391).Z,s=r(764).Z,o=r(752).Z,u=r(889).Z,c=r(500).Z,l=r(190).Z,h=function(){var e=new l,t=new o(e);return{auth:new n(e),headers:i,accounts:new a(e),orders:new s(e,t),quotes:new u(e,t),data:t,config:c}},p=new h;p.Session=function(){return new h},e.exports=p},190:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(757),i=r.n(n),a=r(38),s=r.n(a),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(713),d=r.n(f),y=r(214),v=r.n(y),m=r(568),w=r(726),k=r(500);const x=function(){function e(){l()(this,e),this.access=null,this.refresh=null,this.expires=null}return p()(e,[{key:"store",value:function(e){this.access=e.access,this.refresh=e.refresh,this.expires=e.expires}},{key:"expired",value:function(){return this.expires&&parseInt(Date.now()/1e3,10)>=this.expires}}]),e}();function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var g=200,E=201;function _(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t),n=e.url;if(e.parameters)for(var i=0;i<Object.keys(e.parameters).length;i++){var a=e.parameters[i];if(null===r[a]||void 0===r[a])throw new Error("URL parameter '".concat(a,"' missing!"));if(n.indexOf("{".concat(i,"}"))>=0)n=n.replace("{".concat(i,"}"),r[e.parameters[i]]);else{if(!(n.indexOf("[".concat(i,"]"))>=0))throw new Error("Malformed URL! This is an internal error: raise an issue!");!function(){var t=e.parameters[i],a=r[t].map((function(e){return"".concat(t,"=").concat(e)})).join("&");n=n.replace("[".concat(i,"]"),a)}()}delete r[e.parameters[i]]}return["GET","HEAD"].includes(e.method)?{url:n,payload:void 0}:{url:n,payload:JSON.stringify(r)}}const S=function(){function e(){l()(this,e),this.tokens=new x,this.events={otp:null,refresh:null}}var t,r,n,a,o;return p()(e,[{key:"on",value:function(e,t){if(!(e in this.events))throw new Error("Unsupported authentication event '".concat(e,"'!"));this.events[e]=t}},{key:"talk",value:(o=u()(i().mark((function e(t,r){var n,a,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={"Content-type":"application/json"},!t.authenticated){e.next=8;break}if(this.tokens.access){e.next=4;break}throw new Error("Authentication required for '".concat(t.url,"'"));case 4:if(!(0,k.e)("implicit_token_refresh")){e.next=7;break}return e.next=7,this.implicitTokenRefresh();case 7:n.Authorization=this.tokens.access;case 8:return m.Z.values().forEach((function(e){var t=s()(e,2),r=t[0],i=t[1];n[r]=i})),a=_(t,r),o=a.url,u=a.payload,c=null,e.next=13,v()({url:o,body:u,method:t.method,headers:n,callback:function(e,t){c=t}}).catch((function(){}));case 13:try{c.body=JSON.parse(c.body)}catch(e){}return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"handleRequest",value:(a=u()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.talk(t,r);case 2:if(n=e.sent,![g,E].includes(n.statusCode)){e.next=5;break}return e.abrupt("return",t.onSuccess(n));case 5:return e.abrupt("return",Promise.reject(t.onFailure(n)));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"login",value:(n=u()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,"function"!=typeof this.events.otp){e.next=4;break}return e.next=4,this.handleRequest(w.Z.LOGIN,{email:t,password:r}).catch((function(){}));case 4:if(e.prev=4,e.t0=this,e.t1=w.Z.LOGIN,e.t2=t,e.t3=r,"function"!=typeof this.events.otp){e.next=15;break}return e.next=12,this.events.otp();case 12:e.t4=e.sent,e.next=16;break;case 15:e.t4=this.events.otp;case 16:return e.t5=e.t4,e.t6={email:e.t2,password:e.t3,otp:e.t5},e.next=20,e.t0.handleRequest.call(e.t0,e.t1,e.t6);case 20:n=e.sent,e.next=28;break;case 23:if(e.prev=23,e.t7=e.catch(4),this.events.otp){e.next=27;break}throw new Error("OTP not provided!");case 27:throw e.t7;case 28:this.tokens.store(n.tokens);case 29:case"end":return e.stop()}}),e,this,[[4,23]])}))),function(e,t){return n.apply(this,arguments)})},{key:"refreshAuthentication",value:(r=u()(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleRequest(w.Z.REFRESH,{refresh_token:this.tokens.refresh});case 2:if(t=e.sent,this.tokens.store(t.tokens),e.prev=4,"function"!=typeof this.events.refresh){e.next=8;break}return e.next=8,this.events.refresh(this.tokens);case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),new Error("Error in auth.on() handler for 'refresh': ".concat(e.t0));case 13:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(){return r.apply(this,arguments)})},{key:"implicitTokenRefresh",value:(t=u()(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tokens.expired()){e.next=13;break}if(!this.tokens.refresh){e.next=12;break}return e.prev=2,e.next=5,this.refreshAuthentication();case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new Error("Unable to refresh expired token: ".concat(e.t0));case 10:e.next=13;break;case 12:throw new Error("Access token expired");case 13:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(){return t.apply(this,arguments)})}]),e}()},764:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(319),i=r.n(n),a=r(757),s=r.n(a),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(726),d=r(657),y=function(e){return["TSX","TSX-V"].includes(e)};function v(e,t,r){var n=e.orders.filter((function(e){if(t){var n=new d.Z({symbol:e.symbol,id:e.security_id});if(!new d.Z(t).weakEquals(n))return!1}return e.status===r}));return{orders:n,total:n.length}}const m=function(){function e(t,r){l()(this,e),this.worker=t,this.data=r}var t,r,n,a,o,c,h,m,w,k,x,b,g,E;return p()(e,[{key:"page",value:(E=u()(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.ORDERS_BY_PAGE,{offset:20*(r-1),accountId:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return E.apply(this,arguments)})},{key:"all",value:(g=u()(s().mark((function e(t){var r,n,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.page(t,1);case 2:if(r=e.sent,!((n=Math.ceil(r.total/20))>1)){e.next=12;break}for(a=[],o=2;o<=n;o++)a.push(this.page(t,o).then((function(e){return e.orders})));return e.next=9,Promise.all(a);case 9:e.sent.forEach((function(e){var t;return(t=r.orders).push.apply(t,i()(e))})),r.total=r.orders.length;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"pending",value:(b=u()(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"submitted"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"filled",value:(x=u()(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"posted"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return x.apply(this,arguments)})},{key:"cancelled",value:(k=u()(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"cancelled"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)})},{key:"cancel",value:(w=u()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,this.worker.handleRequest(f.Z.CANCEL_ORDER,{orderId:t});case 3:return e.t1=e.sent,e.abrupt("return",{order:e.t0,response:e.t1});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"cancelPending",value:(m=u()(s().mark((function e(t){var r,n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pending(t);case 2:return r=e.sent,e.abrupt("return",Promise.all(r.orders.map(function(){var e=u()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.cancel(t.order_id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"marketBuy",value:(h=u()(s().mark((function e(t,r,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r,!0);case 2:return i=e.sent,e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:i.id,limit_price:new d.Z(r).crypto?void 0:i.quote.amount,quantity:n,order_type:"buy_quantity",order_sub_type:"market",time_in_force:"day",account_id:t}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return h.apply(this,arguments)})},{key:"fractionalBuy",value:(c=u()(s().mark((function e(t,r,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r,!0);case 2:return e.sent,e.t0=this.worker,e.t1=f.Z.PLACE_ORDER,e.next=7,this.data.getSecurity(r);case 7:return e.t2=e.sent.id,e.t3=n,e.t4=t,e.t5={security_id:e.t2,market_value:e.t3,order_type:"buy_value",order_sub_type:"fractional",time_in_force:"day",account_id:e.t4},e.abrupt("return",e.t0.handleRequest.call(e.t0,e.t1,e.t5));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return c.apply(this,arguments)})},{key:"limitBuy",value:(o=u()(s().mark((function e(t,r,n,i){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.worker,e.t1=f.Z.PLACE_ORDER,e.next=4,this.data.getSecurity(r);case 4:return e.t2=e.sent.id,e.t3=n,e.t4=i,e.t5=t,e.t6={security_id:e.t2,limit_price:e.t3,quantity:e.t4,order_type:"buy_quantity",order_sub_type:"limit",time_in_force:"day",account_id:e.t5},e.abrupt("return",e.t0.handleRequest.call(e.t0,e.t1,e.t6));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return o.apply(this,arguments)})},{key:"stopLimitBuy",value:(a=u()(s().mark((function e(t,r,n,i,a){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r);case 2:if(o=e.sent,!y(o.stock.primary_exchange)||n===i){e.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:o.id,stop_price:n,limit_price:i,quantity:a,order_type:"buy_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:t}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,i){return a.apply(this,arguments)})},{key:"marketSell",value:(n=u()(s().mark((function e(t,r,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r,!0);case 2:return i=e.sent,e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:i.id,market_value:new d.Z(r).crypto?void 0:i.quote.amount,quantity:n,order_type:"sell_quantity",order_sub_type:"market",time_in_force:"day",account_id:t}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"limitSell",value:(r=u()(s().mark((function e(t,r,n,i){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.worker,e.t1=f.Z.PLACE_ORDER,e.next=4,this.data.getSecurity(r);case 4:return e.t2=e.sent.id,e.t3=n,e.t4=i,e.t5=t,e.t6={security_id:e.t2,limit_price:e.t3,quantity:e.t4,order_type:"sell_quantity",order_sub_type:"limit",time_in_force:"day",account_id:e.t5},e.abrupt("return",e.t0.handleRequest.call(e.t0,e.t1,e.t6));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"stopLimitSell",value:(t=u()(s().mark((function e(t,r,n,i,a){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r);case 2:if(o=e.sent,!y(o.stock.primary_exchange)||n===i){e.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:o.id,stop_price:n,limit_price:i,quantity:a,order_type:"sell_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:t}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i,a){return t.apply(this,arguments)})}]),e}()},889:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(757),i=r.n(n),a=r(926),s=r.n(a),o=r(575),u=r.n(o),c=r(913),l=r.n(c);const h=function(e){return{quote:function(t){return s()(i().mark((function r(){var n;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getSecurity(t,!0);case 2:return n=r.sent,r.abrupt("return",n.quote.amount);case 4:case"end":return r.stop()}}),r)})))()}}};var p=r(657),f=r(726);const d=function(){function e(t,r){u()(this,e),this.defaultProvider=new h(r),this.providers={},this.worker=t,this.data=r}var t,r;return l()(e,[{key:"use",value:function(e,t){if("function"!=typeof t.quote)throw new Error("Invalid quote provider for ".concat(e,"!"));this.providers[e]=t}},{key:"get",value:(r=s()(i().mark((function e(t){var r,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,!(n=new p.Z(t)).exchange){e.next=6;break}r=n.exchange,e.next=15;break;case 6:if(!n.crypto||!n.id){e.next=10;break}r="CC",e.next=15;break;case 10:if(!(Object.keys(this.providers).length>0)){e.next=15;break}return e.next=13,this.data.getSecurity(n,!1);case 13:a=e.sent,r=a.stock.primary_exchange;case 15:if(!(r in this.providers)){e.next=17;break}return e.abrupt("return",this.providers[r].quote(n));case 17:return e.abrupt("return",this.defaultProvider.quote(n));case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"history",value:(t=s()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=new p.Z(t)).id){e.next=5;break}return e.next=4,this.data.getSecurity(n);case 4:n.id=e.sent.id;case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.QUOTES_HISTORY,{id:n.id,interval:r}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}()},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new T(n||[]);return a._invoke=function(e,t,r){var n=l;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw a;return I()}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var o=_(s,r);if(o){if(o===d)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=c(e,t,r);if("normal"===u.type){if(n=r.done?f:h,u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=f,r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",h="suspendedYield",p="executing",f="completed",d={};function y(){}function v(){}function m(){}var w={};w[a]=function(){return this};var k=Object.getPrototypeOf,x=k&&k(k(R([])));x&&x!==r&&n.call(x,a)&&(w=x);var b=m.prototype=y.prototype=Object.create(w);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function E(e,t){function r(i,a,s,o){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,o)}))}o(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function R(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:I}}function I(){return{value:t,done:!0}}return v.prototype=b.constructor=m,m.constructor=v,m[o]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(E.prototype),E.prototype[s]=function(){return this},e.AsyncIterator=E,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var s=new E(u(t,r,n,i),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},g(b),b[o]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return o.type="throw",o.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},214:e=>{"use strict";e.exports=r},545:e=>{"use strict";e.exports=t},949:t=>{"use strict";t.exports=e}},i={};function a(e){if(i[e])return i[e].exports;var t=i[e]={exports:{}};return n[e](t,t.exports,a),t.exports}return a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(352)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheUxpa2VUb0FycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXJyYXlXaXRoSG9sZXMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlUmVzdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlU3ByZWFkLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYWNjb3VudHMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYXBpL2VuZHBvaW50cy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9hdXRoLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9jb3JlL3RpY2tlci5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcHRpb25hbC9zZWN1cml0aWVzLWNhY2hlLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvcmUvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvZGF0YS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9oZWFkZXJzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2hlbHBlcnMvdGltZS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9jb3JlL3Rva2Vucy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9uZXR3b3JrL2h0dHBzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL29yZGVycy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9xdW90ZXMvZGVmYXVsdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9xdW90ZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvcmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpL2V4dGVybmFsIHtcImNvbW1vbmpzXCI6XCJjbG91ZHNjcmFwZXJcIixcImNvbW1vbmpzMlwiOlwiY2xvdWRzY3JhcGVyXCIsXCJhbWRcIjpcImNsb3Vkc2NyYXBlclwiLFwicm9vdFwiOlwiX1wifSIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwibm9kZS1mZXRjaFwiLFwiY29tbW9uanMyXCI6XCJub2RlLWZldGNoXCIsXCJhbWRcIjpcIm5vZGUtZmV0Y2hcIixcInJvb3RcIjpcIl9cIn0iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcInNvdXJjZS1tYXAtc3VwcG9ydFwiLFwiY29tbW9uanMyXCI6XCJzb3VyY2UtbWFwLXN1cHBvcnRcIixcImFtZFwiOlwic291cmNlLW1hcC1zdXBwb3J0XCIsXCJyb290XCI6XCJfXCJ9Iiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwiZ2xvYmFsIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOTQ5X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181NDVfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzIxNF9fIiwiYXJyIiwibGVuIiwibGVuZ3RoIiwiaSIsImFycjIiLCJBcnJheSIsImlzQXJyYXkiLCJhcnJheUxpa2VUb0FycmF5IiwiYXN5bmNHZW5lcmF0b3JTdGVwIiwiZ2VuIiwicmVzb2x2ZSIsInJlamVjdCIsIl9uZXh0IiwiX3Rocm93Iiwia2V5IiwiYXJnIiwiaW5mbyIsInZhbHVlIiwiZXJyb3IiLCJkb25lIiwiUHJvbWlzZSIsInRoZW4iLCJmbiIsInNlbGYiLCJ0aGlzIiwiYXJncyIsImFyZ3VtZW50cyIsImFwcGx5IiwiZXJyIiwidW5kZWZpbmVkIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJvYmoiLCJpdGVyIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJmcm9tIiwiX2FyciIsIl9uIiwiX2QiLCJfZSIsIl9zIiwiX2kiLCJuZXh0IiwicHVzaCIsImFycmF5V2l0aEhvbGVzIiwiaXRlcmFibGVUb0FycmF5TGltaXQiLCJ1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsIm5vbkl0ZXJhYmxlUmVzdCIsImFycmF5V2l0aG91dEhvbGVzIiwiaXRlcmFibGVUb0FycmF5Iiwibm9uSXRlcmFibGVTcHJlYWQiLCJvIiwibWluTGVuIiwibiIsInRvU3RyaW5nIiwiY2FsbCIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwidGVzdCIsIkFDVElWSVRJRVNfTUFYX0RSQVciLCJBQ1RJVklUSUVTX1RZUEVTX0FMTCIsImh0dHBzV29ya2VyIiwid29ya2VyIiwiaGFuZGxlUmVxdWVzdCIsImVuZHBvaW50cyIsImFjY291bnRzIiwidGZzYSIsImZpbmQiLCJhY2NvdW50Iiwic3RhcnRzV2l0aCIsInJyc3AiLCJjcnlwdG8iLCJwZXJzb25hbCIsImludGVydmFsIiwiYWNjb3VudElkIiwiZmlsdGVycyIsImxpbWl0IiwiRXJyb3IiLCJ0eXBlIiwicmVzdWx0cyIsImFjY291bnRJZHMiLCJqb2luIiwiYm9va21hcmsiLCJyZXNwb25zZSIsImRlZmF1bHRFbmRwb2ludEJlaGF2aW91ciIsIm9uRmFpbHVyZSIsInN0YXR1cyIsInN0YXR1c0NvZGUiLCJyZWFzb24iLCJzdGF0dXNNZXNzYWdlIiwiYm9keSIsIm9uU3VjY2VzcyIsIkxPR0lOIiwibWV0aG9kIiwidXJsIiwiYXV0aGVudGljYXRlZCIsInRva2VucyIsImFjY2VzcyIsImhlYWRlcnMiLCJyZWZyZXNoIiwiZXhwaXJlcyIsInBhcnNlSW50IiwiYWNjb3VudEluZm8iLCJSRUZSRVNIIiwiQUNDT1VOVF9JRFMiLCJtYXAiLCJpZCIsIkxJU1RfQUNDT1VOVCIsIk1FIiwiUEVSU09OIiwiSElTVE9SWV9BQ0NPVU5UIiwicGFyYW1ldGVycyIsIjAiLCIxIiwiQUNUSVZJVElFUyIsIjIiLCIzIiwiREVQT1NJVFMiLCJCQU5LX0FDQ09VTlRTIiwiRVhDSEFOR0VfUkFURVMiLCJTRUNVUklUWSIsImRhdGEiLCJFWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUyIsIlNFQ1VSSVRZX0dST1VQUyIsIlNFQ1VSSVRZX0dST1VQIiwiUVVPVEVTX0hJU1RPUlkiLCJQT1NJVElPTlMiLCJPUkRFUlNfQllfUEFHRSIsInRvdGFsIiwib3JkZXJzIiwiQ0FOQ0VMX09SREVSIiwiUExBQ0VfT1JERVIiLCJldmVudCIsImhhbmRsZXIiLCJvbiIsInN0YXRlIiwic3RvcmUiLCJlbWFpbCIsInBhc3N3b3JkIiwibG9naW4iLCJyZWZyZXNoQXV0aGVudGljYXRpb24iLCJzdXBwb3J0ZWRGZWF0dXJlcyIsImRpc2FibGVkIiwiY29uZmlnRW5hYmxlZCIsImZlYXR1cmUiLCJpbmNsdWRlcyIsImNvbmZpZyIsInN1YnN0cmluZyIsInN1cHBvcnRlZCIsImN1dCIsImluZGV4T2YiLCJzcGxpY2UiLCJleGNoYW5nZXMiLCJzeW1ib2wiLCJleGNoYW5nZSIsInNwbGl0Iiwib3RoZXIiLCJjYWNoZSIsInNpemUiLCJNYXAiLCJrZXlzIiwic2V0IiwiZ2V0Iiwic2VjdXJpdHkiLCJyZXN1bHQiLCJUaWNrZXIiLCJmb3JtYXQiLCJ1c2VyVGlja2VyIiwiZXh0ZW5zaXZlIiwidGlja2VyIiwiZmlsdGVyIiwic3RvY2siLCJzZWN1cml0eV90eXBlIiwicHJpbWFyeV9leGNoYW5nZSIsImluc2VydCIsInJlZHVjZSIsIml0ZW0iLCJleHRlcm5hbF9zZWN1cml0eV9ncm91cF9pZCIsImdyb3VwIiwiZ3JvdXBJZCIsInNlY3VyaXR5R3JvdXBzIiwiZ3JvdXBzIiwiY3VzdG9tSGVhZGVycyIsIkhlYWRlcnMiLCJhZGQiLCJhcHBlbmQiLCJyZW1vdmUiLCJjbGVhciIsImZvckVhY2giLCJoZWFkZXIiLCJ2YWx1ZXMiLCJBdXRoZW50aWNhdGlvbiIsIkFjY291bnRzIiwiT3JkZXJzIiwiRGF0YSIsIlF1b3RlcyIsIkh0dHBzV29ya2VyIiwiU2Vzc2lvbiIsImF1dGgiLCJxdW90ZXMiLCJkZWZhdWx0U2Vzc2lvbiIsIkRhdGUiLCJub3ciLCJIVFRQX09LIiwiSFRUUF9DUkVBVEVEIiwiZmluYWxpemVSZXF1ZXN0IiwiZW5kcG9pbnQiLCJwYXJhbXMiLCJpbmRleCIsInBhcmFtZXRlck5hbWUiLCJyZXBsYWNlIiwicXVlcnlQYXJhbU5hbWUiLCJxdWVyeVBhcmFtIiwicGF5bG9hZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJUb2tlbnMiLCJldmVudHMiLCJvdHAiLCJpbXBsaWNpdFRva2VuUmVmcmVzaCIsIkF1dGhvcml6YXRpb24iLCJjbG91ZHNjcmFwZXIiLCJjYWxsYmFjayIsInVudXNlZCIsInJlcyIsInBhcnNlIiwidGFsayIsInJlZnJlc2hfdG9rZW4iLCJleHBpcmVkIiwiaXNDYW5hZGlhblNlY3VyaXR5IiwiZmlsdGVyZWRPcmRlcnMiLCJsaXN0IiwiZmlsdGVyZWQiLCJvcmRlciIsInNlY3VyaXR5X2lkIiwid2Vha0VxdWFscyIsInBhZ2VOdW0iLCJvZmZzZXQiLCJwYWdlIiwicGFnZXMiLCJNYXRoIiwiY2VpbCIsInRhc2tzIiwiYWxsIiwib3JkZXJJZCIsInBlbmRpbmciLCJjYW5jZWwiLCJvcmRlcl9pZCIsInF1YW50aXR5IiwiZ2V0U2VjdXJpdHkiLCJkZXRhaWxzIiwibGltaXRfcHJpY2UiLCJxdW90ZSIsImFtb3VudCIsIm9yZGVyX3R5cGUiLCJvcmRlcl9zdWJfdHlwZSIsInRpbWVfaW5fZm9yY2UiLCJhY2NvdW50X2lkIiwibWFya2V0VmFsdWUiLCJtYXJrZXRfdmFsdWUiLCJzdG9wIiwic3RvcF9wcmljZSIsImRlZmF1bHRQcm92aWRlciIsIlRyYWRlUXVvdGVzIiwicHJvdmlkZXJzIiwicHJvdmlkZXIiLCJydW50aW1lIiwiT3AiLCJoYXNPd24iLCJoYXNPd25Qcm9wZXJ0eSIsIiRTeW1ib2wiLCJpdGVyYXRvclN5bWJvbCIsImFzeW5jSXRlcmF0b3JTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwidG9TdHJpbmdUYWdTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIndyYXAiLCJpbm5lckZuIiwib3V0ZXJGbiIsInRyeUxvY3NMaXN0IiwicHJvdG9HZW5lcmF0b3IiLCJHZW5lcmF0b3IiLCJnZW5lcmF0b3IiLCJjcmVhdGUiLCJjb250ZXh0IiwiQ29udGV4dCIsIl9pbnZva2UiLCJHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0IiwiR2VuU3RhdGVFeGVjdXRpbmciLCJHZW5TdGF0ZUNvbXBsZXRlZCIsImRvbmVSZXN1bHQiLCJkZWxlZ2F0ZSIsImRlbGVnYXRlUmVzdWx0IiwibWF5YmVJbnZva2VEZWxlZ2F0ZSIsIkNvbnRpbnVlU2VudGluZWwiLCJzZW50IiwiX3NlbnQiLCJkaXNwYXRjaEV4Y2VwdGlvbiIsImFicnVwdCIsInJlY29yZCIsInRyeUNhdGNoIiwiR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCIsIm1ha2VJbnZva2VNZXRob2QiLCJHZW5lcmF0b3JGdW5jdGlvbiIsIkdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlIiwiSXRlcmF0b3JQcm90b3R5cGUiLCJnZXRQcm90byIsImdldFByb3RvdHlwZU9mIiwiTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUiLCJHcCIsImRlZmluZUl0ZXJhdG9yTWV0aG9kcyIsIkFzeW5jSXRlcmF0b3IiLCJQcm9taXNlSW1wbCIsImludm9rZSIsIl9fYXdhaXQiLCJ1bndyYXBwZWQiLCJwcmV2aW91c1Byb21pc2UiLCJjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyIsInJlc3VsdE5hbWUiLCJuZXh0TG9jIiwicHVzaFRyeUVudHJ5IiwibG9jcyIsImVudHJ5IiwidHJ5TG9jIiwiY2F0Y2hMb2MiLCJmaW5hbGx5TG9jIiwiYWZ0ZXJMb2MiLCJ0cnlFbnRyaWVzIiwicmVzZXRUcnlFbnRyeSIsImNvbXBsZXRpb24iLCJyZXNldCIsIml0ZXJhYmxlIiwiaXRlcmF0b3JNZXRob2QiLCJpc05hTiIsImRpc3BsYXlOYW1lIiwiaXNHZW5lcmF0b3JGdW5jdGlvbiIsImdlbkZ1biIsImN0b3IiLCJtYXJrIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJhd3JhcCIsImFzeW5jIiwib2JqZWN0IiwicmV2ZXJzZSIsInBvcCIsInNraXBUZW1wUmVzZXQiLCJwcmV2IiwiY2hhckF0Iiwicm9vdFJlY29yZCIsInJ2YWwiLCJleGNlcHRpb24iLCJoYW5kbGUiLCJsb2MiLCJjYXVnaHQiLCJoYXNDYXRjaCIsImhhc0ZpbmFsbHkiLCJmaW5hbGx5RW50cnkiLCJjb21wbGV0ZSIsImZpbmlzaCIsInRocm93biIsImRlbGVnYXRlWWllbGQiLCJyZWdlbmVyYXRvclJ1bnRpbWUiLCJhY2NpZGVudGFsU3RyaWN0TW9kZSIsIkZ1bmN0aW9uIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJwcm9wIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsRUFBUUcsUUFBUSxzQkFBdUJBLFFBQVEsY0FBZUEsUUFBUSxpQkFDOUQsbUJBQVhDLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxDQUFDLHFCQUFzQixhQUFjLGdCQUFpQkosR0FDbkMsaUJBQVpDLFFBQ2RBLFFBQVEsZUFBaUJELEVBQVFHLFFBQVEsc0JBQXVCQSxRQUFRLGNBQWVBLFFBQVEsaUJBRS9GSixFQUFLLGVBQWlCQyxFQUFRRCxFQUFRLEVBQUdBLEVBQVEsRUFBR0EsRUFBUSxHQVI5RCxDQVNHTyxRQUFRLFNBQVNDLEVBQWtDQyxFQUFrQ0MsR0FDeEYsTSxxQkNBQVAsRUFBT0QsUUFWUCxTQUEyQlMsRUFBS0MsSUFDbkIsTUFBUEEsR0FBZUEsRUFBTUQsRUFBSUUsVUFBUUQsRUFBTUQsRUFBSUUsUUFFL0MsSUFBSyxJQUFJQyxFQUFJLEVBQUdDLEVBQU8sSUFBSUMsTUFBTUosR0FBTUUsRUFBSUYsRUFBS0UsSUFDOUNDLEVBQUtELEdBQUtILEVBQUlHLEdBR2hCLE9BQU9DLEksUUNIVFosRUFBT0QsUUFKUCxTQUF5QlMsR0FDdkIsR0FBSUssTUFBTUMsUUFBUU4sR0FBTSxPQUFPQSxJLGNDRGpDLElBQUlPLEVBQW1CLEVBQVEsS0FNL0JmLEVBQU9ELFFBSlAsU0FBNEJTLEdBQzFCLEdBQUlLLE1BQU1D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TndSLElBUUo5VCxFQTFyQkssQ0Fpc0JpQkMsRUFBT0QsU0FHdEMsSUFDRWtZLG1CQUFxQmhHLEVBQ3JCLE1BQU9pRyxHQVVQQyxTQUFTLElBQUsseUJBQWRBLENBQXdDbEcsSyxxQkN2dEIxQ2pTLEVBQU9ELFFBQVVRLEcscUJDQWpCUCxFQUFPRCxRQUFVTyxHLHFCQ0FqQk4sRUFBT0QsUUFBVU0sSUNDYitYLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixHQUFHRixFQUF5QkUsR0FDM0IsT0FBT0YsRUFBeUJFLEdBQVV2WSxRQUczQyxJQUFJQyxFQUFTb1ksRUFBeUJFLEdBQVksQ0FHakR2WSxRQUFTLElBT1YsT0FIQXdZLEVBQW9CRCxHQUFVdFksRUFBUUEsRUFBT0QsUUFBU3NZLEdBRy9DclksRUFBT0QsUUNqQmYsT0NGQXNZLEVBQW9CMVQsRUFBSzNFLElBQ3hCLElBQUl3WSxFQUFTeFksR0FBVUEsRUFBT3lZLFdBQzdCLElBQU16WSxFQUFnQixRQUN0QixJQUFNQSxFQUVQLE9BREFxWSxFQUFvQkssRUFBRUYsRUFBUSxDQUFFRyxFQUFHSCxJQUM1QkEsR0NMUkgsRUFBb0JLLEVBQUksQ0FBQzNZLEVBQVM2WSxLQUNqQyxJQUFJLElBQUl0WCxLQUFPc1gsRUFDWFAsRUFBb0I1VCxFQUFFbVUsRUFBWXRYLEtBQVMrVyxFQUFvQjVULEVBQUUxRSxFQUFTdUIsSUFDNUUwQixPQUFPQyxlQUFlbEQsRUFBU3VCLEVBQUssQ0FBRXVCLFlBQVksRUFBTTRJLElBQUttTixFQUFXdFgsTUNKM0UrVyxFQUFvQjVULEVBQUksQ0FBQ3BCLEVBQUt3VixJQUFTN1YsT0FBT0ksVUFBVWdQLGVBQWV2TixLQUFLeEIsRUFBS3dWLEdIRzFFUixFQUFvQixNIiwiZmlsZSI6ImRpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJzb3VyY2UtbWFwLXN1cHBvcnRcIiksIHJlcXVpcmUoXCJub2RlLWZldGNoXCIpLCByZXF1aXJlKFwiY2xvdWRzY3JhcGVyXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInNvdXJjZS1tYXAtc3VwcG9ydFwiLCBcIm5vZGUtZmV0Y2hcIiwgXCJjbG91ZHNjcmFwZXJcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wid3N0cmFkZS1hcGlcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJzb3VyY2UtbWFwLXN1cHBvcnRcIiksIHJlcXVpcmUoXCJub2RlLWZldGNoXCIpLCByZXF1aXJlKFwiY2xvdWRzY3JhcGVyXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJ3c3RyYWRlLWFwaVwiXSA9IGZhY3Rvcnkocm9vdFtcIl9cIl0sIHJvb3RbXCJfXCJdLCByb290W1wiX1wiXSk7XG59KShnbG9iYWwsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzk0OV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181NDVfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMjE0X18pIHtcbnJldHVybiAiLCJmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xuICB9XG5cbiAgcmV0dXJuIGFycjI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FycmF5TGlrZVRvQXJyYXk7IiwiZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hcnJheVdpdGhIb2xlczsiLCJ2YXIgYXJyYXlMaWtlVG9BcnJheSA9IHJlcXVpcmUoXCIuL2FycmF5TGlrZVRvQXJyYXlcIik7XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkoYXJyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlXaXRob3V0SG9sZXM7IiwiZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykge1xuICB0cnkge1xuICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTtcbiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlamVjdChlcnJvcik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGluZm8uZG9uZSkge1xuICAgIHJlc29sdmUodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXG4gICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwibmV4dFwiLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcInRocm93XCIsIGVycik7XG4gICAgICB9XG5cbiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7XG4gICAgfSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FzeW5jVG9HZW5lcmF0b3I7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY2xhc3NDYWxsQ2hlY2s7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jcmVhdGVDbGFzczsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfZGVmaW5lUHJvcGVydHk7IiwiZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pdGVyYWJsZVRvQXJyYXk7IiwiZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkge1xuICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjtcbiAgdmFyIF9hcnIgPSBbXTtcbiAgdmFyIF9uID0gdHJ1ZTtcbiAgdmFyIF9kID0gZmFsc2U7XG4gIHZhciBfZSA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHtcbiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7XG5cbiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhaztcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kID0gdHJ1ZTtcbiAgICBfZSA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2QpIHRocm93IF9lO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBfYXJyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pdGVyYWJsZVRvQXJyYXlMaW1pdDsiLCJmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9ub25JdGVyYWJsZVJlc3Q7IiwiZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfbm9uSXRlcmFibGVTcHJlYWQ7IiwidmFyIGFycmF5V2l0aEhvbGVzID0gcmVxdWlyZShcIi4vYXJyYXlXaXRoSG9sZXNcIik7XG5cbnZhciBpdGVyYWJsZVRvQXJyYXlMaW1pdCA9IHJlcXVpcmUoXCIuL2l0ZXJhYmxlVG9BcnJheUxpbWl0XCIpO1xuXG52YXIgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgPSByZXF1aXJlKFwiLi91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheVwiKTtcblxudmFyIG5vbkl0ZXJhYmxlUmVzdCA9IHJlcXVpcmUoXCIuL25vbkl0ZXJhYmxlUmVzdFwiKTtcblxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gIHJldHVybiBhcnJheVdpdGhIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBub25JdGVyYWJsZVJlc3QoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfc2xpY2VkVG9BcnJheTsiLCJ2YXIgYXJyYXlXaXRob3V0SG9sZXMgPSByZXF1aXJlKFwiLi9hcnJheVdpdGhvdXRIb2xlc1wiKTtcblxudmFyIGl0ZXJhYmxlVG9BcnJheSA9IHJlcXVpcmUoXCIuL2l0ZXJhYmxlVG9BcnJheVwiKTtcblxudmFyIHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5ID0gcmVxdWlyZShcIi4vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXlcIik7XG5cbnZhciBub25JdGVyYWJsZVNwcmVhZCA9IHJlcXVpcmUoXCIuL25vbkl0ZXJhYmxlU3ByZWFkXCIpO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBhcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgbm9uSXRlcmFibGVTcHJlYWQoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfdG9Db25zdW1hYmxlQXJyYXk7IiwidmFyIGFycmF5TGlrZVRvQXJyYXkgPSByZXF1aXJlKFwiLi9hcnJheUxpa2VUb0FycmF5XCIpO1xuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7XG4gIGlmICghbykgcmV0dXJuO1xuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWdlbmVyYXRvci1ydW50aW1lXCIpO1xuIiwiaW1wb3J0IGVuZHBvaW50cyBmcm9tICcuL2FwaS9lbmRwb2ludHMnO1xuXG4vLyBUaGUgbWF4aW11bXVtIG51bWJlciBvZiBhY3Rpdml0aWVzIHdlIGNhbiBwdWxsIGluIG9uZSBnby5cbmNvbnN0IEFDVElWSVRJRVNfTUFYX0RSQVcgPSA5OTtcbi8vIFN1cHBvcnRlZCBhY3Rpdml0eSB0eXBlc1xuY29uc3QgQUNUSVZJVElFU19UWVBFU19BTEwgPSBbXG4gICdzZWxsJyxcbiAgJ2RlcG9zaXQnLFxuICAnd2l0aGRyYXdhbCcsXG4gICdkaXZpZGVuZCcsXG4gICdpbnN0aXR1dGlvbmFsX3RyYW5zZmVyJyxcbiAgJ2ludGVybmFsX3RyYW5zZmVyJyxcbiAgJ3JlZnVuZCcsXG4gICdyZWZlcnJhbF9ib251cycsXG4gICdhZmZpbGlhdGUnLFxuICAnYnV5Jyxcbl07XG5cbmNsYXNzIEFjY291bnRzIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQWNjb3VudCBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIGFuIEh0dHBzIHdvcmtlciBzdGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBodHRwc1dvcmtlclxuICAgKi9cbiAgY29uc3RydWN0b3IoaHR0cHNXb3JrZXIpIHtcbiAgICB0aGlzLndvcmtlciA9IGh0dHBzV29ya2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbGwgYWNjb3VudCBpZHMgb3BlbiB1bmRlciB0aGlzIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgYXN5bmMgYWxsKCkge1xuICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuQUNDT1VOVF9JRFMsIHt9KTtcblxuICAgIHJldHVybiB7XG4gICAgICB0ZnNhOiBhY2NvdW50cy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnN0YXJ0c1dpdGgoJ3Rmc2EnKSksXG4gICAgICBycnNwOiBhY2NvdW50cy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnN0YXJ0c1dpdGgoJ3Jyc3AnKSksXG4gICAgICBjcnlwdG86IGFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnQuc3RhcnRzV2l0aCgnbm9uLXJlZ2lzdGVyZWQtY3J5cHRvJykpLFxuICAgICAgcGVyc29uYWw6IGFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnQuc3RhcnRzV2l0aCgnbm9uLXJlZ2lzdGVyZWQnKSAmJiAhYWNjb3VudC5zdGFydHNXaXRoKCdub24tcmVnaXN0ZXJlZC1jcnlwdG8nKSksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBkZXRhaWxzIGFib3V0IHlvdXIgb3BlbiBhY2NvdW50cywgbGlrZSBhY2NvdW50IHR5cGUsIGJ1eWluZyBwb3dlcixcbiAgICogY3VycmVudCBiYWxhbmNlLCBhbmQgbW9yZS5cbiAgICovXG4gIGFzeW5jIGRhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkxJU1RfQUNDT1VOVCwge30pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBzb21lIHN1cmZhY2UgaW5mb3JtYXRpb24gYWJvdXQgeW91IGxpa2UgeW91ciBuYW1lIGFuZCBlbWFpbCwgYWNjb3VudFxuICAgKiBzaWduYXR1cmVzLCBhbmQgb3RoZXIgbWV0YWRhdGEuXG4gICAqL1xuICBhc3luYyBtZSgpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuTUUsIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCB5b3UgdGhhdCB5b3UgcHJvdmlkZWQgb24gc2lnbnVwLCBsaWtlIHJlc2lkZW50aWFsIGFuZFxuICAgKiBtYWlsaW5nIGFkZHJlc3NlcywgZW1wbG95bWVudCwgcGhvbmUgbnVtYmVycywgYW5kIHNvIG9uLlxuICAgKi9cbiAgYXN5bmMgcGVyc29uKCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QRVJTT04sIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWVyeSB0aGUgaGlzdG9yeSBvZiB0aGUgYWNjb3VudCB3aXRoaW4gYSBjZXJ0YWluIHRpbWUgaW50ZXJ2YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gaW50ZXJ2YWwgVGhlIHRpbWUgaW50ZXJ2YWwgZm9yIHRoZSBoaXN0b3J5IHF1ZXJ5XG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIHF1ZXJ5XG4gICAqL1xuICBhc3luYyBoaXN0b3J5KGludGVydmFsLCBhY2NvdW50SWQpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuSElTVE9SWV9BQ0NPVU5ULCB7IGludGVydmFsLCBhY2NvdW50SWQgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2hlcyBhY3Rpdml0aWVzIG9uIHlvdXIgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnQuIFlvdSBjYW4gbGltaXQgbnVtYmVyIG9mIGFjdGl2aXRpZXNcbiAgICogdG8gZmV0Y2ggb3IgcmVmaW5lIHdoYXQgYWN0aXZpdGllcyBhcmUgZmV0Y2hlZCBiYXNlZCBvbiBhY3Rpdml0eSB0eXBlIChlLmcuLCBidXksIHNlbGwpLFxuICAgKiBhY2NvdW50IChlLmcuLCB0ZnNhLCBycnNwKS5cbiAgICovXG4gIGFzeW5jIGFjdGl2aXRpZXMoZmlsdGVycyA9IHt9KSB7XG4gICAgLy8gVGhlIG1heGltdW0gZHJhdyBwZXIgQVBJIGNhbGwgaXMgOTkuIElmIGl0J3MgaGlnaGVyLCB3ZSBtdXN0IGFib3J0LlxuICAgIGlmIChmaWx0ZXJzPy5saW1pdCAmJiBmaWx0ZXJzLmxpbWl0ID4gQUNUSVZJVElFU19NQVhfRFJBVykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmaWx0ZXJzLmxpbWl0IGNhbiBub3QgZXhjZWVkIDk5ISBMZWF2ZSBmaWx0ZXJzLmxpbWl0IHVuZGVmaW5lZCBpZiB5b3Ugd2FudCB0byByZXRyaWV2ZSBhbGwuJyk7XG4gICAgfVxuXG4gICAgLy8gVGVsbCB0aGUgdXNlciB0aGF0IGZpbHRlci5hY2NvdW50cyBtdXN0IGJlIGFuIGVycm9yXG4gICAgaWYgKGZpbHRlcnM/LmFjY291bnRzICYmICFBcnJheS5pc0FycmF5KGZpbHRlcnMuYWNjb3VudHMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZpbHRlcnMuYWNjb3VudHMgbXVzdCBiZSBhbiBhcnJheSEnKTtcbiAgICB9XG5cbiAgICAvLyBUZWxsIHRoZSB1c2VyIHRoYXQgZmlsdGVyLnR5cGUgbXVzdCBiZSBhbiBlcnJvclxuICAgIGlmIChmaWx0ZXJzPy50eXBlICYmICFBcnJheS5pc0FycmF5KGZpbHRlcnMudHlwZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZmlsdGVycy50eXBlIG11c3QgYmUgYW4gYXJyYXkhJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuXG4gICAgLy8gRHJhdyB0aGUgZmlyc3Qgc2V0IG9mIGFjdGl2aXRpZXNcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5BQ1RJVklUSUVTLCB7XG4gICAgICBsaW1pdDogZmlsdGVycz8ubGltaXQgPz8gQUNUSVZJVElFU19NQVhfRFJBVyxcbiAgICAgIGFjY291bnRJZHM6IGZpbHRlcnM/LmFjY291bnRzPy5qb2luKCkgPz8gJycsXG4gICAgICBib29rbWFyazogJycsXG4gICAgICB0eXBlOiBmaWx0ZXJzPy50eXBlID8/IEFDVElWSVRJRVNfVFlQRVNfQUxMLFxuICAgIH0pO1xuICAgIHJlc3VsdHMucHVzaCguLi5yZXNwb25zZS5yZXN1bHRzKTtcblxuICAgIC8qXG4gICAgICogVG8gZ2V0IGFsbCBhY3Rpdml0aWVzLCB3ZSB3aWxsIGhhdmUgdG8gZHJhdyB0aGUgbWF4aW11bSBudW1iZXJcbiAgICAgKiBvZiBhY3Rpdml0aWVzIHBlciBBUEkgY2FsbCB1bnRpbCB3ZSBhcmUgZG9uZSAoaS5lLiwgd2hlbiB3ZVxuICAgICAqIHJlY2VpdmUgYSBudW1iZXIgb2YgYWN0aXZpdGllcyBsZXNzIHRoYW4gdGhlIG1heGltdW0gcGVyIGRyYXcpXG4gICAgICovXG4gICAgaWYgKCFmaWx0ZXJzPy5saW1pdCkge1xuICAgICAgLypcbiAgICAgICAqIFRoZSBuby1hd2FpdC1pbi1sb29wIHJ1bGUgaXMgYmVpbmcgZGlzYWJsZWQgZm9yIHRoaXMgY2FzZSBiZWNhdXNlXG4gICAgICAgKiBldmVyeSBsb29wIGZlZWRzIGJhY2sgaW50byB0aGUgbmV4dCBvbmUgd2l0aCB0aGUgYm9va21hcmsgKGkuZS4sIHRoZXlcbiAgICAgICAqIGFyZSBub3QgaW5kZXBlbmRlbnQgYW5kIG11c3QgcnVuIHNlcXVlbnRpYWxseSkuXG4gICAgICAgKi9cbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWF3YWl0LWluLWxvb3AgKi9cbiAgICAgIHdoaWxlIChyZXN1bHRzLmxlbmd0aCAlIEFDVElWSVRJRVNfTUFYX0RSQVcgPT09IDApIHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5BQ1RJVklUSUVTLCB7XG4gICAgICAgICAgbGltaXQ6IEFDVElWSVRJRVNfTUFYX0RSQVcsXG4gICAgICAgICAgYWNjb3VudElkczogZmlsdGVycz8uYWNjb3VudHM/LmpvaW4oKSA/PyAnJyxcbiAgICAgICAgICBib29rbWFyazogcmVzcG9uc2UuYm9va21hcmssXG4gICAgICAgICAgdHlwZTogZmlsdGVycz8udHlwZSA/PyBBQ1RJVklUSUVTX1RZUEVTX0FMTCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRXNjYXBlIHRoZSBsb29wIGlmIHRoZSByZXR1cm5lZCByZXN1bHRzIGlzIGVtcHR5LiBUaGlzIG1lYW5zIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kLlxuICAgICAgICBpZiAocmVzcG9uc2UucmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdHMucHVzaCguLi5yZXNwb25zZS5yZXN1bHRzKTtcbiAgICAgIH1cbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tYXdhaXQtaW4tbG9vcCAqL1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbGwgYmFuayBhY2NvdW50cyBsaW5rZWQgdG8gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgYXN5bmMgZ2V0QmFua0FjY291bnRzKCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5CQU5LX0FDQ09VTlRTLCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogR3JhYiBhbGwgZGVwb3NpdCByZWNvcmRzIG9uIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIGFzeW5jIGRlcG9zaXRzKCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5ERVBPU0lUUywge30pO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RzIGFsbCBwb3NpdGlvbnMgaW4gdGhlIHNwZWNpZmllZCB0cmFkaW5nIGFjY291bnQgdW5kZXIgdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBBY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICovXG4gIGFzeW5jIHBvc2l0aW9ucyhhY2NvdW50SWQpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUE9TSVRJT05TLCB7IGFjY291bnRJZCB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBY2NvdW50cztcbiIsImNvbnN0IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ciA9IHtcblxuICAvLyBEZWZhdWx0IGZhaWx1cmUgbWV0aG9kIGZvciBhbGwgZW5kcG9pbnQgY2FsbHNcbiAgb25GYWlsdXJlOiAocmVzcG9uc2UpID0+ICh7XG4gICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXNDb2RlLFxuICAgIHJlYXNvbjogcmVzcG9uc2Uuc3RhdHVzTWVzc2FnZSxcbiAgICBib2R5OiByZXNwb25zZS5ib2R5LFxuICB9KSxcblxuICAvLyBEZWZhdWx0IHN1Y2Nlc3MgbWV0aG9kIGZvciBhbGwgZW5kcG9pbnQgY2FsbHNcbiAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJvZHksXG59O1xuXG5jb25zdCBXZWFsdGhzaW1wbGVUcmFkZUVuZHBvaW50cyA9IHtcblxuICAvKlxuICAgKiBUaGUgTE9HSU4gZW5kcG9pbnQgaW50aWFsaXplcyBhIG5ldyBzZXNzaW9uIGZvciB0aGUgZ2l2ZW4gZW1haWwgYW5kXG4gICAqIHBhc3N3b3JkIHNldC4gSWYgdGhlIGxvZ2luIGlzIHN1Y2Nlc3NmdWwsIGFjY2VzcyBhbmQgcmVmcmVzaCB0b2tlbnNcbiAgICogYXJlIHJldHVybmVkIGluIHRoZSBoZWFkZXJzLiBUaGUgYWNjZXNzIHRva2VuIGlzIHRoZSBrZXkgZm9yIGludm9raW5nXG4gICAqIGFsbCBvdGhlciBlbmQgcG9pbnRzLlxuICAgKi9cbiAgTE9HSU46IHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hdXRoL2xvZ2luJyxcbiAgICBhdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gKHtcbiAgICAgIHRva2Vuczoge1xuICAgICAgICBhY2Nlc3M6IHJlc3BvbnNlLmhlYWRlcnNbJ3gtYWNjZXNzLXRva2VuJ10sXG4gICAgICAgIHJlZnJlc2g6IHJlc3BvbnNlLmhlYWRlcnNbJ3gtcmVmcmVzaC10b2tlbiddLFxuICAgICAgICBleHBpcmVzOiBwYXJzZUludChyZXNwb25zZS5oZWFkZXJzWyd4LWFjY2Vzcy10b2tlbi1leHBpcmVzJ10sIDEwKSxcbiAgICAgIH0sXG5cbiAgICAgIGFjY291bnRJbmZvOiByZXNwb25zZS5ib2R5LFxuICAgIH0pLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHZW5lcmF0ZXMgYSBuZXcgc2V0IG9mIGFjY2VzcyBhbmQgcmVmcmVzaCB0b2tlbnMuXG4gICAqL1xuICBSRUZSRVNIOiB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYXV0aC9yZWZyZXNoJyxcbiAgICBhdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gKHtcbiAgICAgIHRva2Vuczoge1xuICAgICAgICBhY2Nlc3M6IHJlc3BvbnNlLmhlYWRlcnNbJ3gtYWNjZXNzLXRva2VuJ10sXG4gICAgICAgIHJlZnJlc2g6IHJlc3BvbnNlLmhlYWRlcnNbJ3gtcmVmcmVzaC10b2tlbiddLFxuICAgICAgICBleHBpcmVzOiBwYXJzZUludChyZXNwb25zZS5oZWFkZXJzWyd4LWFjY2Vzcy10b2tlbi1leHBpcmVzJ10sIDEwKSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEdyYWJzIGFsbCBhY2NvdW50IGlkcyBpbiB0aGlzIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgQUNDT1VOVF9JRFM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvbGlzdCcsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmJvZHk7XG5cbiAgICAgIC8vIENvbGxlY3QgYWxsIGFjY291bnQgaWRzIHJlZ2lzdGVyZWQgdW5kZXIgdGhpcyBXZWFsdGhzaW1wbGUgVHJhZGUgQWNjb3VudFxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cy5tYXAoKGFjY291bnQpID0+IGFjY291bnQuaWQpO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBMSVNUX0FDQ09VTlQgZW5kcG9pbnQgcmV0cmlldmVzIGdlbmVyYWwgbWV0YWRhdGEgb2YgdGhlXG4gICAqIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LCBpbmNsdWRpbmcgYmFsYW5jZXMsIGFjY291bnQgaWQsIGFuZFxuICAgKiBtb3JlLlxuICAgKi9cbiAgTElTVF9BQ0NPVU5UOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2xpc3QnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJvZHkucmVzdWx0cyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogVGhlIE1FIGVuZHBvaW50IHJldHJpZXZlcyBzb21lIHN1cmZhY2UgaW5mb3JtYXRpb24gYWJvdXQgeW91IGxpa2VcbiAgICogeW91ciBuYW1lIGFuZCBlbWFpbC5cbiAgICovXG4gIE1FOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9tZScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBQRVJTT04gZW5kcG9pbnQgcmV0cmlldmVzIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IHlvdSB0aGF0XG4gICAqIHlvdSBwcm92aWRlZCBvbiBzaWdudXAsIGxpa2UgcmVzaWRlbnRpYWwgYW5kIG1haWxpbmcgYWRkcmVzc2VzLFxuICAgKiBlbXBsb3ltZW50LCBwaG9uZSBudW1iZXJzLCBhbmQgc28gb24uXG4gICAqL1xuICBQRVJTT046IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL3BlcnNvbicsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBISVNUT1JZX0FDQ09VTlQgZW5kcG9pbnQgcHJvdmlkZXMgaGlzdG9yaWNhbCBzbmFwc2hvdHMgb2YgdGhlXG4gICAqIFdlYWx0aHNpbXBsZSBhY2NvdW50IGZvciBhIHNwZWNpZmllZCB0aW1lZnJhbWUuXG4gICAqL1xuICBISVNUT1JZX0FDQ09VTlQ6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvaGlzdG9yeS97MH0/YWNjb3VudF9pZD17MX0nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2ludGVydmFsJyxcbiAgICAgIDE6ICdhY2NvdW50SWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQcm92aWRlcyB0aGUgbW9zdCByZWNlbnQgMjAgYWN0aXZpdGllcyAoZGVwb3NpdHMsIGRpdmlkZW5kcywgb3JkZXJzLCBldGMpIG9uIHRoZSBXZWFsdGhzaW1wbGVcbiAgICogVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIEFDVElWSVRJRVM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvYWN0aXZpdGllcz9saW1pdD17MH0mYWNjb3VudF9pZHM9ezF9JlsyXSZib29rbWFyaz17M30nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2xpbWl0JyxcbiAgICAgIDE6ICdhY2NvdW50SWRzJyxcbiAgICAgIDI6ICd0eXBlJyxcbiAgICAgIDM6ICdib29rbWFyaycsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEFsbCBkZXBvc2l0cyB1bmRlciB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICovXG4gIERFUE9TSVRTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9kZXBvc2l0cycsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYm9keS5yZXN1bHRzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBBbGwgbGlua2VkIGJhbmsgYWNjb3VudHMgdW5kZXIgdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqL1xuICBCQU5LX0FDQ09VTlRTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9iYW5rLWFjY291bnRzJyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ib2R5LnJlc3VsdHMsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEN1cnJlbnQgV2VhbHRoc2ltcGxlIFRyYWRlIFVTRC9DQUQgZXhjaGFuZ2UgcmF0ZXNcbiAgICovXG4gIEVYQ0hBTkdFX1JBVEVTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9mb3JleCcsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEdyYWJzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWN1cml0eSByZXNlbWJsZWQgYnkgdGhlIHRpY2tlci5cbiAgICovXG4gIFNFQ1VSSVRZOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9zZWN1cml0aWVzP3F1ZXJ5PXswfScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAndGlja2VyJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuYm9keTtcblxuICAgICAgaWYgKGRhdGEucmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZWN1cml0eSBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YS5yZXN1bHRzO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEZldGNoZXMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgYSBzZWN1cml0eSB1c2luZyBpdHMgdW5pcXVlXG4gICAqIHNlY3VyaXR5IGlkZW50aWZpZXIuIE1hcmtldCBxdW90ZSwgYmlkIGFuZCBhc2sgc2l6ZSwgYW5kIG90aGVyIGluZm9ybWF0aW9uXG4gICAqIGFyZSByZXR1cm5lZC5cbiAgICovXG4gIEVYVEVOU0lWRV9TRUNVUklUWV9ERVRBSUxTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9zZWN1cml0aWVzL3swfScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnaWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQcm92aWRlcyBhIGNvbXByZWhlbnNpdmUgbGlzdCBvbiBhbGwgc2VjdXJpdHkgZ3JvdXBzIGF2YWlsYWJsZVxuICAgKiBvbiB0aGUgcGxhdGZvcm0uXG4gICAqL1xuICBTRUNVUklUWV9HUk9VUFM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL3NlY3VyaXR5LWdyb3Vwcz9saW1pdD05OScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYm9keS5yZXN1bHRzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBSZXRyaWV2ZXMgYWxsIHNlY3VyaXRpZWlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc2VjdXJpdHkgZ3JvdXAgaWQuXG4gICAqL1xuICBTRUNVUklUWV9HUk9VUDoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vc2VjdXJpdHktZ3JvdXBzL3swfS9zZWN1cml0aWVzJyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdncm91cElkJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ib2R5LnJlc3VsdHMsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEZldGNoZXMgaGlzdG9yaWNhbCBxdW90ZXMgZm9yIGEgc2VjdXJpdHkgaW4gdGhlIHNwZWNpZmllZCBpbnRlcnZhbC5cbiAgICovXG4gIFFVT1RFU19ISVNUT1JZOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9zZWN1cml0aWVzL3swfS9oaXN0b3JpY2FsX3F1b3Rlcy97MX0/bWljPVhOQVMnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2lkJyxcbiAgICAgIDE6ICdpbnRlcnZhbCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIExpc3RzIGFsbCBwb3NpdGlvbnMgdW5kZXIgYSB0cmFkaW5nIGFjY291bnQuXG4gICAqL1xuICBQT1NJVElPTlM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvcG9zaXRpb25zP2FjY291bnRfaWQ9ezB9JyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdhY2NvdW50SWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJvZHkucmVzdWx0cyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogR3JhYiBhIHBhZ2Ugb2Ygb3JkZXJzICgyMCBvcmRlcnMpLlxuICAgKi9cbiAgT1JERVJTX0JZX1BBR0U6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycz9vZmZzZXQ9ezB9JmFjY291bnRfaWQ9ezF9JyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdvZmZzZXQnLFxuICAgICAgMTogJ2FjY291bnRJZCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmJvZHk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3RhbDogZGF0YS50b3RhbCxcbiAgICAgICAgb3JkZXJzOiBkYXRhLnJlc3VsdHMsXG4gICAgICB9O1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIENhbmNlbHMgYSBzcGVjaWZpYyBvcmRlciBieSBpdHMgaWQuXG4gICAqL1xuICBDQU5DRUxfT1JERVI6IHtcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycy97MH0nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ29yZGVySWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQbGFjZXMgYW4gb3JkZXIgZm9yIGEgc2VjdXJpdHkuXG4gICAqL1xuICBQTEFDRV9PUkRFUjoge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycycsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgV2VhbHRoc2ltcGxlVHJhZGVFbmRwb2ludHM7XG4iLCJjbGFzcyBBdXRoZW50aWNhdGlvbiB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBBdXRoZW50aWNhdGlvbiBjbGFzc3MgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgKiBwcm92aWRlZCB0b2tlbnMgYW5kIGh0dHBzIHdvcmtlci5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBodHRwc1dvcmtlclxuICAgKi9cbiAgY29uc3RydWN0b3IoaHR0cHNXb3JrZXIpIHtcbiAgICB0aGlzLndvcmtlciA9IGh0dHBzV29ya2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgZnVuY3Rpb24gdG8gcnVuIG9uIGEgY2VydGFpbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudCBUaGUgdHJpZ2dlciBmb3IgdGhlIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7Kn0gaGFuZGxlciBldmVudCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICovXG4gIG9uKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgdGhpcy53b3JrZXIub24oZXZlbnQsIGhhbmRsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGF1dGggbW9kdWxlIHdpdGggYW4gZXhpc3Rpbmcgc3RhdGUgb2YgdG9rZW5zLlxuICAgKiBUaGUgc3RhdGUgcHJvdmlkZWQgc2hvdWxkIGNvbnRhaW4gYWNjZXNzLCByZWZyZXNoLCBhbmQgZXhwaXJlcyBwcm9wZXJ0aWVzLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHN0YXRlIFByZS1leGlzdGluZyBhdXRoZW50aWNhdGlvbiBzdGF0ZVxuICAgKi9cbiAgdXNlKHN0YXRlKSB7XG4gICAgdGhpcy53b3JrZXIudG9rZW5zLnN0b3JlKHN0YXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTbmFwc2hvdCBvZiB0aGUgY3VycmVudCBhdXRoZW50aWNhdGlvbiB0b2tlbnMuXG4gICAqL1xuICB0b2tlbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY2VzczogdGhpcy53b3JrZXIudG9rZW5zLmFjY2VzcyxcbiAgICAgIHJlZnJlc2g6IHRoaXMud29ya2VyLnRva2Vucy5yZWZyZXNoLFxuICAgICAgZXhwaXJlczogdGhpcy53b3JrZXIudG9rZW5zLmV4cGlyZXMsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRlbXB0cyB0byBlc3RhYmxpc2ggYSBzZXNzaW9uIGZvciB0aGUgcHJvdmlkZWQgZW1haWwgYW5kIHBhc3N3b3JkLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGVtYWlsIGVtYWlsZWQgcmVnaXN0ZXJlZCBieSB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSBwYXNzd29yZCBUaGUgcGFzc3dvcmQgb2YgdGhlIGFjY291bnRcbiAgICovXG4gIGFzeW5jIGxvZ2luKGVtYWlsLCBwYXNzd29yZCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5sb2dpbihlbWFpbCwgcGFzc3dvcmQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIG5ldyBzZXQgb2YgYWNjZXNzIGFuZCByZWZyZXNoIHRva2Vucy5cbiAgICovXG4gIGFzeW5jIHJlZnJlc2goKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLnJlZnJlc2hBdXRoZW50aWNhdGlvbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1dGhlbnRpY2F0aW9uO1xuIiwiLy8gQ29uZGl0aW9uYWwgZmVhdHVyZXMgdGhhdCBhcmUgY3VycmVudGx5IHN1cHBvcnRlZCBieSB3c3RyYWRlLWFwaVxuY29uc3Qgc3VwcG9ydGVkRmVhdHVyZXMgPSBbJ2ltcGxpY2l0X3Rva2VuX3JlZnJlc2gnLCAnc2VjdXJpdGllc19jYWNoZSddO1xuY29uc3Qgc3VwcG9ydGVkID0gKGZlYXR1cmUpID0+IHtcbiAgaWYgKCFmZWF0dXJlPy5zdGFydHNXaXRoKCdub18nKSkge1xuICAgIHJldHVybiBzdXBwb3J0ZWRGZWF0dXJlcy5pbmNsdWRlcyhmZWF0dXJlKTtcbiAgfVxuXG4gIHJldHVybiBzdXBwb3J0ZWRGZWF0dXJlcy5pbmNsdWRlcyhmZWF0dXJlLnN1YnN0cmluZygnbm9fJy5sZW5ndGgpKTtcbn07XG5cbi8vIEhvbGRzIG9wdGlvbmFsIGZlYXR1cmVzIHRoYXQgaGF2ZSBiZWVuIGRpc2FibGVkLlxuY29uc3QgZGlzYWJsZWQgPSBbJ3NlY3VyaXRpZXNfY2FjaGUnXTtcbmV4cG9ydCBjb25zdCBjb25maWdFbmFibGVkID0gKGZlYXR1cmUpID0+ICFkaXNhYmxlZC5pbmNsdWRlcyhmZWF0dXJlKTtcblxuLyoqXG4gKiBFbmFibGUgb3IgZGlzYWJsZSBhbiBvcHRpb25hbCBmZWF0dXJlIHdpdGhpbiB3c3RyYWRlLWFwaS5cbiAqXG4gKiBFeGFtcGxlczpcbiAqIC0tLVxuICogY29uZmlnKCdpbXBsaWNpdF90b2tlbl9yZWZyZXNoJylcbiAqIEVuYWJsZXMgaW1wbGljaXQgcmVmcmVzaGluZyBvZiB0b2tlbnMuXG4gKlxuICogY29uZmlnKCdub19pbXBsaWNpdF90b2tlbl9yZWZyZXNoJylcbiAqIERpc2FibGVzIGltcGxpY2l0IHJlZnJlc2hpbmcgb2YgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7Kn0gZmVhdHVyZSBUaGUgc3RyaW5nIGlkZW50aWZpZXIgZm9yIHRoZSBmZWF0dXJlLCBzdGFydGluZyB3aXRoIFwibm9fXCIgaWZcbiAqICAgICAgICAgICAgICAgICAgICB5b3Ugd2lzaCB0byBkaXNhYmxlIGl0LlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb25maWcoZmVhdHVyZSkge1xuICBpZiAoIXN1cHBvcnRlZChmZWF0dXJlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJyR7ZmVhdHVyZX0nIGlzIG5vdCBzdXBwb3J0ZWQhYCk7XG4gIH1cblxuICBpZiAoZmVhdHVyZT8uc3RhcnRzV2l0aCgnbm9fJykpIHtcbiAgICBjb25zdCBjdXQgPSBmZWF0dXJlLnN1YnN0cmluZyhmZWF0dXJlLmluZGV4T2YoJ18nKSArIDEpO1xuXG4gICAgLy8gV2Ugd2lsbCBvbmx5IGFwcGVuZCB0aGlzIGlmIGl0IGlzbid0IGFscmVhZHkgaW4gdGhlcmUuXG4gICAgaWYgKGNvbmZpZ0VuYWJsZWQoY3V0KSkge1xuICAgICAgZGlzYWJsZWQucHVzaChjdXQpO1xuICAgIH1cblxuICAvLyBPbmx5IGRlbGV0ZSB0aGUgZmVhdHVyZSBpZiBpdCdzIGFscmVhZHkgZGlzYWJsZWQuXG4gIH0gZWxzZSBpZiAoIWNvbmZpZ0VuYWJsZWQoZmVhdHVyZSkpIHtcbiAgICBkaXNhYmxlZC5zcGxpY2UoZGlzYWJsZWQuaW5kZXhPZihmZWF0dXJlKSwgMSk7XG4gIH1cbn1cbiIsIi8vIEV4Y2hhbmdlcyBzdXBwb3J0ZWQgYnkgV2VhbHRoc2ltcGxlIFRyYWRlXG4vLyAnQ0MnIGlzIG5vdCBhbiBleGNoYW5nZTsgaXQgc3RhbmRzIGZvciBDcnlwdG8gY3VycmVuY3kgYW5kXG4vLyBpdCBhbGxvd3MgdXMgdG8gZGlzdGluZ3Vpc2ggaXQgZnJvbSBjb252ZW50aW9uYWwgc2VjdXJpdGllcy5cbmNvbnN0IGV4Y2hhbmdlcyA9IFsnTkFTREFRJywgJ05ZU0UnLCAnVFNYJywgJ1RTWC1WJywgJ0FFUVVJVEFTIE5FTyBFWENIQU5HRScsICdDQyddO1xuXG4vKipcbiAqIFRpY2tlciBwcm92aWRlcyBhIGxvZ2ljYWwgZW5jYXBzdWxhdGlvbiBmb3IgdGhlIGFsbG93ZWQgZm9ybXNcbiAqIG9mIGEgc2VjdXJpdHkgdGlja2VyIHdpdGhpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICpcbiAqIEl0IHByb3ZpZGVzIHZhbGlkYXRpb24gb2YgdGhlIGZvcm1hdCBvZiB0aGUgdGlja2VyLCBhbmQgdGhlXG4gKiB2YWx1ZSBvZiB0aGUgZXhjaGFuZ2UsIGlmIHByb3ZpZGVkLlxuICpcbiAqIFRpY2tlcnMgbWF5IGJlIHNwZWNpZmllZCBhcyB0d28gZGF0YSB0eXBlczpcbiAqXG4gKiAtIHN0cmluZzogVGhlIHRpY2tlciBtYXkgYmUgYSBzaW1wbGUgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIHN5bWJvbCwgb3IgYSBjb21iaW5hdGlvbiBvZlxuICogdGhlIHN5bWJvbCBhbmQgZXhjaGFuZ2Ugc2VwYXJhdGVkIGJ5IGEgY29sb24uXG4gKiAtIG9iamVjdDogVGhlIHRpY2tlciBtYXkgYmUgYW4gb2JqZWN0IHdpdGggc3ltYm9sLCBleGNoYW5nZSwgb3IgaWQgcHJvcGVydGllcy5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiBcIkFBUExcIlxuICogXCJVQkVSOk5ZU0VcIlxuICogeyBzeW1ib2w6IFwiQUFQTFwiIH1cbiAqIHsgc3ltYm9sOiBcIlVCRVJcIiwgZXhjaGFuZ2U6IFwiTllTRVwiIH1cbiAqIHsgaWQ6IFwic2VjLXMtNzZhNzE1NTI0MmU4NDc3ODgwY2JiNDMyNjkyMzVjYjZcIiB9XG4gKi9cbmNsYXNzIFRpY2tlciB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIHRoZSB0aWNrZXIgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBzZWN1cml0eSB0aWNrZXIgdmFsdWUsIHByb3ZpZGVkIGFzIGEgc3RyaW5nIG9yIGFuIG9iamVjdCB3aXRoIHN5bWJvbCxcbiAgICogZXhjaGFuZ2UsIG9yIGlkLlxuICAgKi9cbiAgY29uc3RydWN0b3IodmFsdWUpIHtcbiAgICB0aGlzLnN5bWJvbCA9IG51bGw7XG4gICAgdGhpcy5leGNoYW5nZSA9IG51bGw7XG4gICAgdGhpcy5pZCA9IG51bGw7XG4gICAgdGhpcy5jcnlwdG8gPSBmYWxzZTtcblxuICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIEVtcHR5IHRpY2tlcnMgYXJlIG5vdCBhbGxvd2VkXG4gICAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRW1wdHkgdGlja2VyJyk7XG4gICAgICB9XG5cbiAgICAgIFt0aGlzLnN5bWJvbCwgdGhpcy5leGNoYW5nZV0gPSB2YWx1ZS5zcGxpdCgnOicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBZb3UgbmVlZCBhdCBsZWFzdCBhIHN5bWJvbCBvciBpZCB0byBmb3JtIGEgdGlja2VyLlxuICAgICAgaWYgKCF2YWx1ZS5zeW1ib2wgJiYgIXZhbHVlLmlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0aWNrZXIgJyR7dmFsdWV9J2ApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN5bWJvbCA9IHZhbHVlLnN5bWJvbCB8fCBudWxsO1xuICAgICAgdGhpcy5leGNoYW5nZSA9IHZhbHVlLmV4Y2hhbmdlIHx8IG51bGw7XG4gICAgICB0aGlzLmlkID0gdmFsdWUuaWQgfHwgbnVsbDtcbiAgICB9XG5cbiAgICAvLyBXZWFsdGhzaW1wbGUgVHJhZGUgZG9lc24ndCBoYXZlIGEgc2hvcnQgZXhjaGFuZ2UgaWQgKCdORU8nKSBmb3JcbiAgICAvLyBBRVFVSVRBUyBORU8gRVhDSEFOR0UgZm9yIHNvbWUgcmVhc29uLi4uXG4gICAgLy8gV2UgaGF2ZSB0byBtYXAgaXQgdG8gdGhlIGZ1bGwgbmFtZSBmb3IgY29tcGFyaXNvbnMgdG8gd29yay5cbiAgICBpZiAodGhpcy5leGNoYW5nZSA9PT0gJ05FTycpIHtcbiAgICAgIHRoaXMuZXhjaGFuZ2UgPSAnQUVRVUlUQVMgTkVPIEVYQ0hBTkdFJztcbiAgICB9XG5cbiAgICAvLyBHdWFyYW50ZWUgdGhhdCB0aGUgZXhjaGFuZ2UgaXMgdmFsaWQgaWYgbm90IG51bGxcbiAgICBpZiAodGhpcy5leGNoYW5nZSAmJiAhZXhjaGFuZ2VzLmluY2x1ZGVzKHRoaXMuZXhjaGFuZ2UpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZXhjaGFuZ2UgJyR7dGhpcy5leGNoYW5nZX0nIWApO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgY3J5cHRvIHByb3BlcnR5IHRvIHRydWUgdG8gdHJlYXQgdGhpcyBzZWN1cml0eSBhcyBjcnlwdG9jdXJyZW5jeVxuICAgIGlmICh0aGlzLmV4Y2hhbmdlID09PSAnQ0MnIHx8IHRoaXMuaWQ/LnN0YXJ0c1dpdGgoJ3NlYy16JykpIHtcbiAgICAgIHRoaXMuY3J5cHRvID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVkdWNlcyB0aGUgdGlja2VyIG9iamVjdCB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAgICovXG4gIGZvcm1hdCgpIHtcbiAgICBpZiAodGhpcy5pZCkge1xuICAgICAgcmV0dXJuIHRoaXMuaWQ7XG4gICAgfVxuXG4gICAgLy8gV2UgbXVzdCByZXRyYW5zbGF0ZSB0aGUgZnVsbCBuYW1lIG9mIHRoZSBORU8gZXhjaGFuZ2UgYmFjayB0byBORU9cbiAgICBpZiAodGhpcy5leGNoYW5nZSA9PT0gJ0FFUVVJVEFTIE5FTyBFWENIQU5HRScpIHtcbiAgICAgIHJldHVybiBgJHt0aGlzLnN5bWJvbH06TkVPYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCR7dGhpcy5zeW1ib2x9JHt0aGlzLmV4Y2hhbmdlID8gYDoke3RoaXMuZXhjaGFuZ2V9YCA6ICcnfWA7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZXMgc3ltYm9sIG9yIGlkIHdpdGggYW5vdGhlciB0aWNrZXIuIFRoaXMgaXMgd2VhayBiZWNhdXNlXG4gICAqIGV4Y2hhbmdlIGlzIG5vdCBjb21wYXJlZCBoZXJlLCBhbGxvd2luZyBmb3IgZmFsc2UgcG9zaXRpdmVzXG4gICAqIG9mIHN5bWJvbHMgb24gZGlmZmVyZW50IGV4Y2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBvdGhlciBUaWNrZXIgdG8gY29tcGFyZSB1cyB3aXRoXG4gICAqL1xuICB3ZWFrRXF1YWxzKG90aGVyKSB7XG4gICAgaWYgKHRoaXMuaWQgJiYgdGhpcy5pZCA9PT0gb3RoZXIuaWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN5bWJvbCAmJiB0aGlzLnN5bWJvbCA9PT0gb3RoZXIuc3ltYm9sICYmIHRoaXMuY3J5cHRvID09PSBvdGhlci5jcnlwdG8pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaWNrZXI7XG4iLCJpbXBvcnQgQVBJQ2FjaGUgZnJvbSAnLi4vY29yZS9jYWNoZSc7XG5pbXBvcnQgVGlja2VyIGZyb20gJy4uL2NvcmUvdGlja2VyJztcblxuY29uc3QgY2FjaGUgPSBuZXcgQVBJQ2FjaGUoMTApO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgICAqIFF1ZXJ5IHRoZSBjYWNoZSBmb3IgdGhlIHNlY3VyaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBzZWN1cml0eVxuICAgICAqL1xuICBnZXQoc2VjdXJpdHkpIHtcbiAgICAvLyBNdXN0IGRpZ2VzdCB0aGUgc2VjdXJpdHkgaW50byB0aGUgc3RhbmRhcmQgZm9ybWF0XG4gICAgY29uc3QgcmVzdWx0ID0gY2FjaGUuZ2V0KG5ldyBUaWNrZXIoc2VjdXJpdHkpLmZvcm1hdCgpKTtcblxuICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcblxuICAvKipcbiAgICAgKiBSZW1lbWJlciB0aGUgc2VjdXJpdHkgZm9yIGEgZnV0dXJlIHF1aWNrIHJldHJpZXZhbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0ga2V5XG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqL1xuICBpbnNlcnQoa2V5LCB2YWx1ZSkge1xuICAgIGNhY2hlLmluc2VydChuZXcgVGlja2VyKGtleSkuZm9ybWF0KCksIHZhbHVlKTtcbiAgfSxcbn07XG4iLCIvKlxuICogQVBJQ2FjaGUgaXMgYW4gaW50ZXJuYWwgZWZmb3J0IHRvIG1pbmltaXplIHVubmVjZXNzYXJ5IEFQSSBjYWxscyB3aGVyZVxuICogcG9zc2libGUuIEEgc3BlY2lmaWMgdXNlY2FzZSB3aGVyZSBhIGNhY2hlIGlzIHVzZWZ1bCBpcyBmaWd1cmluZyBvdXQgdGhlXG4gKiBleGNoYW5nZSBhIHNlY3VyaXR5IGJlbG9uZ3MgdG8uIEEgY2FjaGUgd291bGQgYWxsb3cgdXMgdG8gbWVtb3JpemVcbiAqIHRoaXMgc3RhdGljIGRhdGEgZm9yIGEgcGVyaW9kIG9mIHRpbWUgdG8gYXZvaWQgdW5uZWNlc3NhcnkgQVBJIGNhbGxzLlxuICpcbiAqIFRoZSBjbGFzcyBlbmNhcHN1bGF0ZXMgdGhlIGZvbGxvd2luZyBjYWNoZSBiZWhhdmlvdXI6XG4gKiAtIEEgbWF4aW11bSBlbnRyaWVzIHByb3ZpZGVkIGFzIGEgY29uc3RydWN0b3IgYXJndW1lbnRcbiAqIC0gRmlyc3QgaW4sIEZpcnN0IG91dCAoRklGTykgbW9kZWxcbiAqXG4gKiBUaGUgaW50ZXJuZWwgZGF0YSBzdHJ1Y3R1cmUgaXMgYSBIYXNoU2V0LCBzbyBsb29rdXAgdGltZSBjb3N0IGlzIGZhaXJseVxuICogbWluaW1hbC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQVBJQ2FjaGUge1xuICBjb25zdHJ1Y3RvcihzaXplKSB7XG4gICAgdGhpcy5jYWNoZSA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICB9XG5cbiAgLyoqXG4gICAgICogU3RvcmUgdGhlIGtleS12YWx1ZSBwYWlyIGludG8gdGhpcyBjYWNoZS4gVGhlIG9sZGVzdCBlbnRyeSBpcyBldmljdGVkIGlmXG4gICAgICogd2UncmUgb3V0IG9mIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBrZXlcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICovXG4gIGluc2VydChrZXksIHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuY2FjaGUuc2l6ZSA+PSB0aGlzLnNpemUpIHtcbiAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKHRoaXMuY2FjaGUua2V5cygpLm5leHQoKS52YWx1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5jYWNoZS5zZXQoa2V5LCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICAgKiBSZXRyaWV2ZSB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IGtleVxuICAgICAqL1xuICBnZXQoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuZ2V0KGtleSk7XG4gIH1cbn1cbiIsImltcG9ydCBlbmRwb2ludHMgZnJvbSAnLi9hcGkvZW5kcG9pbnRzJztcbmltcG9ydCBUaWNrZXIgZnJvbSAnLi9jb3JlL3RpY2tlcic7XG5pbXBvcnQgeyBjb25maWdFbmFibGVkIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IGNhY2hlIGZyb20gJy4vb3B0aW9uYWwvc2VjdXJpdGllcy1jYWNoZSc7XG5cbmNsYXNzIERhdGEge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBEYXRhIHBiamVjdCBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIEh0dHBzIHdvcmtlciBzdGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBodHRwc1dvcmtlclxuICAgKi9cbiAgY29uc3RydWN0b3IoaHR0cHNXb3JrZXIpIHtcbiAgICB0aGlzLndvcmtlciA9IGh0dHBzV29ya2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgc25hcHNob3Qgb2YgdGhlIGN1cnJlbnQgVVNEL0NBRCBleGNoYW5nZSByYXRlcyBvbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlXG4gICAqIHBsYXRmb3JtLlxuICAgKi9cbiAgYXN5bmMgZXhjaGFuZ2VSYXRlcygpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuRVhDSEFOR0VfUkFURVMsIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmZvcm1hdGlvbiBhYm91dCBhIHNlY3VyaXR5IG9uIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgUGxhdGZvcm0uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gdXNlclRpY2tlciBUaGUgc2VjdXJpdHkgaWRcbiAgICogQHBhcmFtIHtib29sZWFufSBleHRlbnNpdmUgUHVsbHMgYSBtb3JlIGRldGFpbGVkIHJlcG9ydCBvZiB0aGUgc2VjdXJpdHkgdXNpbmcgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9zZWN1cml0aWVzL3tpZH0gQVBJXG4gICAqL1xuICBhc3luYyBnZXRTZWN1cml0eSh1c2VyVGlja2VyLCBleHRlbnNpdmUpIHtcbiAgICBsZXQgcmVzdWx0ID0gbnVsbDtcblxuICAgIC8vIFJ1biBzb21lIHZhbGlkYXRpb24gb24gdGhlIHRpY2tlclxuICAgIGNvbnN0IHRpY2tlciA9IG5ldyBUaWNrZXIodXNlclRpY2tlcik7XG5cbiAgICBpZiAoIWV4dGVuc2l2ZSAmJiBjb25maWdFbmFibGVkKCdzZWN1cml0aWVzX2NhY2hlJykpIHtcbiAgICAgIHJlc3VsdCA9IGNhY2hlLmdldCh0aWNrZXIpO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aWNrZXIuaWQpIHtcbiAgICAgIC8vIFdlIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgZXh0ZW5zaXZlIGRldGFpbHMgQVBJIHNpbmNlIHdlIGhhdmUgdGhlIHVuaXF1ZSBpZC5cbiAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkVYVEVOU0lWRV9TRUNVUklUWV9ERVRBSUxTLCB7XG4gICAgICAgIGlkOiB0aWNrZXIuaWQsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuU0VDVVJJVFksIHsgdGlja2VyOiB0aWNrZXIuc3ltYm9sIH0pO1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigoc2VjdXJpdHkpID0+IHNlY3VyaXR5LnN0b2NrLnN5bWJvbCA9PT0gdGlja2VyLnN5bWJvbCk7XG5cbiAgICAgIGlmICh0aWNrZXIuY3J5cHRvKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoKHNlY3VyaXR5KSA9PiBzZWN1cml0eS5zZWN1cml0eV90eXBlID09PSAnY3J5cHRvY3VycmVuY3knKTtcbiAgICAgIH0gZWxzZSBpZiAodGlja2VyLmV4Y2hhbmdlKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoKHNlY3VyaXR5KSA9PiBzZWN1cml0eS5zdG9jay5wcmltYXJ5X2V4Y2hhbmdlID09PSB0aWNrZXIuZXhjaGFuZ2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdWx0aXBsZSBzZWN1cml0aWVzIG1hdGNoZWQgcXVlcnkuJyk7XG4gICAgICB9IGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc2VjdXJpdGllcyBtYXRjaGVkIHF1ZXJ5LicpO1xuICAgICAgfVxuXG4gICAgICAvLyBDb252ZXJ0IHJlc3VsdCBmcm9tIGEgc2luZ2xldG9uIGxpc3QgdG8gaXRzIHJhdyBlbnRyeVxuICAgICAgW3Jlc3VsdF0gPSByZXN1bHQ7XG5cbiAgICAgIGlmIChleHRlbnNpdmUpIHtcbiAgICAgICAgLy8gVGhlIGNhbGxlciBoYXMgb3B0ZWQgdG8gcmVjZWl2ZSB0aGUgZXh0ZW5zaXZlIGRldGFpbHMgYWJvdXQgdGhlIHNlY3VyaXR5LlxuICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5FWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUywge1xuICAgICAgICAgIGlkOiByZXN1bHQuaWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb25maWdFbmFibGVkKCdzZWN1cml0aWVzX2NhY2hlJykgJiYgY2FjaGUuZ2V0KHRpY2tlcikgPT09IG51bGwpIHtcbiAgICAgIGNhY2hlLmluc2VydCh0aWNrZXIsIHJlc3VsdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaGVzIGEgbWFwcGluZyBvZiBhbGwgc2VjdXJpdHkgZ3JvdXBzIChhdmFpbGFibGUgb24gdGhlIFRyYWRlIHBsYXRmb3JtKSB0b1xuICAgKiB0aGVpciBncm91cCBpZHMuXG4gICAqL1xuICBhc3luYyBzZWN1cml0eUdyb3VwcygpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5TRUNVUklUWV9HUk9VUFMsIHt9KTtcblxuICAgIC8vIENvbnN0cnVjdCBhIG1hcCBvZiBjYXRlZ29yeSBuYW1lIHRvIGNhdGVnb3J5IGlkXG4gICAgcmV0dXJuIHJlc3VsdC5yZWR1Y2UoKG1hcCwgaXRlbSkgPT4gKHtcbiAgICAgIC4uLm1hcCwgW2l0ZW0ubmFtZV06IGl0ZW0uZXh0ZXJuYWxfc2VjdXJpdHlfZ3JvdXBfaWQsXG4gICAgfSksIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYWxsIHNlY3VyaXRpZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBncm91cCBuYW1lIG9yIGlkLlxuICAgKlxuICAgKiAtIElmIHlvdSBwcm92aWRlIHRoZSBncm91cCBuYW1lLCB3ZSB3aWxsIGF1dG9tYXRpY2FsbHkgZG8gYSBsb29rdXBcbiAgICogZnJvbSB0aGUgVHJhZGUgc2VydmVycyB0byBnZXQgaXRzIGlkZW50aWZpZXIuXG4gICAqXG4gICAqIC0gQWx0ZXJuYXRpdmVseSwgWW91IGNhbiBnZXQgYSBsaXN0IG9mIGFsbCBncm91cHMgKHdpdGggdGhlaXIgZ3JvdXAgaWRzKSBmcm9tXG4gICAqIGRhdGEuZ3JvdXBzKCkgYW5kIHByb3ZpZGUgdGhlIGdyb3VwIGlkZW50aWZpZXIgZGlyZWN0bHkuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZ3JvdXAgVGhlIHNlY3VyaXR5IGdyb3VwIG5hbWUgb3IgaWRlbnRpZmllclxuICAgKi9cbiAgYXN5bmMgZ2V0U2VjdXJpdHlHcm91cChncm91cCkge1xuICAgIGxldCBncm91cElkID0gZ3JvdXA7XG5cbiAgICAvLyBGZXRjaCB0aGUgZ3JvdXAgaWQgZnJvbSB0aGUgZ3JvdXAgbmFtZVxuICAgIGlmICghZ3JvdXA/LnN0YXJ0c1dpdGgoJ3NlY3VyaXR5LWdyb3VwJykpIHtcbiAgICAgIGNvbnN0IGdyb3VwcyA9IGF3YWl0IHRoaXMuc2VjdXJpdHlHcm91cHMoKTtcblxuICAgICAgaWYgKCEoZ3JvdXAgaW4gZ3JvdXBzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke2dyb3VwfScgaXMgbm90IGEgdmFsaWQgZ3JvdXAgbmFtZSFgKTtcbiAgICAgIH1cblxuICAgICAgLy8gcmVjb3JkIHRoZSBtYXRjaGVkIGdyb3VwIGlkLlxuICAgICAgZ3JvdXBJZCA9IGdyb3Vwc1tncm91cF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlNFQ1VSSVRZX0dST1VQLCB7IGdyb3VwSWQgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0YTtcbiIsImltcG9ydCB7IEhlYWRlcnMgfSBmcm9tICdub2RlLWZldGNoJztcblxuY29uc3QgY3VzdG9tSGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICogQXBwZW5kcyBhIGhlYWRlciBuYW1lLXZhbHVlIHBhaXIgdG8gYWxsIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG5hbWUgSGVhZGVyIGtleVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIEhlYWRlciB2YWx1ZVxuICAgKi9cbiAgYWRkOiAobmFtZSwgdmFsdWUpID0+IGN1c3RvbUhlYWRlcnMuYXBwZW5kKG5hbWUsIHZhbHVlKSxcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGN1c3RvbSBoZWFkZXIgZnJvbSBhbGwgcmVxdWVzdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbmFtZSBIZWFkZXIga2V5XG4gICAqL1xuICByZW1vdmU6IChuYW1lKSA9PiBjdXN0b21IZWFkZXJzLmRlbGV0ZShuYW1lKSxcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBjdXN0b20gaGVhZGVycy5cbiAgICovXG4gIGNsZWFyOiAoKSA9PiBbLi4uY3VzdG9tSGVhZGVyc10uZm9yRWFjaCgoaGVhZGVyKSA9PiBjdXN0b21IZWFkZXJzLmRlbGV0ZShoZWFkZXJbMF0pKSxcblxuICAvKipcbiAgICogUHJvZHVjZXMgYSBsaXN0IG9mIGN1c3RvbSBoZWFkZXJzLlxuICAgKi9cbiAgdmFsdWVzOiAoKSA9PiBbLi4uY3VzdG9tSGVhZGVyc10sXG59O1xuIiwicmVxdWlyZSgnc291cmNlLW1hcC1zdXBwb3J0JykuaW5zdGFsbCgpO1xuXG5jb25zdCBBdXRoZW50aWNhdGlvbiA9IHJlcXVpcmUoJy4vYXV0aCcpLmRlZmF1bHQ7XG5jb25zdCBoZWFkZXJzID0gcmVxdWlyZSgnLi9oZWFkZXJzJykuZGVmYXVsdDtcbmNvbnN0IEFjY291bnRzID0gcmVxdWlyZSgnLi9hY2NvdW50cycpLmRlZmF1bHQ7XG5jb25zdCBPcmRlcnMgPSByZXF1aXJlKCcuL29yZGVycycpLmRlZmF1bHQ7XG5jb25zdCBEYXRhID0gcmVxdWlyZSgnLi9kYXRhJykuZGVmYXVsdDtcbmNvbnN0IFF1b3RlcyA9IHJlcXVpcmUoJy4vcXVvdGVzJykuZGVmYXVsdDtcbmNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vY29uZmlnJykuZGVmYXVsdDtcblxuY29uc3QgSHR0cHNXb3JrZXIgPSByZXF1aXJlKCcuL25ldHdvcmsvaHR0cHMnKS5kZWZhdWx0O1xuXG4vKipcbiAqIEJ1aWxkcyBhIG5ldyBUcmFkZSBzZXNzaW9uIHdpdGggYW4gaW5kZXBlbmRlbnQgYXV0aGVudGljYXRpb25cbiAqIHN0YXRlLCBmYWNpbGl0YXRpbmcgY29uY3VycmVudCB1c2FnZSBvZiB0aGUgVHJhZGUgQVBJcy5cbiAqXG4gKiBUaGUgaGVhZGVycyBhbmQgY29uZmlnIG1vZHVsZSwgaG93ZXZlciwgaXMgbXV0dWFsbHkgc2hhcmVkIGJldHdlZW5cbiAqIGFsbCBzZXNzaW9ucy5cbiAqL1xuY29uc3QgU2Vzc2lvbiA9ICgpID0+IHtcbiAgY29uc3Qgd29ya2VyID0gbmV3IEh0dHBzV29ya2VyKCk7XG4gIGNvbnN0IGRhdGEgPSBuZXcgRGF0YSh3b3JrZXIpO1xuXG4gIHJldHVybiB7XG4gICAgYXV0aDogbmV3IEF1dGhlbnRpY2F0aW9uKHdvcmtlciksXG4gICAgaGVhZGVycyxcbiAgICBhY2NvdW50czogbmV3IEFjY291bnRzKHdvcmtlciksXG4gICAgb3JkZXJzOiBuZXcgT3JkZXJzKHdvcmtlciwgZGF0YSksXG4gICAgcXVvdGVzOiBuZXcgUXVvdGVzKHdvcmtlciwgZGF0YSksXG4gICAgZGF0YSxcbiAgICBjb25maWcsXG4gIH07XG59O1xuXG4vLyBXZSBuZWVkIGEgZGVmYXVsdCBzZXNzaW9uIGV4cG9ydGVkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSByZWFzb25zLFxuLy8gYnV0IGFsc28gYmVjYXVzZSBub3QgZXZlcnlvbmUgY2FyZXMgYWJvdXQgY29uY3VycmVudCB1c2FnZXMuXG5jb25zdCBkZWZhdWx0U2Vzc2lvbiA9IG5ldyBTZXNzaW9uKCk7XG4vLyBBbGxvdyB0aGUgY3JlYXRpb24gb2YgbXVsdGlwbGUgc2Vzc2lvbnMgdGhyb3VnaCBhIFNlc3Npb24oKSBjb25zdHJ1Y3RvclxuZGVmYXVsdFNlc3Npb24uU2Vzc2lvbiA9ICgpID0+IG5ldyBTZXNzaW9uKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVmYXVsdFNlc3Npb247XG4iLCIvKipcbiAqIENvbXB1dGVzIHRoZSBjdXJyZW50IHRpbWUgaW4gZXBvY2ggc2Vjb25kcy5cbiAqL1xuY29uc3QgZXBvY2hTZWNvbmRzID0gKCkgPT4gcGFyc2VJbnQoRGF0ZS5ub3coKSAvIDEwMDAsIDEwKTtcbmV4cG9ydCBkZWZhdWx0IGVwb2NoU2Vjb25kcztcbiIsImltcG9ydCBlcG9jaFNlY29uZHMgZnJvbSAnLi4vaGVscGVycy90aW1lJztcblxuLyoqXG4gKiBUaGlzIG1vZHVsZSB3aWxsIHByb3ZpZGUgYSB1bmlmb3JtIGludGVyZmFjZSBmb3Igc3RvcmFnZVxuICogYW5kIHJldHJpZXZhbCBvZiBhdXRoZW50aWNhdG9uIHRva2VucyB0aHJvdWdob3V0IHdzdHJhZGUtYXBpLlxuICovXG5jbGFzcyBUb2tlbnMge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBhdXRoZW50aWNhdGlvbiB0b2tlbnMgb2JqZWN0LlxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5hY2Nlc3MgPSBudWxsO1xuICAgIHRoaXMucmVmcmVzaCA9IG51bGw7XG4gICAgdGhpcy5leHBpcmVzID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBhdXRoZW50aWNhdGlvbiB0b2tlbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdG9rZW5zIFRoZSBuZXcgdG9rZW5zXG4gICAqL1xuICBzdG9yZSh0b2tlbnMpIHtcbiAgICB0aGlzLmFjY2VzcyA9IHRva2Vucy5hY2Nlc3M7XG4gICAgdGhpcy5yZWZyZXNoID0gdG9rZW5zLnJlZnJlc2g7XG4gICAgdGhpcy5leHBpcmVzID0gdG9rZW5zLmV4cGlyZXM7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHRva2VucyBoYXZlIGV4cGlyZWQuXG4gICAqL1xuICBleHBpcmVkKCkge1xuICAgIHJldHVybiB0aGlzLmV4cGlyZXMgJiYgZXBvY2hTZWNvbmRzKCkgPj0gdGhpcy5leHBpcmVzO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRva2VucztcbiIsImltcG9ydCBjbG91ZHNjcmFwZXIgZnJvbSAnY2xvdWRzY3JhcGVyJztcbmltcG9ydCBjdXN0b21IZWFkZXJzIGZyb20gJy4uL2hlYWRlcnMnO1xuaW1wb3J0IGVuZHBvaW50cyBmcm9tICcuLi9hcGkvZW5kcG9pbnRzJztcbmltcG9ydCB7IGNvbmZpZ0VuYWJsZWQgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IFRva2VucyBmcm9tICcuLi9jb3JlL3Rva2Vucyc7XG5cbmNvbnN0IFtIVFRQX09LLCBIVFRQX0NSRUFURURdID0gWzIwMCwgMjAxXTtcblxuLypcbiAqIENvbXBsZXRlIHRoZSBVUkwgYnkgZmlsbGluZyB0aGUgcGFyYW1ldGVyIHBsYWNlaG9sZGVycyB3aXRoIHRoZVxuICogZGF0YSBhcmd1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIGZpbmFsaXplUmVxdWVzdChlbmRwb2ludCwgZGF0YSkge1xuICAvLyBNYWtlIGEgY29weSBzbyB3ZSBkb24ndCBtb2RpZnkgdGhlIG9yaWdpbmFsIG9uZS5cbiAgY29uc3QgcGFyYW1zID0geyAuLi5kYXRhIH07XG4gIGxldCB7IHVybCB9ID0gZW5kcG9pbnQ7XG5cbiAgLy8gTm8gbmVlZCB0byBkbyBhbnl0aGluZyBpZiB0aGUgVVJMIGlzIHN0YXRpYyAobm8gcGFyYW1ldGVycylcbiAgaWYgKGVuZHBvaW50LnBhcmFtZXRlcnMpIHtcbiAgICAvLyBTd2FwIGFsbCB0aGUgcGFyYW1ldGVyIHBsYWNlaG9sZGVycyB3aXRoIHRoZSBhcmd1bWVudHMuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IE9iamVjdC5rZXlzKGVuZHBvaW50LnBhcmFtZXRlcnMpLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgcGFyYW1ldGVyTmFtZSA9IGVuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdO1xuXG4gICAgICAvLyB3ZSBoYXZlIHRvIGV4cGxpY2l0bHkgY2hlY2sgZm9yIG51bGwgYW5kIHVuZGVmaW5lZCBzaW5jZSBwYXJhbWV0ZXJcbiAgICAgIC8vIHZhbHVlcyBtaWdodCBiZSAwLlxuICAgICAgaWYgKHBhcmFtc1twYXJhbWV0ZXJOYW1lXSA9PT0gbnVsbCB8fCBwYXJhbXNbcGFyYW1ldGVyTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVSTCBwYXJhbWV0ZXIgJyR7cGFyYW1ldGVyTmFtZX0nIG1pc3NpbmchYCk7XG4gICAgICB9XG5cbiAgICAgIC8qXG4gICAgICAgICogUGFyYW1ldGVycyBzdXJyb3VuZGVkIHdpdGggY3VybHkgYnJhY2VzIChlLmcuLCB7Mn0pIGFyZSBzaW1wbGUgdmFsdWUgcmVwbGFjZW1lbnRzLFxuICAgICAgICAqIHdoaWxlIG9uZXMgc3Vycm91bmRlZCB3aXRoIHNxdWFyZSBicmFja2V0cyAoZS5nLiwgWzFdKSBhcmUgYXJyYXktdmFsdWUgcmVwbGFjZW1lbnRzLlxuICAgICAgICAqL1xuICAgICAgaWYgKHVybC5pbmRleE9mKGB7JHtpbmRleH19YCkgPj0gMCkge1xuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShgeyR7aW5kZXh9fWAsIHBhcmFtc1tlbmRwb2ludC5wYXJhbWV0ZXJzW2luZGV4XV0pO1xuICAgICAgfSBlbHNlIGlmICh1cmwuaW5kZXhPZihgWyR7aW5kZXh9XWApID49IDApIHtcbiAgICAgICAgLy8gZXh0cmFjdCBxdWVyeSBwYXJhbWV0ZXIgbmFtZSBhbmQgdGhlIGFycmF5IG9mIHZhbHVlc1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtTmFtZSA9IGVuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBwYXJhbXNbcXVlcnlQYXJhbU5hbWVdO1xuXG4gICAgICAgIC8vIENvbnN0cnVjdCB0aGUgcXVlcnlQYXJhbSB1c2luZyBldmVyeSB2YWx1ZSBpbiB0aGUgdmFsdWVzIGFycmF5LlxuICAgICAgICAvLyBIZXJlIGlzIGFuIGV4YW1wbGUgb2Ygd2hhdCBxdWVyeVBhcmFtIGVuZHMgdXAgYmVpbmc6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIHF1ZXJ5UGFyYW1OYW1lID0gJ3R5cGUnXG4gICAgICAgIC8vIHZhbHVlcyA9IFsnYnV5JywgJ3NlbGwnLCAnZGl2aWRlbmQnXVxuICAgICAgICAvLyBxdWVyeVBhcmFtID0gJ3R5cGU9YnV5JnR5cGU9c2VsbCZ0eXBlPWRpdmlkZW5kJ1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtID0gdmFsdWVzLm1hcCgodmFsdWUpID0+IGAke3F1ZXJ5UGFyYW1OYW1lfT0ke3ZhbHVlfWApLmpvaW4oJyYnKTtcblxuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShgWyR7aW5kZXh9XWAsIHF1ZXJ5UGFyYW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNYWxmb3JtZWQgVVJMISBUaGlzIGlzIGFuIGludGVybmFsIGVycm9yOiByYWlzZSBhbiBpc3N1ZSEnKTtcbiAgICAgIH1cblxuICAgICAgLy8gTXVzdCByZW1vdmUgdGhpcyBrZXkgZnJvbSB0aGUgcGF5bG9hZCBhcyBpdCBoYXMgYmVlbiBjb25zdW1lZCBieSB0aGUgVVJMXG4gICAgICBkZWxldGUgcGFyYW1zW2VuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdXTtcbiAgICB9XG4gIH1cblxuICAvLyBObyBwYXlsb2FkIGF0dGFjaGVkIHRvIEdFVC9ERUxFVEUgcmVxdWVzdHNcbiAgaWYgKFsnR0VUJywgJ0hFQUQnXS5pbmNsdWRlcyhlbmRwb2ludC5tZXRob2QpKSB7XG4gICAgcmV0dXJuIHsgdXJsLCBwYXlsb2FkOiB1bmRlZmluZWQgfTtcbiAgfVxuXG4gIHJldHVybiB7IHVybCwgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkocGFyYW1zKSB9O1xufVxuXG5jbGFzcyBIdHRwc1dvcmtlciB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgSHR0cHNXb3JrZXIgd2l0aCBpdHMgb3duIGF1dGhlbnRpY2F0aW9uIHN0YXRlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50b2tlbnMgPSBuZXcgVG9rZW5zKCk7XG5cbiAgICAvLyBhdXRoZW50aWNhdGlvbiBldmVudHNcbiAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgIG90cDogbnVsbCxcbiAgICAgIHJlZnJlc2g6IG51bGwsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHRvIHJ1biBvbiBhIGNlcnRhaW4gZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnQgVGhlIHRyaWdnZXIgZm9yIHRoZSBmdW5jdGlvblxuICAgKiBAcGFyYW0geyp9IGhhbmRsZXIgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAqL1xuICBvbihldmVudCwgaGFuZGxlcikge1xuICAgIGlmICghKGV2ZW50IGluIHRoaXMuZXZlbnRzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBhdXRoZW50aWNhdGlvbiBldmVudCAnJHtldmVudH0nIWApO1xuICAgIH1cblxuICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IGhhbmRsZXI7XG4gIH1cblxuICAvKlxuICAgKiBJbXBsZW1lbnRzIHRoZSBuZXR3b3JrIGxldmVsIHByb3RvY29sIGZvciB0YWxraW5nIHRvIHRoZVxuICAgKiBXZWFsdGhzaW1wbGUgVHJhZGUgSFRUUFMgQVBJLlxuICAgKi9cbiAgYXN5bmMgdGFsayhlbmRwb2ludCwgZGF0YSkge1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfTtcblxuICAgIGlmIChlbmRwb2ludC5hdXRoZW50aWNhdGVkKSB7XG4gICAgICAvLyBubyBhY2Nlc3MgdG9rZW4gbWVhbnMgd2Ugd2lsbCBwcmVtYXR1cmVseSBmYWlsIHRoZSByZXF1ZXN0IGJlY2F1c2VcbiAgICAgIC8vIHRoaXMgaXMgYSBwcml2aWxlZ2VkIGVuZHBvaW50LlxuICAgICAgaWYgKCF0aGlzLnRva2Vucy5hY2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdXRoZW50aWNhdGlvbiByZXF1aXJlZCBmb3IgJyR7ZW5kcG9pbnQudXJsfSdgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbmZpZ0VuYWJsZWQoJ2ltcGxpY2l0X3Rva2VuX3JlZnJlc2gnKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmltcGxpY2l0VG9rZW5SZWZyZXNoKCk7XG4gICAgICB9XG5cbiAgICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IHRoaXMudG9rZW5zLmFjY2VzcztcbiAgICB9XG5cbiAgICAvLyBBcHBseSBhbGwgY3VzdG9tIGhlYWRlcnNcbiAgICBjdXN0b21IZWFkZXJzLnZhbHVlcygpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4geyBoZWFkZXJzW2tleV0gPSB2YWx1ZTsgfSk7XG5cbiAgICAvLyBmaWxsIHBhdGggYW5kIHF1ZXJ5IHBhcmFtZXRlcnMgaW4gdGhlIFVSTFxuICAgIGNvbnN0IHsgdXJsLCBwYXlsb2FkIH0gPSBmaW5hbGl6ZVJlcXVlc3QoZW5kcG9pbnQsIGRhdGEpO1xuXG4gICAgLy8gV2VhbHRoc2ltcGxlIGVuZHBvaW50cyBhcmUgcHJvdGVjdGVkIGJ5IENsb3VkZmxhcmUuXG4gICAgLy8gVGhlIGNsb3Vkc2NyYXBlciBsaWJyYXJ5IHRha2VzIGNhcmUgb2YgdGhlIENsb3VkZmxhcmUgY2hhbGxlbmdlc1xuICAgIC8vIHdoaWxlIGFsc28gZXhlY3V0aW5nIG91ciByZXF1ZXN0XG4gICAgbGV0IHJlc3BvbnNlID0gbnVsbDtcbiAgICBhd2FpdCBjbG91ZHNjcmFwZXIoe1xuICAgICAgdXJsLFxuICAgICAgYm9keTogcGF5bG9hZCxcbiAgICAgIG1ldGhvZDogZW5kcG9pbnQubWV0aG9kLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGNhbGxiYWNrOiAodW51c2VkLCByZXMpID0+IHtcbiAgICAgICAgLy8gU2F2ZSB0aGUgSFRUUCByZXNwb25zZVxuICAgICAgICByZXNwb25zZSA9IHJlcztcbiAgICAgIH0sXG4gICAgfSkuY2F0Y2goKCkgPT4geyB9KTtcblxuICAgIHRyeSB7XG4gICAgICByZXNwb25zZS5ib2R5ID0gSlNPTi5wYXJzZShyZXNwb25zZS5ib2R5KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gaXQncyBub3QgSlNPTiwgYnV0IHRoYXQncyBmaW5lLiBXZSBkb24ndCBkbyBhbnl0aGluZ1xuICAgICAgLy8gZm9yIG5vdy5cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cblxuICAvKlxuICAgKiBGdWxmaWxsIHRoZSBlbmRwb2ludCByZXF1ZXN0IGdpdmVuIHRoZSBlbmRwb2ludCBjb25maWd1cmF0aW9uLCBvcHRpb25hbFxuICAgKiBkYXRhLlxuICAgKi9cbiAgYXN5bmMgaGFuZGxlUmVxdWVzdChlbmRwb2ludCwgZGF0YSkge1xuICAgIC8vIFN1Ym1pdCB0aGUgSFRUUCByZXF1ZXN0IHRvIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgU2VydmVyc1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy50YWxrKGVuZHBvaW50LCBkYXRhKTtcblxuICAgIGlmIChbSFRUUF9PSywgSFRUUF9DUkVBVEVEXS5pbmNsdWRlcyhyZXNwb25zZS5zdGF0dXNDb2RlKSkge1xuICAgICAgcmV0dXJuIGVuZHBvaW50Lm9uU3VjY2VzcyhyZXNwb25zZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVuZHBvaW50Lm9uRmFpbHVyZShyZXNwb25zZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGVtcHRzIHRvIGVzdGFibGlzaCBhIHNlc3Npb24gZm9yIHRoZSBwcm92aWRlZCBlbWFpbCBhbmQgcGFzc3dvcmQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZW1haWwgZW1haWxlZCByZWdpc3RlcmVkIGJ5IHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHBhc3N3b3JkIFRoZSBwYXNzd29yZCBvZiB0aGUgYWNjb3VudFxuICAgKi9cbiAgYXN5bmMgbG9naW4oZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgbGV0IHJlc3BvbnNlID0gbnVsbDtcblxuICAgIC8qXG4gICAgICogSWYgd2UgYXJlIGdpdmVuIGEgZnVuY3Rpb24gZm9yIG90cCwgdGhlbiB3ZSBtdXN0IGZhaWwgYSBsb2cgaW4gdG9cbiAgICAgKiB0cmlnZ2VyIGFuIE9UUCBldmVudCB3aXRoIFdlYWx0aHNpbXBsZSBUcmFkZS4gVGhpcyB3aWxsIGFsbG93IHRoZSB1c2VyXG4gICAgICogb3RwIHRodW5rIHRvIHJldHJpZXZlIHRoZSBjb2RlLlxuICAgICAqXG4gICAgICogSWYgYSBsaXRlcmFsIHZhbHVlIGlzIHByb3ZpZGVkIGZvciBvdHAsIGl0IG1lYW5zIHRoZSB1c2VyIGhhcyBtYW51YWxseVxuICAgICAqIHByb3ZpZGVkIHVzIHdpdGggdGhlIG90cCBjb2RlLiBXZSBjYW4gc2tpcCB0aGlzIGxvZ2luIGF0dGVtcHQuXG4gICAgICovXG4gICAgaWYgKHR5cGVvZiAodGhpcy5ldmVudHMub3RwKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5MT0dJTiwge1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICB9KS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIH1cblxuICAgIC8vIFRyeSB0byBsb2cgaW4gZm9yIHJlYWwgdGhpcyB0aW1lLlxuICAgIHRyeSB7XG4gICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuTE9HSU4sIHtcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHBhc3N3b3JkLFxuICAgICAgICBvdHA6IHR5cGVvZiAodGhpcy5ldmVudHMub3RwKSA9PT0gJ2Z1bmN0aW9uJyA/IGF3YWl0IHRoaXMuZXZlbnRzLm90cCgpIDogdGhpcy5ldmVudHMub3RwLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIHdlIG1pZ2h0IGhhdmUgZmFpbGVkIGJlY2F1c2UgT1RQIHdhcyBub3QgcHJvdmlkZWRcbiAgICAgIGlmICghdGhpcy5ldmVudHMub3RwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignT1RQIG5vdCBwcm92aWRlZCEnKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2VlbXMgdG8gYmUgaW5jb3JyZWN0IGNyZWRlbnRpYWxzIG9yIE9UUC5cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIC8vIENhcHR1cmUgdGhlIHRva2VucyBmb3IgbGF0ZXIgdXNhZ2UuXG4gICAgdGhpcy50b2tlbnMuc3RvcmUocmVzcG9uc2UudG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnRhaW4gYSBuZXcgc2V0IG9mIGF1dGhlbnRpY2F0aW9uIHRva2VucyB1c2luZyB0aGVcbiAgICogZXhpc3RpbmcgcmVmcmVzaCB0b2tlbi5cbiAgICpcbiAgICogSWYgd2UgYXJlIGdpdmVuIGEgZnVuY3Rpb24gZm9yIHJlZnJlc2gsIGNhbGwgdGhhdCBmdW5jdGlvblxuICAgKiB3aXRoIHRoZSByZWZyZXNoZWQgdG9rZW5zLlxuICAgKi9cbiAgYXN5bmMgcmVmcmVzaEF1dGhlbnRpY2F0aW9uKCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5SRUZSRVNILCB7XG4gICAgICByZWZyZXNoX3Rva2VuOiB0aGlzLnRva2Vucy5yZWZyZXNoLFxuICAgIH0pO1xuXG4gICAgdGhpcy50b2tlbnMuc3RvcmUocmVzcG9uc2UudG9rZW5zKTtcbiAgICB0cnkge1xuICAgICAgLy8gYW5kIGNhbGwgdGhlIGhhbmRsZXIgZm9yIHRoaXMgZXZlbnQgaWYgd2UgaGF2ZSBvbmVcbiAgICAgIGlmICh0eXBlb2YgKHRoaXMuZXZlbnRzLnJlZnJlc2gpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZXZlbnRzLnJlZnJlc2godGhpcy50b2tlbnMpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBUaGUgaGFuZGxlciBoYWQgYW4gaXNzdWVcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgaW4gYXV0aC5vbigpIGhhbmRsZXIgZm9yICdyZWZyZXNoJzogJHtlcnJvcn1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGV4aXN0aW5nIHNldCBvZiB0b2tlbnMgaGF2ZSBleHBpcmVkLCBhdXRvbWF0aWNhbGx5XG4gICAqIHRyaWdnZXJpbmcgYSByZWZyZXNoIGlmIHRoZXkgaGF2ZSBleHBpcmVkLlxuICAgKi9cbiAgYXN5bmMgaW1wbGljaXRUb2tlblJlZnJlc2goKSB7XG4gICAgaWYgKHRoaXMudG9rZW5zLmV4cGlyZWQoKSkge1xuICAgICAgaWYgKHRoaXMudG9rZW5zLnJlZnJlc2gpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBMZXQncyBpbXBsaWNpdGx5IHJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiB1c2luZyB0aGUgcmVmcmVzaCB0b2tlbi5cbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hBdXRoZW50aWNhdGlvbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIFRoZSByZWZyZXNoIHRva2VuIGlzIG5vdCB2YWxpZC5cbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byByZWZyZXNoIGV4cGlyZWQgdG9rZW46ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFdlIGFyZSBmb3JjZWQgdG8gcmVqZWN0IGFzIG91ciBhY2Nlc3MgdG9rZW4gaGFzIGV4cGlyZWQgYW5kIHdlXG4gICAgICAgIC8vIGRvIG5vdCBoYXZlIGEgcmVmcmVzaCB0b2tlbi5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY2Nlc3MgdG9rZW4gZXhwaXJlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBIdHRwc1dvcmtlcjtcbiIsImltcG9ydCBlbmRwb2ludHMgZnJvbSAnLi9hcGkvZW5kcG9pbnRzJztcbmltcG9ydCBUaWNrZXIgZnJvbSAnLi9jb3JlL3RpY2tlcic7XG5cbi8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiBvcmRlcnMgcmV0cmlldmVkIGJ5IHRoZSAvb3JkZXJzIEFQSS5cbmNvbnN0IE9SREVSU19QRVJfUEFHRSA9IDIwO1xuXG5jb25zdCBpc0NhbmFkaWFuU2VjdXJpdHkgPSAoZXhjaGFuZ2UpID0+IFsnVFNYJywgJ1RTWC1WJ10uaW5jbHVkZXMoZXhjaGFuZ2UpO1xuXG4vKlxuICogUmV0cmlldmUgZmlsdGVyZWQgb3JkZXJzIGJ5IHRpY2tlciBhbmQgc3RhdHVzLlxuICovXG5mdW5jdGlvbiBmaWx0ZXJlZE9yZGVycyhsaXN0LCB0aWNrZXIsIHN0YXR1cykge1xuICBjb25zdCBvcmRlckZpbHRlciA9IChvcmRlcikgPT4ge1xuICAgIGlmICh0aWNrZXIpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBUaWNrZXIoeyBzeW1ib2w6IG9yZGVyLnN5bWJvbCwgaWQ6IG9yZGVyLnNlY3VyaXR5X2lkIH0pO1xuICAgICAgLy8gb3JkZXIgb2JqZWN0cyBkb24ndCBpbmNsdWRlIGV4Y2hhbmdlcywgc28gd2UgYXJlIHVuYWJsZSB0byBtYWtlXG4gICAgICAvLyBhIHN0cm9uZyBjb21wYXJpc29uIHdpdGhvdXQgcmVxdWlyaW5nIGEgbGluZWFyIGluY3JlYXNlIG9mXG4gICAgICAvLyBlbmRwb2ludCBjYWxscyAod2hpY2ggaXMgbm90IHJlYXNvbmFibGUpLlxuICAgICAgLy9cbiAgICAgIC8vIFRoZSB1c2VyIHNob3VsZCBwcm92aWRlIHRoZSBzZWN1cml0eSBpZCBmb3IgYSBzdHJvbmcgY29tcGFyaXNvbiBoZXJlLlxuICAgICAgaWYgKCFuZXcgVGlja2VyKHRpY2tlcikud2Vha0VxdWFscyh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3JkZXIuc3RhdHVzID09PSBzdGF0dXM7XG4gIH07XG5cbiAgLy8gQXBwbHkgZmlsdGVyIHRvIHRoZSByZXN1bHRcbiAgY29uc3QgZmlsdGVyZWQgPSBsaXN0Lm9yZGVycy5maWx0ZXIob3JkZXJGaWx0ZXIpO1xuXG4gIHJldHVybiB7XG4gICAgb3JkZXJzOiBmaWx0ZXJlZCxcbiAgICB0b3RhbDogZmlsdGVyZWQubGVuZ3RoLFxuICB9O1xufVxuXG5jbGFzcyBPcmRlcnMge1xuICAvKipcbiAgICogQ3JlYXRldyBhIG5ldyBPcmRlckhpc3Rvcnkgb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCBhbiBIdHRwcyB3b3JrZXIgc3RhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gaHR0cHNXb3JrZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKGh0dHBzV29ya2VyLCBkYXRhKSB7XG4gICAgdGhpcy53b3JrZXIgPSBodHRwc1dvcmtlcjtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbGxlY3RzIG9yZGVycyAoZmlsbGVkLCBwZW5kaW5nLCBjYW5jZWxsZWQpIGZvciB0aGUgcHJvdmlkZWQgcGFnZSBhbmRcbiAgICogYWNjb3VudCBpZC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqIEBwYXJhbSB7Kn0gcGFnZU51bSBUaGUgb3JkZXJzIHBhZ2UgaW5kZXggdG8gc2VlayB0b1xuICAgKi9cbiAgYXN5bmMgcGFnZShhY2NvdW50SWQsIHBhZ2VOdW0pIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuT1JERVJTX0JZX1BBR0UsIHtcbiAgICAgIG9mZnNldDogKHBhZ2VOdW0gLSAxKSAqIE9SREVSU19QRVJfUEFHRSxcbiAgICAgIGFjY291bnRJZCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsZWN0cyBhbGwgb3JkZXJzIChmaWxsZWQsIHBlbmRpbmcsIGNhbmNlbGxlZCkgZm9yIHRoZSBzcGVjaWZpYyBhY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICovXG4gIGFzeW5jIGFsbChhY2NvdW50SWQpIHtcbiAgICAvLyBXZSBzdGFydCBieSBjYXB0dXJpbmcgdGhlIGZpcnN0IHBhZ2Ugb2Ygb3JkZXJzIGluIG9yZGVyIHRvXG4gICAgLy8gZGV0ZXJtaW5lIHRoZSBudW1iZXIgb2YgcGFnZXMgYXZhaWxhYmxlXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucGFnZShhY2NvdW50SWQsIDEpO1xuICAgIGNvbnN0IHBhZ2VzID0gTWF0aC5jZWlsKGRhdGEudG90YWwgLyBPUkRFUlNfUEVSX1BBR0UpO1xuXG4gICAgaWYgKHBhZ2VzID4gMSkge1xuICAgICAgY29uc3QgdGFza3MgPSBbXTtcblxuICAgICAgLy8gQnVpbGQgdGhlIHRhc2sgcXVldWUgdGhhdCB3aWxsIHJldHJpZXZlIHRoZSByZW1haW5pbmcgcGFnZXMgb2Ygb3JkZXJzXG4gICAgICBmb3IgKGxldCBwYWdlTnVtID0gMjsgcGFnZU51bSA8PSBwYWdlczsgcGFnZU51bSsrKSB7XG4gICAgICAgIHRhc2tzLnB1c2godGhpcy5wYWdlKGFjY291bnRJZCwgcGFnZU51bSkudGhlbigocmVzdWx0KSA9PiByZXN1bHQub3JkZXJzKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE91dC1vZi1vcmRlciBpbnZvY2F0aW9uIGlzIGRlc2lyZWQuIFdoYXQgbWF0dGVycyBpcyB0aGF0IFByb21pc2UuYWxsIHdpbGxcbiAgICAgIC8vIGd1YXJhbnRlZSB0aGF0IHRoZSBkYXRhIG9yZGVyIGlzIHByZXNlcnZlZC5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UuYWxsKHRhc2tzKTtcbiAgICAgIHJlc3VsdC5mb3JFYWNoKChsaXN0KSA9PiBkYXRhLm9yZGVycy5wdXNoKC4uLmxpc3QpKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSB0b3RhbCBhdHRyaWJ1dGUgdG8gcmVmbGVjdCB0aGUgbmV3IHNpemVcbiAgICAgIGRhdGEudG90YWwgPSBkYXRhLm9yZGVycy5sZW5ndGg7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHBlbmRpbmcgb3JkZXJzIGZvciB0aGUgc3BlY2lmaWVkIHNlY3VyaXR5IGluIHRoZSBhY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgKG9wdGlvbmFsKSBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqL1xuICBhc3luYyBwZW5kaW5nKGFjY291bnRJZCwgdGlja2VyKSB7XG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgdGhpcy5hbGwoYWNjb3VudElkKTtcbiAgICByZXR1cm4gZmlsdGVyZWRPcmRlcnMob3JkZXJzLCB0aWNrZXIsICdzdWJtaXR0ZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgZmlsbGVkIG9yZGVycyBmb3IgdGhlIHNwZWNpZmllZCBzZWN1cml0eSBpbiB0aGUgYWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIChvcHRpb25hbCkgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKi9cbiAgYXN5bmMgZmlsbGVkKGFjY291bnRJZCwgdGlja2VyKSB7XG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgdGhpcy5hbGwoYWNjb3VudElkKTtcbiAgICByZXR1cm4gZmlsdGVyZWRPcmRlcnMob3JkZXJzLCB0aWNrZXIsICdwb3N0ZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgY2FuY2VsbGVkIG9yZGVycyBmb3IgdGhlIHNwZWNpZmllZCBzZWN1cml0eSBpbiB0aGUgYWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIChvcHRpb25hbCkgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKi9cbiAgYXN5bmMgY2FuY2VsbGVkKGFjY291bnRJZCwgdGlja2VyKSB7XG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgdGhpcy5hbGwoYWNjb3VudElkKTtcbiAgICByZXR1cm4gZmlsdGVyZWRPcmRlcnMob3JkZXJzLCB0aWNrZXIsICdjYW5jZWxsZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIHRoZSBwZW5kaW5nIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgb3JkZXIgaWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb3JkZXJJZCBUaGUgcGVuZGluZyBvcmRlciB0byBjYW5jZWxcbiAgICovXG4gIGFzeW5jIGNhbmNlbChvcmRlcklkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9yZGVyOiBvcmRlcklkLFxuICAgICAgcmVzcG9uc2U6IGF3YWl0IHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkNBTkNFTF9PUkRFUiwgeyBvcmRlcklkIH0pLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VscyBhbGwgcGVuZGluZyBvcmRlcnMgdW5kZXIgdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBBY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICovXG4gIGFzeW5jIGNhbmNlbFBlbmRpbmcoYWNjb3VudElkKSB7XG4gICAgY29uc3QgcGVuZGluZyA9IGF3YWl0IHRoaXMucGVuZGluZyhhY2NvdW50SWQpO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChwZW5kaW5nLm9yZGVycy5tYXAoYXN5bmMgKG9yZGVyKSA9PiB0aGlzLmNhbmNlbChvcmRlci5vcmRlcl9pZCkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJrZXQgYnV5IGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gcHVyY2hhc2VcbiAgICovXG4gIGFzeW5jIG1hcmtldEJ1eShhY2NvdW50SWQsIHRpY2tlciwgcXVhbnRpdHkpIHtcbiAgICBjb25zdCBkZXRhaWxzID0gYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlciwgdHJ1ZSk7XG5cbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiBkZXRhaWxzLmlkLFxuICAgICAgbGltaXRfcHJpY2U6ICEobmV3IFRpY2tlcih0aWNrZXIpLmNyeXB0bykgPyBkZXRhaWxzLnF1b3RlLmFtb3VudCA6IHVuZGVmaW5lZCxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ2J1eV9xdWFudGl0eScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ21hcmtldCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGcmFjdGlvbmFsIGJ1eSBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gbWFya2V0VmFsdWUgVGhlIHByaWNlIG9mIHNlY3VyaXRpZXMgdG8gcHVyY2hhc2VcbiAgICovXG4gIGFzeW5jIGZyYWN0aW9uYWxCdXkoYWNjb3VudElkLCB0aWNrZXIsIG1hcmtldFZhbHVlKSB7XG4gICAgY29uc3QgZGV0YWlscyA9IGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIsIHRydWUpO1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IChhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyKSkuaWQsXG4gICAgICBtYXJrZXRfdmFsdWU6IG1hcmtldFZhbHVlLFxuICAgICAgb3JkZXJfdHlwZTogJ2J1eV92YWx1ZScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ2ZyYWN0aW9uYWwnLFxuICAgICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTGltaXQgYnV5IGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBsaW1pdCBUaGUgbWF4aW11bSBwcmljZSB0byBwdXJjaGFzZSB0aGUgc2VjdXJpdHkgYXRcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gcHVyY2hhc2VcbiAgICovXG4gIGFzeW5jIGxpbWl0QnV5KGFjY291bnRJZCwgdGlja2VyLCBsaW1pdCwgcXVhbnRpdHkpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiAoYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlcikpLmlkLFxuICAgICAgbGltaXRfcHJpY2U6IGxpbWl0LFxuICAgICAgcXVhbnRpdHksXG4gICAgICBvcmRlcl90eXBlOiAnYnV5X3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnbGltaXQnLFxuICAgICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBsaW1pdCBidXkgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IHN0b3AgVGhlIHByaWNlIGF0IHdoaWNoIHRoZSBvcmRlciBjb252ZXJ0cyB0byBhIGxpbWl0IG9yZGVyXG4gICAqIEBwYXJhbSB7Kn0gbGltaXQgVGhlIG1heGltdW0gcHJpY2UgdG8gcHVyY2hhc2UgdGhlIHNlY3VyaXR5IGF0XG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHB1cmNoYXNlXG4gICAqL1xuICBhc3luYyBzdG9wTGltaXRCdXkoYWNjb3VudElkLCB0aWNrZXIsIHN0b3AsIGxpbWl0LCBxdWFudGl0eSkge1xuICAgIGNvbnN0IHNlY3VyaXR5ID0gYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlcik7XG5cbiAgICAvLyBUaGUgV2VhbHRoc2ltcGxlIFRyYWRlIGJhY2tlbmQgZG9lc24ndCBjaGVjayBmb3IgdGhpcywgZXZlbiB0aG91Z2ggdGhlIGFwcCBkb2VzLi5cbiAgICBpZiAoaXNDYW5hZGlhblNlY3VyaXR5KHNlY3VyaXR5LnN0b2NrLnByaW1hcnlfZXhjaGFuZ2UpICYmIHN0b3AgIT09IGxpbWl0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RTWC9UU1gtViBzZWN1cml0aWVzIG11c3QgaGF2ZSBhbiBlcXVpdmFsZW50IHN0b3AgYW5kIGxpbWl0IHByaWNlLicpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IHNlY3VyaXR5LmlkLFxuICAgICAgc3RvcF9wcmljZTogc3RvcCxcbiAgICAgIGxpbWl0X3ByaWNlOiBsaW1pdCxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ2J1eV9xdWFudGl0eScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ3N0b3BfbGltaXQnLFxuICAgICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTWFya2V0IHNlbGwgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBwdXJjaGFzZVxuICAgKi9cbiAgYXN5bmMgbWFya2V0U2VsbChhY2NvdW50SWQsIHRpY2tlciwgcXVhbnRpdHkpIHtcbiAgICBjb25zdCBkZXRhaWxzID0gYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlciwgdHJ1ZSk7XG5cbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiBkZXRhaWxzLmlkLFxuICAgICAgbWFya2V0X3ZhbHVlOiAhKG5ldyBUaWNrZXIodGlja2VyKS5jcnlwdG8pID8gZGV0YWlscy5xdW90ZS5hbW91bnQgOiB1bmRlZmluZWQsXG4gICAgICBxdWFudGl0eSxcbiAgICAgIG9yZGVyX3R5cGU6ICdzZWxsX3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnbWFya2V0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExpbWl0IHNlbGwgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IGxpbWl0IFRoZSBtaW5pbXVtIHByaWNlIHRvIHNlbGwgdGhlIHNlY3VyaXR5IGF0XG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHNlbGxcbiAgICovXG4gIGFzeW5jIGxpbWl0U2VsbChhY2NvdW50SWQsIHRpY2tlciwgbGltaXQsIHF1YW50aXR5KSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgICBzZWN1cml0eV9pZDogKGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpKS5pZCxcbiAgICAgIGxpbWl0X3ByaWNlOiBsaW1pdCxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ3NlbGxfcXVhbnRpdHknLFxuICAgICAgb3JkZXJfc3ViX3R5cGU6ICdsaW1pdCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIGxpbWl0IHNlbGwgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IHN0b3AgVGhlIHByaWNlIGF0IHdoaWNoIHRoZSBvcmRlciBjb252ZXJ0cyB0byBhIGxpbWl0IG9yZGVyXG4gICAqIEBwYXJhbSB7Kn0gbGltaXQgVGhlIG1pbmltdW0gcHJpY2UgdG8gc2VsbCB0aGUgc2VjdXJpdHkgYXRcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gc2VsbFxuICAgKi9cbiAgYXN5bmMgc3RvcExpbWl0U2VsbChhY2NvdW50SWQsIHRpY2tlciwgc3RvcCwgbGltaXQsIHF1YW50aXR5KSB7XG4gICAgY29uc3Qgc2VjdXJpdHkgPSBhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyKTtcblxuICAgIC8vIFRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYmFja2VuZCBkb2Vzbid0IGNoZWNrIGZvciB0aGlzLCBldmVuIHRob3VnaCB0aGUgYXBwIGRvZXMuLlxuICAgIGlmIChpc0NhbmFkaWFuU2VjdXJpdHkoc2VjdXJpdHkuc3RvY2sucHJpbWFyeV9leGNoYW5nZSkgJiYgc3RvcCAhPT0gbGltaXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVFNYL1RTWC1WIHNlY3VyaXRpZXMgbXVzdCBoYXZlIGFuIGVxdWl2YWxlbnQgc3RvcCBhbmQgbGltaXQgcHJpY2UuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgICBzZWN1cml0eV9pZDogc2VjdXJpdHkuaWQsXG4gICAgICBzdG9wX3ByaWNlOiBzdG9wLFxuICAgICAgbGltaXRfcHJpY2U6IGxpbWl0LFxuICAgICAgcXVhbnRpdHksXG4gICAgICBvcmRlcl90eXBlOiAnc2VsbF9xdWFudGl0eScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ3N0b3BfbGltaXQnLFxuICAgICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgT3JkZXJzO1xuIiwiLyoqXG4gKiBUaGUgZGVmYXVsdCBwcm92aWRlciBmb3IgcXVvdGVzIGlzIFdlYWx0aHNpbXBsZSBUcmFkZS5cbiAqL1xuXG5leHBvcnQgZGVmYXVsdCAoZGF0YSkgPT4gKHtcblxuICAvKipcbiAgICAgKiBRdW90ZSBmb3IgYSB0aWNrZXIgZnJvbSB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGVuZHBvaW50LlxuICAgICAqXG4gICAgICogUmVtZW1iZXIgdGhhdCB0aGlzIHF1b3RlIGlzIE5PVCByZWFsLXRpbWUhXG4gICAgICovXG4gIGFzeW5jIHF1b3RlKHRpY2tlcikge1xuICAgIGNvbnN0IGluZm8gPSBhd2FpdCBkYXRhLmdldFNlY3VyaXR5KHRpY2tlciwgdHJ1ZSk7XG4gICAgcmV0dXJuIGluZm8ucXVvdGUuYW1vdW50O1xuICB9LFxufSk7XG4iLCJpbXBvcnQgVHJhZGVRdW90ZXMgZnJvbSAnLi9kZWZhdWx0JztcbmltcG9ydCBUaWNrZXIgZnJvbSAnLi4vY29yZS90aWNrZXInO1xuaW1wb3J0IGVuZHBvaW50cyBmcm9tICcuLi9hcGkvZW5kcG9pbnRzJztcblxuY2xhc3MgUXVvdGVzIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgUXVvdGVzIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIEhUVFBTIFdvcmtlciBzdGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBodHRwc1dvcmtlclxuICAgKi9cbiAgY29uc3RydWN0b3IoaHR0cHNXb3JrZXIsIGRhdGEpIHtcbiAgICAvLyBXZWFsdGhzaW1wbGUgVHJhZGUgaXMgb3VyIGRlZmF1bHQgc291cmNlIGZvciBxdW90ZXMsIGRlc3BpdGVcbiAgICAvLyBoYXZpbmcgYSAxNSBtaW4gZGVsYXlcbiAgICB0aGlzLmRlZmF1bHRQcm92aWRlciA9IG5ldyBUcmFkZVF1b3RlcyhkYXRhKTtcblxuICAgIC8vIE1haW50YWlucyBxdW90ZSBwcm92aWRlcnMgb24gYW4gZXhjaGFuZ2UgYmFzaXNcbiAgICB0aGlzLnByb3ZpZGVycyA9IHt9O1xuXG4gICAgdGhpcy53b3JrZXIgPSBodHRwc1dvcmtlcjtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICB9XG5cbiAgLyoqXG4gICAgICogTG9hZCBhIGN1c3RvbSBwcm92aWRlciBmb3IgdGhlIGV4Y2hhbmdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBleGNoYW5nZSBUaGUgZXhjaGFuZ2UgdGhhdCB0aGUgcHJvdmlkZXIgZmV0Y2hlcyBxdW90ZXMgZm9yXG4gICAgICogQHBhcmFtIHsqfSBwcm92aWRlciBUaGUgcHJvdmlkZXIgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHF1b3RlKCkgaW1wbGVtZW50YXRpb24uXG4gICAgICovXG4gIHVzZShleGNoYW5nZSwgcHJvdmlkZXIpIHtcbiAgICBpZiAodHlwZW9mIChwcm92aWRlci5xdW90ZSkgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIFRoZSBwcm92aWRlciBtdXN0IGhhdmUgYSBxdW90ZSgpIGltcGxlbWVudGF0aW9uIHRoYXQgd2UgY2FuIGNhbGwgbGF0ZXIhXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcXVvdGUgcHJvdmlkZXIgZm9yICR7ZXhjaGFuZ2V9IWApO1xuICAgIH1cblxuICAgIHRoaXMucHJvdmlkZXJzW2V4Y2hhbmdlXSA9IHByb3ZpZGVyO1xuICB9XG5cbiAgLyoqXG4gICAgICogT2J0YWlucyBhIHF1b3RlIGZvciB0aGUgdGlja2VyLiBUaGUgc291cmNlIG9mIHRoZSBxdW90ZSBtYXkgYmUgYSBjdXN0b21cbiAgICAgKiBwcm92aWRlciBpZiBhIHZhbGlkIHByb3ZpZGVyIGlzIHJlZ2lzdGVyZWQgZm9yIHRoZSBleGNoYW5nZSB0aGF0IHRoZVxuICAgICAqIHRpY2tlciB0cmFkZXMgb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHNlY3VyaXR5IFRoZSBzZWN1cml0eSB0byBnZXQgYSBxdW90ZSBmb3IuXG4gICAgICovXG4gIGFzeW5jIGdldChzZWN1cml0eSkge1xuICAgIGxldCBleGNoYW5nZSA9IG51bGw7XG4gICAgY29uc3QgdGlja2VyID0gbmV3IFRpY2tlcihzZWN1cml0eSk7XG5cbiAgICBpZiAodGlja2VyLmV4Y2hhbmdlKSB7XG4gICAgICAvLyBXZSBuZWVkIHRoZSBleGNoYW5nZSBpbiB0aGUgbmV4dCBzdGVwIGlmIHRoZSB1c2VyIGhhcyBzcGVjaWZpZWRcbiAgICAgIC8vIGEgY3VzdG9tIHByb3ZpZGVyIGZvciBhbiBleGNoYW5nZS4gU28gaWYgdGhlIHVzZXIgaGFzbid0IHByb3ZpZGVkXG4gICAgICAvLyBpdCwgd2Ugd2lsbCBoYXZlIHRvIHBpbmcgV2VhbHRoc2ltcGxlIHRyYWRlIHRvIGdldCBpdC5cbiAgICAgIGV4Y2hhbmdlID0gdGlja2VyLmV4Y2hhbmdlO1xuICAgIH0gZWxzZSBpZiAodGlja2VyLmNyeXB0byAmJiB0aWNrZXIuaWQpIHtcbiAgICAgIC8vIElmIHRoZSBpZCBpcyBvbmx5IGdpdmVuIGJ1dCB3ZSBrbm93IGl0J3MgYSBjcnlwdG8gaWQsXG4gICAgICAvLyB3ZSB3aWxsIGF1dG9tYXRpY2FsbHkgc2V0IGV4Y2hhbmdlIHRvICdDQycuXG4gICAgICBleGNoYW5nZSA9ICdDQyc7XG4gICAgfSBlbHNlIGlmIChPYmplY3Qua2V5cyh0aGlzLnByb3ZpZGVycykubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIsIGZhbHNlKTtcbiAgICAgIGV4Y2hhbmdlID0gaW5mby5zdG9jay5wcmltYXJ5X2V4Y2hhbmdlO1xuICAgIH1cblxuICAgIC8vIEEgY3VzdG9tIHByb3ZpZGVyIHdpbGwgdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhlIGRlZmF1bHQgc291cmNlXG4gICAgaWYgKGV4Y2hhbmdlIGluIHRoaXMucHJvdmlkZXJzKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnNbZXhjaGFuZ2VdLnF1b3RlKHRpY2tlcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGVmYXVsdFByb3ZpZGVyLnF1b3RlKHRpY2tlcik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBoaXN0b3JpY2FsIHF1b3RlcyB3aXRoaW4gYSBzcGVjaWZpZWQgaW50ZXJ2YWwgZm9yIHRoZSB0aWNrZXIuXG4gICAqIFRoZSBzb3VyY2Ugb2YgdGhlIGhpc3RvcmljYWwgZGF0YSBpcyBub3QgY3VzdG9taXphYmxlIGF0IHRoaXMgdGltZSBiZWNhdXNlXG4gICAqIHRoZXJlIGlzIG5vIG5lZWQgZm9yIGl0IHRvIGJlIHNvLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgdGlja2VyIHRvIHNlYXJjaCBoaXN0b3JpY2FsIHF1b3RlcyBmb3JcbiAgICogQHBhcmFtIHsqfSBpbnRlcnZhbCBUaGUgdGltZSByYW5nZSBvZiB0aGUgcXVvdGVzXG4gICAqL1xuICBhc3luYyBoaXN0b3J5KHNlY3VyaXR5LCBpbnRlcnZhbCkge1xuICAgIC8vIHZhbGlkYXRlIHRoZSB1c2VyLWdpdmVuIHNlY3VyaXR5XG4gICAgY29uc3QgdGlja2VyID0gbmV3IFRpY2tlcihzZWN1cml0eSk7XG4gICAgaWYgKCF0aWNrZXIuaWQpIHtcbiAgICAgIHRpY2tlci5pZCA9IChhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyKSkuaWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlFVT1RFU19ISVNUT1JZLCB7IGlkOiB0aWNrZXIuaWQsIGludGVydmFsIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFF1b3RlcztcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBleHBvcnRzLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBJdGVyYXRvclByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt0b1N0cmluZ1RhZ1N5bWJvbF0gPVxuICAgIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgaWYgKCEodG9TdHJpbmdUYWdTeW1ib2wgaW4gZ2VuRnVuKSkge1xuICAgICAgICBnZW5GdW5bdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuICAgICAgfVxuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IsIFByb21pc2VJbXBsKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIC8vIElmIGEgcmVqZWN0ZWQgUHJvbWlzZSB3YXMgeWllbGRlZCwgdGhyb3cgdGhlIHJlamVjdGlvbiBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBoYW5kbGVkIHRoZXJlLlxuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2VJbXBsKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHtcbiAgICBpZiAoUHJvbWlzZUltcGwgPT09IHZvaWQgMCkgUHJvbWlzZUltcGwgPSBQcm9taXNlO1xuXG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpLFxuICAgICAgUHJvbWlzZUltcGxcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIEdwW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yXCI7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBHcFtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgZXhwb3J0cy5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIGV4cG9ydHMudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcblxuICAgICAgICBpZiAoY2F1Z2h0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZVxuICAvLyBvciBub3QsIHJldHVybiB0aGUgcnVudGltZSBvYmplY3Qgc28gdGhhdCB3ZSBjYW4gZGVjbGFyZSB0aGUgdmFyaWFibGVcbiAgLy8gcmVnZW5lcmF0b3JSdW50aW1lIGluIHRoZSBvdXRlciBzY29wZSwgd2hpY2ggYWxsb3dzIHRoaXMgbW9kdWxlIHRvIGJlXG4gIC8vIGluamVjdGVkIGVhc2lseSBieSBgYmluL3JlZ2VuZXJhdG9yIC0taW5jbHVkZS1ydW50aW1lIHNjcmlwdC5qc2AuXG4gIHJldHVybiBleHBvcnRzO1xuXG59KFxuICAvLyBJZiB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGUsIHVzZSBtb2R1bGUuZXhwb3J0c1xuICAvLyBhcyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIG5hbWVzcGFjZS4gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBlbXB0eVxuICAvLyBvYmplY3QuIEVpdGhlciB3YXksIHRoZSByZXN1bHRpbmcgb2JqZWN0IHdpbGwgYmUgdXNlZCB0byBpbml0aWFsaXplXG4gIC8vIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgdmFyaWFibGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUuXG4gIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgPyBtb2R1bGUuZXhwb3J0cyA6IHt9XG4pKTtcblxudHJ5IHtcbiAgcmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTtcbn0gY2F0Y2ggKGFjY2lkZW50YWxTdHJpY3RNb2RlKSB7XG4gIC8vIFRoaXMgbW9kdWxlIHNob3VsZCBub3QgYmUgcnVubmluZyBpbiBzdHJpY3QgbW9kZSwgc28gdGhlIGFib3ZlXG4gIC8vIGFzc2lnbm1lbnQgc2hvdWxkIGFsd2F5cyB3b3JrIHVubGVzcyBzb21ldGhpbmcgaXMgbWlzY29uZmlndXJlZC4gSnVzdFxuICAvLyBpbiBjYXNlIHJ1bnRpbWUuanMgYWNjaWRlbnRhbGx5IHJ1bnMgaW4gc3RyaWN0IG1vZGUsIHdlIGNhbiBlc2NhcGVcbiAgLy8gc3RyaWN0IG1vZGUgdXNpbmcgYSBnbG9iYWwgRnVuY3Rpb24gY2FsbC4gVGhpcyBjb3VsZCBjb25jZWl2YWJseSBmYWlsXG4gIC8vIGlmIGEgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZm9yYmlkcyB1c2luZyBGdW5jdGlvbiwgYnV0IGluIHRoYXQgY2FzZVxuICAvLyB0aGUgcHJvcGVyIHNvbHV0aW9uIGlzIHRvIGZpeCB0aGUgYWNjaWRlbnRhbCBzdHJpY3QgbW9kZSBwcm9ibGVtLiBJZlxuICAvLyB5b3UndmUgbWlzY29uZmlndXJlZCB5b3VyIGJ1bmRsZXIgdG8gZm9yY2Ugc3RyaWN0IG1vZGUgYW5kIGFwcGxpZWQgYVxuICAvLyBDU1AgdG8gZm9yYmlkIEZ1bmN0aW9uLCBhbmQgeW91J3JlIG5vdCB3aWxsaW5nIHRvIGZpeCBlaXRoZXIgb2YgdGhvc2VcbiAgLy8gcHJvYmxlbXMsIHBsZWFzZSBkZXRhaWwgeW91ciB1bmlxdWUgcHJlZGljYW1lbnQgaW4gYSBHaXRIdWIgaXNzdWUuXG4gIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzIxNF9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNTQ1X187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX185NDlfXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1Mik7XG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiBtb2R1bGVbJ2RlZmF1bHQnXSA6XG5cdFx0KCkgPT4gbW9kdWxlO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiXSwic291cmNlUm9vdCI6IiJ9