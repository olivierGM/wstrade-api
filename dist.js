!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("source-map-support"),require("node-fetch"),require("cloudscraper")):"function"==typeof define&&define.amd?define(["source-map-support","node-fetch","cloudscraper"],t):"object"==typeof exports?exports["wstrade-api"]=t(require("source-map-support"),require("node-fetch"),require("cloudscraper")):e["wstrade-api"]=t(e._,e._,e._)}(global,(function(e,t,r){return(()=>{var n={228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},858:e=>{e.exports=function(e){if(Array.isArray(e))return e}},646:(e,t,r)=>{var n=r(228);e.exports=function(e){if(Array.isArray(e))return n(e)}},926:e=>{function t(e,t,r,n,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(i,a){var s=e.apply(r,n);function o(e){t(s,i,a,o,u,"next",e)}function u(e){t(s,i,a,o,u,"throw",e)}o(void 0)}))}}},575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},913:e=>{function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}},713:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},884:e=>{e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}}},521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},38:(e,t,r)=>{var n=r(858),i=r(884),a=r(379),s=r(521);e.exports=function(e,t){return n(e)||i(e,t)||a(e,t)||s()}},319:(e,t,r)=>{var n=r(646),i=r(860),a=r(379),s=r(206);e.exports=function(e){return n(e)||i(e)||a(e)||s()}},379:(e,t,r)=>{var n=r(228);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},757:(e,t,r)=>{e.exports=r(666)},391:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(319),i=r.n(n),a=r(757),s=r.n(a),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(726),d=99,y=["sell","deposit","withdrawal","dividend","institutional_transfer","internal_transfer","refund","referral_bonus","affiliate","buy"];const v=function(){function e(t){l()(this,e),this.worker=t}var t,r,n,a,o,c,h,v,m;return p()(e,[{key:"all",value:(m=u()(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.worker.handleRequest(f.Z.ACCOUNT_IDS,{});case 2:return t=e.sent,e.abrupt("return",{tfsa:t.find((function(e){return e.startsWith("tfsa")})),rrsp:t.find((function(e){return e.startsWith("rrsp")})),crypto:t.find((function(e){return e.startsWith("non-registered-crypto")})),personal:t.find((function(e){return e.startsWith("non-registered")&&!e.startsWith("non-registered-crypto")}))});case 4:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"data",value:(v=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.LIST_ACCOUNT,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"me",value:(h=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.ME,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"person",value:(c=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.PERSON,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"history",value:(o=u()(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.HISTORY_ACCOUNT,{interval:t,accountId:r}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"activities",value:(a=u()(s().mark((function e(){var t,r,n,a,o,u,c,l,h,p,v=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=(o=v.length>0&&void 0!==v[0]?v[0]:{})&&o.limit&&o.limit>d)){e.next=3;break}throw new Error("filters.limit can not exceed 99! Leave filters.limit undefined if you want to retrieve all.");case 3:if(null==o||!o.accounts||Array.isArray(o.accounts)){e.next=5;break}throw new Error("filters.accounts must be an array!");case 5:if(null==o||!o.type||Array.isArray(o.type)){e.next=7;break}throw new Error("filters.type must be an array!");case 7:return u=[],e.next=10,this.worker.handleRequest(f.Z.ACTIVITIES,{limit:null!==(t=null==o?void 0:o.limit)&&void 0!==t?t:d,accountIds:null!==(r=null==o||null===(n=o.accounts)||void 0===n?void 0:n.join())&&void 0!==r?r:"",bookmark:"",type:null!==(a=null==o?void 0:o.type)&&void 0!==a?a:y});case 10:if(c=e.sent,u.push.apply(u,i()(c.results)),null!=o&&o.limit){e.next=22;break}case 13:if(u.length%d!=0){e.next=22;break}return e.next=16,this.worker.handleRequest(f.Z.ACTIVITIES,{limit:d,accountIds:null!==(l=null==o||null===(h=o.accounts)||void 0===h?void 0:h.join())&&void 0!==l?l:"",bookmark:c.bookmark,type:null!==(p=null==o?void 0:o.type)&&void 0!==p?p:y});case 16:if(0!==(c=e.sent).results.length){e.next=19;break}return e.abrupt("break",22);case 19:u.push.apply(u,i()(c.results)),e.next=13;break;case 22:return e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getBankAccounts",value:(n=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.BANK_ACCOUNTS,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"deposits",value:(r=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.DEPOSITS,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"positions",value:(t=u()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.POSITIONS,{accountId:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n={onFailure:function(e){return{status:e.statusCode,reason:e.statusMessage,body:e.body,headers:e.rawHeaders}},onSuccess:function(e){return e.body}};const i={LOGIN:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/login",authenticated:!1,onSuccess:function(e){return{tokens:{access:e.headers["x-access-token"],refresh:e.headers["x-refresh-token"],expires:parseInt(e.headers["x-access-token-expires"],10)},accountInfo:e.body}},onFailure:n.onFailure},REFRESH:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/refresh",authenticated:!1,onSuccess:function(e){return{tokens:{access:e.headers["x-access-token"],refresh:e.headers["x-refresh-token"],expires:parseInt(e.headers["x-access-token-expires"],10)}}},onFailure:n.onFailure},ACCOUNT_IDS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",authenticated:!0,onSuccess:function(e){return e.body.results.filter((function(e){return"open"===e.status})).map((function(e){return e.id}))},onFailure:n.onFailure},LIST_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},ME:{method:"GET",url:"https://trade-service.wealthsimple.com/me",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},PERSON:{method:"GET",url:"https://trade-service.wealthsimple.com/person",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},HISTORY_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/history/{0}?account_id={1}",authenticated:!0,parameters:{0:"interval",1:"accountId"},onSuccess:n.onSuccess,onFailure:n.onFailure},ACTIVITIES:{method:"GET",url:"https://trade-service.wealthsimple.com/account/activities?limit={0}&account_ids={1}&[2]&bookmark={3}",authenticated:!0,parameters:{0:"limit",1:"accountIds",2:"type",3:"bookmark"},onSuccess:n.onSuccess,onFailure:n.onFailure},DEPOSITS:{method:"GET",url:"https://trade-service.wealthsimple.com/deposits",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},BANK_ACCOUNTS:{method:"GET",url:"https://trade-service.wealthsimple.com/bank-accounts",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},EXCHANGE_RATES:{method:"GET",url:"https://trade-service.wealthsimple.com/forex",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},SECURITY:{method:"GET",url:"https://trade-service.wealthsimple.com/securities?query={0}",authenticated:!0,parameters:{0:"ticker"},onSuccess:function(e){var t=e.body;if(0===t.results.length)throw new Error("Security does not exist");return t.results},onFailure:n.onFailure},EXTENSIVE_SECURITY_DETAILS:{method:"GET",url:"https://trade-service.wealthsimple.com/securities/{0}",authenticated:!0,parameters:{0:"id"},onSuccess:n.onSuccess,onFailure:n.onFailure},SECURITY_GROUPS:{method:"GET",url:"https://trade-service.wealthsimple.com/security-groups?limit=99",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},SECURITY_GROUP:{method:"GET",url:"https://trade-service.wealthsimple.com/security-groups/{0}/securities",authenticated:!0,parameters:{0:"groupId"},onSuccess:function(e){return e.body.results},onFailure:n.onFailure},QUOTES_HISTORY:{method:"GET",url:"https://trade-service.wealthsimple.com/securities/{0}/historical_quotes/{1}?mic=XNAS",authenticated:!0,parameters:{0:"id",1:"interval"},onSuccess:n.onSuccess,onFailure:n.onFailure},POSITIONS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/positions?account_id={0}",authenticated:!0,parameters:{0:"accountId"},onSuccess:function(e){return e.body.results},onFailure:n.onFailure},ORDERS_BY_PAGE:{method:"GET",url:"https://trade-service.wealthsimple.com/orders?offset={0}&account_id={1}",authenticated:!0,parameters:{0:"offset",1:"accountId"},onSuccess:function(e){var t=e.body;return{total:t.total,orders:t.results}},onFailure:n.onFailure},CANCEL_ORDER:{method:"DELETE",url:"https://trade-service.wealthsimple.com/orders/{0}",authenticated:!0,parameters:{0:"orderId"},onSuccess:n.onSuccess,onFailure:n.onFailure},PLACE_ORDER:{method:"POST",url:"https://trade-service.wealthsimple.com/orders",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure}}},464:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(757),i=r.n(n),a=r(926),s=r.n(a),o=r(575),u=r.n(o),c=r(913),l=r.n(c);const h=function(){function e(t){u()(this,e),this.worker=t}var t,r;return l()(e,[{key:"on",value:function(e,t){this.worker.on(e,t)}},{key:"use",value:function(e){this.worker.tokens.store(e)}},{key:"tokens",value:function(){return{access:this.worker.tokens.access,refresh:this.worker.tokens.refresh,expires:this.worker.tokens.expires}}},{key:"login",value:(r=s()(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.login(t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"refresh",value:(t=s()(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.refreshAuthentication());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},500:(e,t,r)=>{"use strict";r.d(t,{e:()=>a,Z:()=>s});var n=["implicit_token_refresh","securities_cache"],i=["securities_cache"],a=function(e){return!i.includes(e)};function s(e){if(!function(e){return null!=e&&e.startsWith("no_")?n.includes(e.substring("no_".length)):n.includes(e)}(e))throw new Error("'".concat(e,"' is not supported!"));if(null!=e&&e.startsWith("no_")){var t=e.substring(e.indexOf("_")+1);a(t)&&i.push(t)}else a(e)||i.splice(i.indexOf(e),1)}},657:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(38),i=r.n(n),a=r(575),s=r.n(a),o=r(913),u=r.n(o),c=["NASDAQ","NYSE","TSX","TSX-V","AEQUITAS NEO EXCHANGE","CC"];const l=function(){function e(t){var r;if(s()(this,e),this.symbol=null,this.exchange=null,this.id=null,this.crypto=!1,"string"==typeof t){if(""===t)throw new Error("Empty ticker");var n=t.split(":"),a=i()(n,2);this.symbol=a[0],this.exchange=a[1]}else{if(!t.symbol&&!t.id)throw new Error("Invalid ticker '".concat(t,"'"));this.symbol=t.symbol||null,this.exchange=t.exchange||null,this.id=t.id||null}if("NEO"===this.exchange&&(this.exchange="AEQUITAS NEO EXCHANGE"),this.exchange&&!c.includes(this.exchange))throw new Error("Invalid exchange '".concat(this.exchange,"'!"));("CC"===this.exchange||null!==(r=this.id)&&void 0!==r&&r.startsWith("sec-z"))&&(this.crypto=!0)}return u()(e,[{key:"format",value:function(){return this.id?this.id:"AEQUITAS NEO EXCHANGE"===this.exchange?"".concat(this.symbol,":NEO"):"".concat(this.symbol).concat(this.exchange?":".concat(this.exchange):"")}},{key:"weakEquals",value:function(e){return!(!this.id||this.id!==e.id)||!(!this.symbol||this.symbol!==e.symbol||this.crypto!==e.crypto)}}]),e}()},752:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(713),i=r.n(n),a=r(38),s=r.n(a),o=r(757),u=r.n(o),c=r(926),l=r.n(c),h=r(575),p=r.n(h),f=r(913),d=r.n(f),y=r(726),v=r(657),m=r(500),w=new(function(){function e(t){p()(this,e),this.cache=new Map,this.size=t}return d()(e,[{key:"insert",value:function(e,t){this.cache.size>=this.size&&this.cache.delete(this.cache.keys().next().value),this.cache.set(e,t)}},{key:"get",value:function(e){return this.cache.get(e)}}]),e}())(10);const k=function(e){var t=w.get(new v.Z(e).format());return void 0===t?null:t};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const g=function(){function e(t){p()(this,e),this.worker=t}var t,r,n,a;return d()(e,[{key:"exchangeRates",value:(a=l()(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(y.Z.EXCHANGE_RATES,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getSecurity",value:(n=l()(u().mark((function e(t,r){var n,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,i=new v.Z(t),r||!(0,m.e)("securities_cache")){e.next=6;break}if(!(n=k(i))){e.next=6;break}return e.abrupt("return",n);case 6:if(!i.id){e.next=12;break}return e.next=9,this.worker.handleRequest(y.Z.EXTENSIVE_SECURITY_DETAILS,{id:i.id});case 9:n=e.sent,e.next=28;break;case 12:return e.next=14,this.worker.handleRequest(y.Z.SECURITY,{ticker:i.symbol});case 14:if(n=(n=e.sent).filter((function(e){return e.stock.symbol===i.symbol})),i.crypto?n=n.filter((function(e){return"cryptocurrency"===e.security_type})):i.exchange&&(n=n.filter((function(e){return e.stock.primary_exchange===i.exchange}))),!(n.length>1)){e.next=19;break}throw new Error("Multiple securities matched query.");case 19:if(0!==n.length){e.next=21;break}throw new Error("No securities matched query.");case 21:if(a=n,o=s()(a,1),n=o[0],!r){e.next=28;break}return e.next=27,this.worker.handleRequest(y.Z.EXTENSIVE_SECURITY_DETAILS,{id:n.id});case 27:n=e.sent;case 28:return(0,m.e)("securities_cache")&&null===k(i)&&(u=i,c=n,w.insert(new v.Z(u).format(),c)),e.abrupt("return",n);case 30:case"end":return e.stop()}var u,c}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"securityGroups",value:(r=l()(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.worker.handleRequest(y.Z.SECURITY_GROUPS,{});case 2:return t=e.sent,e.abrupt("return",t.reduce((function(e,t){return b(b({},e),{},i()({},t.name,t.external_security_group_id))}),{}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getSecurityGroup",value:(t=l()(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,null!=t&&t.startsWith("security-group")){e.next=8;break}return e.next=4,this.securityGroups();case 4:if(n=e.sent,t in n){e.next=7;break}throw new Error("'".concat(t,"' is not a valid group name!"));case 7:r=n[t];case 8:return e.abrupt("return",this.worker.handleRequest(y.Z.SECURITY_GROUP,{groupId:r}));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},568:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(319),i=r.n(n),a=new(r(545).Headers);const s={add:function(e,t){return a.append(e,t)},remove:function(e){return a.delete(e)},clear:function(){return i()(a).forEach((function(e){return a.delete(e[0])}))},values:function(){return i()(a)}}},352:(e,t,r)=>{r(949).install();var n=r(464).Z,i=r(568).Z,a=r(391).Z,s=r(764).Z,o=r(752).Z,u=r(889).Z,c=r(500).Z,l=r(190).Z,h=function(){var e=new l,t=new o(e);return{auth:new n(e),headers:i,accounts:new a(e),orders:new s(e,t),quotes:new u(e,t),data:t,config:c}},p=new h;p.Session=function(){return new h},e.exports=p},190:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(757),i=r.n(n),a=r(38),s=r.n(a),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(713),d=r.n(f),y=r(214),v=r.n(y),m=r(568),w=r(726),k=r(500);const x=function(){function e(){l()(this,e),this.access=null,this.refresh=null,this.expires=null}return p()(e,[{key:"store",value:function(e){this.access=e.access,this.refresh=e.refresh,this.expires=e.expires}},{key:"expired",value:function(){return this.expires&&parseInt(Date.now()/1e3,10)>=this.expires}}]),e}();function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var g=200,E=201;function _(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t),n=e.url;if(e.parameters)for(var i=0;i<Object.keys(e.parameters).length;i++){var a=e.parameters[i];if(null===r[a]||void 0===r[a])throw new Error("URL parameter '".concat(a,"' missing!"));if(n.indexOf("{".concat(i,"}"))>=0)n=n.replace("{".concat(i,"}"),r[e.parameters[i]]);else{if(!(n.indexOf("[".concat(i,"]"))>=0))throw new Error("Malformed URL! This is an internal error: raise an issue!");!function(){var t=e.parameters[i],a=r[t].map((function(e){return"".concat(t,"=").concat(e)})).join("&");n=n.replace("[".concat(i,"]"),a)}()}delete r[e.parameters[i]]}return["GET","HEAD"].includes(e.method)?{url:n,payload:void 0}:{url:n,payload:JSON.stringify(r)}}const S=function(){function e(){l()(this,e),this.tokens=new x,this.events={otp:null,refresh:null}}var t,r,n,a,o;return p()(e,[{key:"on",value:function(e,t){if(!(e in this.events))throw new Error("Unsupported authentication event '".concat(e,"'!"));this.events[e]=t}},{key:"talk",value:(o=u()(i().mark((function e(t,r){var n,a,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={"Content-type":"application/json"},!t.authenticated){e.next=8;break}if(this.tokens.access){e.next=4;break}throw new Error("Authentication required for '".concat(t.url,"'"));case 4:if(!(0,k.e)("implicit_token_refresh")){e.next=7;break}return e.next=7,this.implicitTokenRefresh();case 7:n.Authorization=this.tokens.access;case 8:return m.Z.values().forEach((function(e){var t=s()(e,2),r=t[0],i=t[1];n[r]=i})),a=_(t,r),o=a.url,u=a.payload,c=null,e.next=13,v()({url:o,body:u,method:t.method,headers:n,callback:function(e,t){c=t}}).catch((function(){}));case 13:try{c.body=JSON.parse(c.body)}catch(e){}return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"handleRequest",value:(a=u()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.talk(t,r);case 2:if(n=e.sent,![g,E].includes(n.statusCode)){e.next=5;break}return e.abrupt("return",t.onSuccess(n));case 5:return e.abrupt("return",Promise.reject(t.onFailure(n)));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"login",value:(n=u()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,"function"!=typeof this.events.otp){e.next=4;break}return e.next=4,this.handleRequest(w.Z.LOGIN,{email:t,password:r}).catch((function(){}));case 4:if(e.prev=4,e.t0=this,e.t1=w.Z.LOGIN,e.t2=t,e.t3=r,"function"!=typeof this.events.otp){e.next=15;break}return e.next=12,this.events.otp();case 12:e.t4=e.sent,e.next=16;break;case 15:e.t4=this.events.otp;case 16:return e.t5=e.t4,e.t6={email:e.t2,password:e.t3,otp:e.t5},e.next=20,e.t0.handleRequest.call(e.t0,e.t1,e.t6);case 20:n=e.sent,e.next=29;break;case 23:if(e.prev=23,e.t7=e.catch(4),!(e.t7.headers&&e.t7.headers.indexOf("x-wealthsimple-otp-required")>-1)){e.next=28;break}throw new Error("Authentification successful but OTP is missing!");case 28:throw new Error("Wrong credentials or wrong OTP!");case 29:this.tokens.store(n.tokens);case 30:case"end":return e.stop()}}),e,this,[[4,23]])}))),function(e,t){return n.apply(this,arguments)})},{key:"refreshAuthentication",value:(r=u()(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleRequest(w.Z.REFRESH,{refresh_token:this.tokens.refresh});case 2:if(t=e.sent,this.tokens.store(t.tokens),e.prev=4,"function"!=typeof this.events.refresh){e.next=8;break}return e.next=8,this.events.refresh(this.tokens);case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),new Error("Error in auth.on() handler for 'refresh': ".concat(e.t0));case 13:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(){return r.apply(this,arguments)})},{key:"implicitTokenRefresh",value:(t=u()(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tokens.expired()){e.next=13;break}if(!this.tokens.refresh){e.next=12;break}return e.prev=2,e.next=5,this.refreshAuthentication();case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new Error("Unable to refresh expired token: ".concat(e.t0));case 10:e.next=13;break;case 12:throw new Error("Access token expired");case 13:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(){return t.apply(this,arguments)})}]),e}()},764:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(319),i=r.n(n),a=r(757),s=r.n(a),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(726),d=r(657),y=function(e){return["TSX","TSX-V"].includes(e)};function v(e,t,r){var n=e.orders.filter((function(e){if(t){var n=new d.Z({symbol:e.symbol,id:e.security_id});if(!new d.Z(t).weakEquals(n))return!1}return e.status===r}));return{orders:n,total:n.length}}const m=function(){function e(t,r){l()(this,e),this.worker=t,this.data=r}var t,r,n,a,o,c,h,m,w,k,x,b,g,E;return p()(e,[{key:"page",value:(E=u()(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.ORDERS_BY_PAGE,{offset:20*(r-1),accountId:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return E.apply(this,arguments)})},{key:"all",value:(g=u()(s().mark((function e(t){var r,n,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.page(t,1);case 2:if(r=e.sent,!((n=Math.ceil(r.total/20))>1)){e.next=12;break}for(a=[],o=2;o<=n;o++)a.push(this.page(t,o).then((function(e){return e.orders})));return e.next=9,Promise.all(a);case 9:e.sent.forEach((function(e){var t;return(t=r.orders).push.apply(t,i()(e))})),r.total=r.orders.length;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"pending",value:(b=u()(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"submitted"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"filled",value:(x=u()(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"posted"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return x.apply(this,arguments)})},{key:"cancelled",value:(k=u()(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"cancelled"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)})},{key:"cancel",value:(w=u()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,this.worker.handleRequest(f.Z.CANCEL_ORDER,{orderId:t});case 3:return e.t1=e.sent,e.abrupt("return",{order:e.t0,response:e.t1});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"cancelPending",value:(m=u()(s().mark((function e(t){var r,n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pending(t);case 2:return r=e.sent,e.abrupt("return",Promise.all(r.orders.map(function(){var e=u()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.cancel(t.order_id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"marketBuy",value:(h=u()(s().mark((function e(t,r,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r,!0);case 2:return i=e.sent,e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:i.id,limit_price:new d.Z(r).crypto?void 0:i.quote.amount,quantity:n,order_type:"buy_quantity",order_sub_type:"market",time_in_force:"day",account_id:t}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return h.apply(this,arguments)})},{key:"fractionalBuy",value:(c=u()(s().mark((function e(t,r,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.worker,e.t1=f.Z.PLACE_ORDER,e.next=4,this.data.getSecurity(r);case 4:return e.t2=e.sent.id,e.t3=n,e.t4=t,e.t5={security_id:e.t2,market_value:e.t3,order_type:"buy_value",order_sub_type:"fractional",time_in_force:"day",account_id:e.t4},e.abrupt("return",e.t0.handleRequest.call(e.t0,e.t1,e.t5));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return c.apply(this,arguments)})},{key:"limitBuy",value:(o=u()(s().mark((function e(t,r,n,i){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.worker,e.t1=f.Z.PLACE_ORDER,e.next=4,this.data.getSecurity(r);case 4:return e.t2=e.sent.id,e.t3=n,e.t4=i,e.t5=t,e.t6={security_id:e.t2,limit_price:e.t3,quantity:e.t4,order_type:"buy_quantity",order_sub_type:"limit",time_in_force:"day",account_id:e.t5},e.abrupt("return",e.t0.handleRequest.call(e.t0,e.t1,e.t6));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return o.apply(this,arguments)})},{key:"stopLimitBuy",value:(a=u()(s().mark((function e(t,r,n,i,a){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r);case 2:if(o=e.sent,!y(o.stock.primary_exchange)||n===i){e.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:o.id,stop_price:n,limit_price:i,quantity:a,order_type:"buy_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:t}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,i){return a.apply(this,arguments)})},{key:"marketSell",value:(n=u()(s().mark((function e(t,r,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r,!0);case 2:return i=e.sent,e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:i.id,market_value:new d.Z(r).crypto?void 0:i.quote.amount,quantity:n,order_type:"sell_quantity",order_sub_type:"market",time_in_force:"day",account_id:t}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"limitSell",value:(r=u()(s().mark((function e(t,r,n,i){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.worker,e.t1=f.Z.PLACE_ORDER,e.next=4,this.data.getSecurity(r);case 4:return e.t2=e.sent.id,e.t3=n,e.t4=i,e.t5=t,e.t6={security_id:e.t2,limit_price:e.t3,quantity:e.t4,order_type:"sell_quantity",order_sub_type:"limit",time_in_force:"day",account_id:e.t5},e.abrupt("return",e.t0.handleRequest.call(e.t0,e.t1,e.t6));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"stopLimitSell",value:(t=u()(s().mark((function e(t,r,n,i,a){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r);case 2:if(o=e.sent,!y(o.stock.primary_exchange)||n===i){e.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:o.id,stop_price:n,limit_price:i,quantity:a,order_type:"sell_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:t}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i,a){return t.apply(this,arguments)})}]),e}()},889:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(757),i=r.n(n),a=r(926),s=r.n(a),o=r(575),u=r.n(o),c=r(913),l=r.n(c);const h=function(e){return{quote:function(t){return s()(i().mark((function r(){var n;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getSecurity(t,!0);case 2:return n=r.sent,r.abrupt("return",n.quote.amount);case 4:case"end":return r.stop()}}),r)})))()}}};var p=r(657),f=r(726);const d=function(){function e(t,r){u()(this,e),this.defaultProvider=new h(r),this.providers={},this.worker=t,this.data=r}var t,r;return l()(e,[{key:"use",value:function(e,t){if("function"!=typeof t.quote)throw new Error("Invalid quote provider for ".concat(e,"!"));this.providers[e]=t}},{key:"get",value:(r=s()(i().mark((function e(t){var r,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,!(n=new p.Z(t)).exchange){e.next=6;break}r=n.exchange,e.next=15;break;case 6:if(!n.crypto||!n.id){e.next=10;break}r="CC",e.next=15;break;case 10:if(!(Object.keys(this.providers).length>0)){e.next=15;break}return e.next=13,this.data.getSecurity(n,!1);case 13:a=e.sent,r=a.stock.primary_exchange;case 15:if(!(r in this.providers)){e.next=17;break}return e.abrupt("return",this.providers[r].quote(n));case 17:return e.abrupt("return",this.defaultProvider.quote(n));case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"history",value:(t=s()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=new p.Z(t)).id){e.next=5;break}return e.next=4,this.data.getSecurity(n);case 4:n.id=e.sent.id;case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.QUOTES_HISTORY,{id:n.id,interval:r}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}()},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new T(n||[]);return a._invoke=function(e,t,r){var n=l;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw a;return I()}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var o=_(s,r);if(o){if(o===d)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=c(e,t,r);if("normal"===u.type){if(n=r.done?f:h,u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=f,r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",h="suspendedYield",p="executing",f="completed",d={};function y(){}function v(){}function m(){}var w={};w[a]=function(){return this};var k=Object.getPrototypeOf,x=k&&k(k(R([])));x&&x!==r&&n.call(x,a)&&(w=x);var b=m.prototype=y.prototype=Object.create(w);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function E(e,t){function r(i,a,s,o){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,o)}))}o(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function R(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:I}}function I(){return{value:t,done:!0}}return v.prototype=b.constructor=m,m.constructor=v,m[o]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(E.prototype),E.prototype[s]=function(){return this},e.AsyncIterator=E,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var s=new E(u(t,r,n,i),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},g(b),b[o]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return o.type="throw",o.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},214:e=>{"use strict";e.exports=r},545:e=>{"use strict";e.exports=t},949:t=>{"use strict";t.exports=e}},i={};function a(e){if(i[e])return i[e].exports;var t=i[e]={exports:{}};return n[e](t,t.exports,a),t.exports}return a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(352)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheUxpa2VUb0FycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXJyYXlXaXRoSG9sZXMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlUmVzdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlU3ByZWFkLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYWNjb3VudHMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYXBpL2VuZHBvaW50cy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9hdXRoLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9jb3JlL3RpY2tlci5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcHRpb25hbC9zZWN1cml0aWVzLWNhY2hlLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvcmUvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvZGF0YS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9oZWFkZXJzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2hlbHBlcnMvdGltZS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9jb3JlL3Rva2Vucy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9uZXR3b3JrL2h0dHBzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL29yZGVycy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9xdW90ZXMvZGVmYXVsdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9xdW90ZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvcmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpL2V4dGVybmFsIHtcImNvbW1vbmpzXCI6XCJjbG91ZHNjcmFwZXJcIixcImNvbW1vbmpzMlwiOlwiY2xvdWRzY3JhcGVyXCIsXCJhbWRcIjpcImNsb3Vkc2NyYXBlclwiLFwicm9vdFwiOlwiX1wifSIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwibm9kZS1mZXRjaFwiLFwiY29tbW9uanMyXCI6XCJub2RlLWZldGNoXCIsXCJhbWRcIjpcIm5vZGUtZmV0Y2hcIixcInJvb3RcIjpcIl9cIn0iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcInNvdXJjZS1tYXAtc3VwcG9ydFwiLFwiY29tbW9uanMyXCI6XCJzb3VyY2UtbWFwLXN1cHBvcnRcIixcImFtZFwiOlwic291cmNlLW1hcC1zdXBwb3J0XCIsXCJyb290XCI6XCJfXCJ9Iiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwiZ2xvYmFsIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOTQ5X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181NDVfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzIxNF9fIiwiYXJyIiwibGVuIiwibGVuZ3RoIiwiaSIsImFycjIiLCJBcnJheSIsImlzQXJyYXkiLCJhcnJheUxpa2VUb0FycmF5IiwiYXN5bmNHZW5lcmF0b3JTdGVwIiwiZ2VuIiwicmVzb2x2ZSIsInJlamVjdCIsIl9uZXh0IiwiX3Rocm93Iiwia2V5IiwiYXJnIiwiaW5mbyIsInZhbHVlIiwiZXJyb3IiLCJkb25lIiwiUHJvbWlzZSIsInRoZW4iLCJmbiIsInNlbGYiLCJ0aGlzIiwiYXJncyIsImFyZ3VtZW50cyIsImFwcGx5IiwiZXJyIiwidW5kZWZpbmVkIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJvYmoiLCJpdGVyIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJmcm9tIiwiX2FyciIsIl9uIiwiX2QiLCJfZSIsIl9zIiwiX2kiLCJuZXh0IiwicHVzaCIsImFycmF5V2l0aEhvbGVzIiwiaXRlcmFibGVUb0FycmF5TGltaXQiLCJ1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsIm5vbkl0ZXJhYmxlUmVzdCIsImFycmF5V2l0aG91dEhvbGVzIiwiaXRlcmFibGVUb0FycmF5Iiwibm9uSXRlcmFibGVTcHJlYWQiLCJvIiwibWluTGVuIiwibiIsInRvU3RyaW5nIiwiY2FsbCIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwidGVzdCIsIkFDVElWSVRJRVNfTUFYX0RSQVciLCJBQ1RJVklUSUVTX1RZUEVTX0FMTCIsImh0dHBzV29ya2VyIiwid29ya2VyIiwiaGFuZGxlUmVxdWVzdCIsImVuZHBvaW50cyIsImFjY291bnRzIiwidGZzYSIsImZpbmQiLCJhY2NvdW50Iiwic3RhcnRzV2l0aCIsInJyc3AiLCJjcnlwdG8iLCJwZXJzb25hbCIsImludGVydmFsIiwiYWNjb3VudElkIiwiZmlsdGVycyIsImxpbWl0IiwiRXJyb3IiLCJ0eXBlIiwicmVzdWx0cyIsImFjY291bnRJZHMiLCJqb2luIiwiYm9va21hcmsiLCJyZXNwb25zZSIsImRlZmF1bHRFbmRwb2ludEJlaGF2aW91ciIsIm9uRmFpbHVyZSIsInN0YXR1cyIsInN0YXR1c0NvZGUiLCJyZWFzb24iLCJzdGF0dXNNZXNzYWdlIiwiYm9keSIsImhlYWRlcnMiLCJyYXdIZWFkZXJzIiwib25TdWNjZXNzIiwiTE9HSU4iLCJtZXRob2QiLCJ1cmwiLCJhdXRoZW50aWNhdGVkIiwidG9rZW5zIiwiYWNjZXNzIiwicmVmcmVzaCIsImV4cGlyZXMiLCJwYXJzZUludCIsImFjY291bnRJbmZvIiwiUkVGUkVTSCIsIkFDQ09VTlRfSURTIiwiZmlsdGVyIiwibWFwIiwiaWQiLCJMSVNUX0FDQ09VTlQiLCJNRSIsIlBFUlNPTiIsIkhJU1RPUllfQUNDT1VOVCIsInBhcmFtZXRlcnMiLCIwIiwiMSIsIkFDVElWSVRJRVMiLCIyIiwiMyIsIkRFUE9TSVRTIiwiQkFOS19BQ0NPVU5UUyIsIkVYQ0hBTkdFX1JBVEVTIiwiU0VDVVJJVFkiLCJkYXRhIiwiRVhURU5TSVZFX1NFQ1VSSVRZX0RFVEFJTFMiLCJTRUNVUklUWV9HUk9VUFMiLCJTRUNVUklUWV9HUk9VUCIsIlFVT1RFU19ISVNUT1JZIiwiUE9TSVRJT05TIiwiT1JERVJTX0JZX1BBR0UiLCJ0b3RhbCIsIm9yZGVycyIsIkNBTkNFTF9PUkRFUiIsIlBMQUNFX09SREVSIiwiZXZlbnQiLCJoYW5kbGVyIiwib24iLCJzdGF0ZSIsInN0b3JlIiwiZW1haWwiLCJwYXNzd29yZCIsImxvZ2luIiwicmVmcmVzaEF1dGhlbnRpY2F0aW9uIiwic3VwcG9ydGVkRmVhdHVyZXMiLCJkaXNhYmxlZCIsImNvbmZpZ0VuYWJsZWQiLCJmZWF0dXJlIiwiaW5jbHVkZXMiLCJjb25maWciLCJzdWJzdHJpbmciLCJzdXBwb3J0ZWQiLCJjdXQiLCJpbmRleE9mIiwic3BsaWNlIiwiZXhjaGFuZ2VzIiwic3ltYm9sIiwiZXhjaGFuZ2UiLCJzcGxpdCIsIm90aGVyIiwiY2FjaGUiLCJzaXplIiwiTWFwIiwia2V5cyIsInNldCIsImdldCIsInNlY3VyaXR5IiwicmVzdWx0IiwiVGlja2VyIiwiZm9ybWF0IiwidXNlclRpY2tlciIsImV4dGVuc2l2ZSIsInRpY2tlciIsInN0b2NrIiwic2VjdXJpdHlfdHlwZSIsInByaW1hcnlfZXhjaGFuZ2UiLCJpbnNlcnQiLCJyZWR1Y2UiLCJpdGVtIiwiZXh0ZXJuYWxfc2VjdXJpdHlfZ3JvdXBfaWQiLCJncm91cCIsImdyb3VwSWQiLCJzZWN1cml0eUdyb3VwcyIsImdyb3VwcyIsImN1c3RvbUhlYWRlcnMiLCJIZWFkZXJzIiwiYWRkIiwiYXBwZW5kIiwicmVtb3ZlIiwiY2xlYXIiLCJmb3JFYWNoIiwiaGVhZGVyIiwidmFsdWVzIiwiQXV0aGVudGljYXRpb24iLCJBY2NvdW50cyIsIk9yZGVycyIsIkRhdGEiLCJRdW90ZXMiLCJIdHRwc1dvcmtlciIsIlNlc3Npb24iLCJhdXRoIiwicXVvdGVzIiwiZGVmYXVsdFNlc3Npb24iLCJEYXRlIiwibm93IiwiSFRUUF9PSyIsIkhUVFBfQ1JFQVRFRCIsImZpbmFsaXplUmVxdWVzdCIsImVuZHBvaW50IiwicGFyYW1zIiwiaW5kZXgiLCJwYXJhbWV0ZXJOYW1lIiwicmVwbGFjZSIsInF1ZXJ5UGFyYW1OYW1lIiwicXVlcnlQYXJhbSIsInBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwiVG9rZW5zIiwiZXZlbnRzIiwib3RwIiwiaW1wbGljaXRUb2tlblJlZnJlc2giLCJBdXRob3JpemF0aW9uIiwiY2xvdWRzY3JhcGVyIiwiY2FsbGJhY2siLCJ1bnVzZWQiLCJyZXMiLCJwYXJzZSIsInRhbGsiLCJyZWZyZXNoX3Rva2VuIiwiZXhwaXJlZCIsImlzQ2FuYWRpYW5TZWN1cml0eSIsImZpbHRlcmVkT3JkZXJzIiwibGlzdCIsImZpbHRlcmVkIiwib3JkZXIiLCJzZWN1cml0eV9pZCIsIndlYWtFcXVhbHMiLCJwYWdlTnVtIiwib2Zmc2V0IiwicGFnZSIsInBhZ2VzIiwiTWF0aCIsImNlaWwiLCJ0YXNrcyIsImFsbCIsIm9yZGVySWQiLCJwZW5kaW5nIiwiY2FuY2VsIiwib3JkZXJfaWQiLCJxdWFudGl0eSIsImdldFNlY3VyaXR5IiwiZGV0YWlscyIsImxpbWl0X3ByaWNlIiwicXVvdGUiLCJhbW91bnQiLCJvcmRlcl90eXBlIiwib3JkZXJfc3ViX3R5cGUiLCJ0aW1lX2luX2ZvcmNlIiwiYWNjb3VudF9pZCIsIm1hcmtldFZhbHVlIiwibWFya2V0X3ZhbHVlIiwic3RvcCIsInN0b3BfcHJpY2UiLCJkZWZhdWx0UHJvdmlkZXIiLCJUcmFkZVF1b3RlcyIsInByb3ZpZGVycyIsInByb3ZpZGVyIiwicnVudGltZSIsIk9wIiwiaGFzT3duIiwiaGFzT3duUHJvcGVydHkiLCIkU3ltYm9sIiwiaXRlcmF0b3JTeW1ib2wiLCJhc3luY0l0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsInRvU3RyaW5nVGFnU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ3cmFwIiwiaW5uZXJGbiIsIm91dGVyRm4iLCJ0cnlMb2NzTGlzdCIsInByb3RvR2VuZXJhdG9yIiwiR2VuZXJhdG9yIiwiZ2VuZXJhdG9yIiwiY3JlYXRlIiwiY29udGV4dCIsIkNvbnRleHQiLCJfaW52b2tlIiwiR2VuU3RhdGVTdXNwZW5kZWRTdGFydCIsIkdlblN0YXRlRXhlY3V0aW5nIiwiR2VuU3RhdGVDb21wbGV0ZWQiLCJkb25lUmVzdWx0IiwiZGVsZWdhdGUiLCJkZWxlZ2F0ZVJlc3VsdCIsIm1heWJlSW52b2tlRGVsZWdhdGUiLCJDb250aW51ZVNlbnRpbmVsIiwic2VudCIsIl9zZW50IiwiZGlzcGF0Y2hFeGNlcHRpb24iLCJhYnJ1cHQiLCJyZWNvcmQiLCJ0cnlDYXRjaCIsIkdlblN0YXRlU3VzcGVuZGVkWWllbGQiLCJtYWtlSW52b2tlTWV0aG9kIiwiR2VuZXJhdG9yRnVuY3Rpb24iLCJHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSIsIkl0ZXJhdG9yUHJvdG90eXBlIiwiZ2V0UHJvdG8iLCJnZXRQcm90b3R5cGVPZiIsIk5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlIiwiR3AiLCJkZWZpbmVJdGVyYXRvck1ldGhvZHMiLCJBc3luY0l0ZXJhdG9yIiwiUHJvbWlzZUltcGwiLCJpbnZva2UiLCJfX2F3YWl0IiwidW53cmFwcGVkIiwicHJldmlvdXNQcm9taXNlIiwiY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmciLCJyZXN1bHROYW1lIiwibmV4dExvYyIsInB1c2hUcnlFbnRyeSIsImxvY3MiLCJlbnRyeSIsInRyeUxvYyIsImNhdGNoTG9jIiwiZmluYWxseUxvYyIsImFmdGVyTG9jIiwidHJ5RW50cmllcyIsInJlc2V0VHJ5RW50cnkiLCJjb21wbGV0aW9uIiwicmVzZXQiLCJpdGVyYWJsZSIsIml0ZXJhdG9yTWV0aG9kIiwiaXNOYU4iLCJkaXNwbGF5TmFtZSIsImlzR2VuZXJhdG9yRnVuY3Rpb24iLCJnZW5GdW4iLCJjdG9yIiwibWFyayIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiYXdyYXAiLCJhc3luYyIsIm9iamVjdCIsInJldmVyc2UiLCJwb3AiLCJza2lwVGVtcFJlc2V0IiwicHJldiIsImNoYXJBdCIsInJvb3RSZWNvcmQiLCJydmFsIiwiZXhjZXB0aW9uIiwiaGFuZGxlIiwibG9jIiwiY2F1Z2h0IiwiaGFzQ2F0Y2giLCJoYXNGaW5hbGx5IiwiZmluYWxseUVudHJ5IiwiY29tcGxldGUiLCJmaW5pc2giLCJ0aHJvd24iLCJkZWxlZ2F0ZVlpZWxkIiwicmVnZW5lcmF0b3JSdW50aW1lIiwiYWNjaWRlbnRhbFN0cmljdE1vZGUiLCJGdW5jdGlvbiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwicHJvcCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELEVBQVFHLFFBQVEsc0JBQXVCQSxRQUFRLGNBQWVBLFFBQVEsaUJBQzlELG1CQUFYQyxRQUF5QkEsT0FBT0MsSUFDOUNELE9BQU8sQ0FBQyxxQkFBc0IsYUFBYyxnQkFBaUJKLEdBQ25DLGlCQUFaQyxRQUNkQSxRQUFRLGVBQWlCRCxFQUFRRyxRQUFRLHNCQUF1QkEsUUFBUSxjQUFlQSxRQUFRLGlCQUUvRkosRUFBSyxlQUFpQkMsRUFBUUQsRUFBUSxFQUFHQSxFQUFRLEVBQUdBLEVBQVEsR0FSOUQsQ0FTR08sUUFBUSxTQUFTQyxFQUFrQ0MsRUFBa0NDLEdBQ3hGLE0scUJDQUFQLEVBQU9ELFFBVlAsU0FBMkJTLEVBQUtDLElBQ25CLE1BQVBBLEdBQWVBLEVBQU1ELEVBQUlFLFVBQVFELEVBQU1ELEVBQUlFLFFBRS9DLElBQUssSUFBSUMsRUFBSSxFQUFHQyxFQUFPLElBQUlDLE1BQU1KLEdBQU1FLEVBQUlGLEVBQUtFLElBQzlDQyxFQUFLRCxHQUFLSCxFQUFJRyxHQUdoQixPQUFPQyxJLFFDSFRaLEVBQU9ELFFBSlAsU0FBeUJTLEdBQ3ZCLEdBQUlLLE1BQU1DLFFBQVFOLEdBQU0sT0FBT0EsSSxjQ0RqQyxJQUFJTyxFQUFtQixFQUFRLEtBTS9CZixFQUFPRCxRQUpQLFNBQTRCUyxHQUMx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YWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcInNvdXJjZS1tYXAtc3VwcG9ydFwiKSwgcmVxdWlyZShcIm5vZGUtZmV0Y2hcIiksIHJlcXVpcmUoXCJjbG91ZHNjcmFwZXJcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wic291cmNlLW1hcC1zdXBwb3J0XCIsIFwibm9kZS1mZXRjaFwiLCBcImNsb3Vkc2NyYXBlclwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJ3c3RyYWRlLWFwaVwiXSA9IGZhY3RvcnkocmVxdWlyZShcInNvdXJjZS1tYXAtc3VwcG9ydFwiKSwgcmVxdWlyZShcIm5vZGUtZmV0Y2hcIiksIHJlcXVpcmUoXCJjbG91ZHNjcmFwZXJcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIndzdHJhZGUtYXBpXCJdID0gZmFjdG9yeShyb290W1wiX1wiXSwgcm9vdFtcIl9cIl0sIHJvb3RbXCJfXCJdKTtcbn0pKGdsb2JhbCwgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOTQ5X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzU0NV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18yMTRfXykge1xucmV0dXJuICIsImZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykge1xuICAgIGFycjJbaV0gPSBhcnJbaV07XG4gIH1cblxuICByZXR1cm4gYXJyMjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlMaWtlVG9BcnJheTsiLCJmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FycmF5V2l0aEhvbGVzOyIsInZhciBhcnJheUxpa2VUb0FycmF5ID0gcmVxdWlyZShcIi4vYXJyYXlMaWtlVG9BcnJheVwiKTtcblxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hcnJheVdpdGhvdXRIb2xlczsiLCJmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gIHRyeSB7XG4gICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5mby5kb25lKSB7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cbiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cblxuICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXN5bmNUb0dlbmVyYXRvcjsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jbGFzc0NhbGxDaGVjazsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NyZWF0ZUNsYXNzOyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9kZWZpbmVQcm9wZXJ0eTsiLCJmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2l0ZXJhYmxlVG9BcnJheTsiLCJmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7XG4gIGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuO1xuICB2YXIgX2FyciA9IFtdO1xuICB2YXIgX24gPSB0cnVlO1xuICB2YXIgX2QgPSBmYWxzZTtcbiAgdmFyIF9lID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge1xuICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2QgPSB0cnVlO1xuICAgIF9lID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZCkgdGhyb3cgX2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIF9hcnI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2l0ZXJhYmxlVG9BcnJheUxpbWl0OyIsImZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX25vbkl0ZXJhYmxlUmVzdDsiLCJmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9ub25JdGVyYWJsZVNwcmVhZDsiLCJ2YXIgYXJyYXlXaXRoSG9sZXMgPSByZXF1aXJlKFwiLi9hcnJheVdpdGhIb2xlc1wiKTtcblxudmFyIGl0ZXJhYmxlVG9BcnJheUxpbWl0ID0gcmVxdWlyZShcIi4vaXRlcmFibGVUb0FycmF5TGltaXRcIik7XG5cbnZhciB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSA9IHJlcXVpcmUoXCIuL3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5XCIpO1xuXG52YXIgbm9uSXRlcmFibGVSZXN0ID0gcmVxdWlyZShcIi4vbm9uSXRlcmFibGVSZXN0XCIpO1xuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHtcbiAgcmV0dXJuIGFycmF5V2l0aEhvbGVzKGFycikgfHwgaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IG5vbkl0ZXJhYmxlUmVzdCgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9zbGljZWRUb0FycmF5OyIsInZhciBhcnJheVdpdGhvdXRIb2xlcyA9IHJlcXVpcmUoXCIuL2FycmF5V2l0aG91dEhvbGVzXCIpO1xuXG52YXIgaXRlcmFibGVUb0FycmF5ID0gcmVxdWlyZShcIi4vaXRlcmFibGVUb0FycmF5XCIpO1xuXG52YXIgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgPSByZXF1aXJlKFwiLi91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheVwiKTtcblxudmFyIG5vbkl0ZXJhYmxlU3ByZWFkID0gcmVxdWlyZShcIi4vbm9uSXRlcmFibGVTcHJlYWRcIik7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHtcbiAgcmV0dXJuIGFycmF5V2l0aG91dEhvbGVzKGFycikgfHwgaXRlcmFibGVUb0FycmF5KGFycikgfHwgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBub25JdGVyYWJsZVNwcmVhZCgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF90b0NvbnN1bWFibGVBcnJheTsiLCJ2YXIgYXJyYXlMaWtlVG9BcnJheSA9IHJlcXVpcmUoXCIuL2FycmF5TGlrZVRvQXJyYXlcIik7XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbiAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpO1xuICBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lO1xuICBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTtcbiAgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5OyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInJlZ2VuZXJhdG9yLXJ1bnRpbWVcIik7XG4iLCJpbXBvcnQgZW5kcG9pbnRzIGZyb20gJy4vYXBpL2VuZHBvaW50cyc7XG5cbi8vIFRoZSBtYXhpbXVtdW0gbnVtYmVyIG9mIGFjdGl2aXRpZXMgd2UgY2FuIHB1bGwgaW4gb25lIGdvLlxuY29uc3QgQUNUSVZJVElFU19NQVhfRFJBVyA9IDk5O1xuLy8gU3VwcG9ydGVkIGFjdGl2aXR5IHR5cGVzXG5jb25zdCBBQ1RJVklUSUVTX1RZUEVTX0FMTCA9IFtcbiAgJ3NlbGwnLFxuICAnZGVwb3NpdCcsXG4gICd3aXRoZHJhd2FsJyxcbiAgJ2RpdmlkZW5kJyxcbiAgJ2luc3RpdHV0aW9uYWxfdHJhbnNmZXInLFxuICAnaW50ZXJuYWxfdHJhbnNmZXInLFxuICAncmVmdW5kJyxcbiAgJ3JlZmVycmFsX2JvbnVzJyxcbiAgJ2FmZmlsaWF0ZScsXG4gICdidXknLFxuXTtcblxuY2xhc3MgQWNjb3VudHMge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBBY2NvdW50IG9iamVjdCBhc3NvY2lhdGVkIHdpdGggYW4gSHR0cHMgd29ya2VyIHN0YXRlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGh0dHBzV29ya2VyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihodHRwc1dvcmtlcikge1xuICAgIHRoaXMud29ya2VyID0gaHR0cHNXb3JrZXI7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIGFsbCBhY2NvdW50IGlkcyBvcGVuIHVuZGVyIHRoaXMgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnQuXG4gICAqL1xuICBhc3luYyBhbGwoKSB7XG4gICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5BQ0NPVU5UX0lEUywge30pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRmc2E6IGFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnQuc3RhcnRzV2l0aCgndGZzYScpKSxcbiAgICAgIHJyc3A6IGFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnQuc3RhcnRzV2l0aCgncnJzcCcpKSxcbiAgICAgIGNyeXB0bzogYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5zdGFydHNXaXRoKCdub24tcmVnaXN0ZXJlZC1jcnlwdG8nKSksXG4gICAgICBwZXJzb25hbDogYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5zdGFydHNXaXRoKCdub24tcmVnaXN0ZXJlZCcpICYmICFhY2NvdW50LnN0YXJ0c1dpdGgoJ25vbi1yZWdpc3RlcmVkLWNyeXB0bycpKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIGRldGFpbHMgYWJvdXQgeW91ciBvcGVuIGFjY291bnRzLCBsaWtlIGFjY291bnQgdHlwZSwgYnV5aW5nIHBvd2VyLFxuICAgKiBjdXJyZW50IGJhbGFuY2UsIGFuZCBtb3JlLlxuICAgKi9cbiAgYXN5bmMgZGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuTElTVF9BQ0NPVU5ULCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHNvbWUgc3VyZmFjZSBpbmZvcm1hdGlvbiBhYm91dCB5b3UgbGlrZSB5b3VyIG5hbWUgYW5kIGVtYWlsLCBhY2NvdW50XG4gICAqIHNpZ25hdHVyZXMsIGFuZCBvdGhlciBtZXRhZGF0YS5cbiAgICovXG4gIGFzeW5jIG1lKCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5NRSwge30pO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IHlvdSB0aGF0IHlvdSBwcm92aWRlZCBvbiBzaWdudXAsIGxpa2UgcmVzaWRlbnRpYWwgYW5kXG4gICAqIG1haWxpbmcgYWRkcmVzc2VzLCBlbXBsb3ltZW50LCBwaG9uZSBudW1iZXJzLCBhbmQgc28gb24uXG4gICAqL1xuICBhc3luYyBwZXJzb24oKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBFUlNPTiwge30pO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXJ5IHRoZSBoaXN0b3J5IG9mIHRoZSBhY2NvdW50IHdpdGhpbiBhIGNlcnRhaW4gdGltZSBpbnRlcnZhbC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBpbnRlcnZhbCBUaGUgdGltZSBpbnRlcnZhbCBmb3IgdGhlIGhpc3RvcnkgcXVlcnlcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gcXVlcnlcbiAgICovXG4gIGFzeW5jIGhpc3RvcnkoaW50ZXJ2YWwsIGFjY291bnRJZCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5ISVNUT1JZX0FDQ09VTlQsIHsgaW50ZXJ2YWwsIGFjY291bnRJZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaGVzIGFjdGl2aXRpZXMgb24geW91ciBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudC4gWW91IGNhbiBsaW1pdCBudW1iZXIgb2YgYWN0aXZpdGllc1xuICAgKiB0byBmZXRjaCBvciByZWZpbmUgd2hhdCBhY3Rpdml0aWVzIGFyZSBmZXRjaGVkIGJhc2VkIG9uIGFjdGl2aXR5IHR5cGUgKGUuZy4sIGJ1eSwgc2VsbCksXG4gICAqIGFjY291bnQgKGUuZy4sIHRmc2EsIHJyc3ApLlxuICAgKi9cbiAgYXN5bmMgYWN0aXZpdGllcyhmaWx0ZXJzID0ge30pIHtcbiAgICAvLyBUaGUgbWF4aW11bSBkcmF3IHBlciBBUEkgY2FsbCBpcyA5OS4gSWYgaXQncyBoaWdoZXIsIHdlIG11c3QgYWJvcnQuXG4gICAgaWYgKGZpbHRlcnM/LmxpbWl0ICYmIGZpbHRlcnMubGltaXQgPiBBQ1RJVklUSUVTX01BWF9EUkFXKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZpbHRlcnMubGltaXQgY2FuIG5vdCBleGNlZWQgOTkhIExlYXZlIGZpbHRlcnMubGltaXQgdW5kZWZpbmVkIGlmIHlvdSB3YW50IHRvIHJldHJpZXZlIGFsbC4nKTtcbiAgICB9XG5cbiAgICAvLyBUZWxsIHRoZSB1c2VyIHRoYXQgZmlsdGVyLmFjY291bnRzIG11c3QgYmUgYW4gZXJyb3JcbiAgICBpZiAoZmlsdGVycz8uYWNjb3VudHMgJiYgIUFycmF5LmlzQXJyYXkoZmlsdGVycy5hY2NvdW50cykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZmlsdGVycy5hY2NvdW50cyBtdXN0IGJlIGFuIGFycmF5IScpO1xuICAgIH1cblxuICAgIC8vIFRlbGwgdGhlIHVzZXIgdGhhdCBmaWx0ZXIudHlwZSBtdXN0IGJlIGFuIGVycm9yXG4gICAgaWYgKGZpbHRlcnM/LnR5cGUgJiYgIUFycmF5LmlzQXJyYXkoZmlsdGVycy50eXBlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmaWx0ZXJzLnR5cGUgbXVzdCBiZSBhbiBhcnJheSEnKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRzID0gW107XG5cbiAgICAvLyBEcmF3IHRoZSBmaXJzdCBzZXQgb2YgYWN0aXZpdGllc1xuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkFDVElWSVRJRVMsIHtcbiAgICAgIGxpbWl0OiBmaWx0ZXJzPy5saW1pdCA/PyBBQ1RJVklUSUVTX01BWF9EUkFXLFxuICAgICAgYWNjb3VudElkczogZmlsdGVycz8uYWNjb3VudHM/LmpvaW4oKSA/PyAnJyxcbiAgICAgIGJvb2ttYXJrOiAnJyxcbiAgICAgIHR5cGU6IGZpbHRlcnM/LnR5cGUgPz8gQUNUSVZJVElFU19UWVBFU19BTEwsXG4gICAgfSk7XG4gICAgcmVzdWx0cy5wdXNoKC4uLnJlc3BvbnNlLnJlc3VsdHMpO1xuXG4gICAgLypcbiAgICAgKiBUbyBnZXQgYWxsIGFjdGl2aXRpZXMsIHdlIHdpbGwgaGF2ZSB0byBkcmF3IHRoZSBtYXhpbXVtIG51bWJlclxuICAgICAqIG9mIGFjdGl2aXRpZXMgcGVyIEFQSSBjYWxsIHVudGlsIHdlIGFyZSBkb25lIChpLmUuLCB3aGVuIHdlXG4gICAgICogcmVjZWl2ZSBhIG51bWJlciBvZiBhY3Rpdml0aWVzIGxlc3MgdGhhbiB0aGUgbWF4aW11bSBwZXIgZHJhdylcbiAgICAgKi9cbiAgICBpZiAoIWZpbHRlcnM/LmxpbWl0KSB7XG4gICAgICAvKlxuICAgICAgICogVGhlIG5vLWF3YWl0LWluLWxvb3AgcnVsZSBpcyBiZWluZyBkaXNhYmxlZCBmb3IgdGhpcyBjYXNlIGJlY2F1c2VcbiAgICAgICAqIGV2ZXJ5IGxvb3AgZmVlZHMgYmFjayBpbnRvIHRoZSBuZXh0IG9uZSB3aXRoIHRoZSBib29rbWFyayAoaS5lLiwgdGhleVxuICAgICAgICogYXJlIG5vdCBpbmRlcGVuZGVudCBhbmQgbXVzdCBydW4gc2VxdWVudGlhbGx5KS5cbiAgICAgICAqL1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tYXdhaXQtaW4tbG9vcCAqL1xuICAgICAgd2hpbGUgKHJlc3VsdHMubGVuZ3RoICUgQUNUSVZJVElFU19NQVhfRFJBVyA9PT0gMCkge1xuICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkFDVElWSVRJRVMsIHtcbiAgICAgICAgICBsaW1pdDogQUNUSVZJVElFU19NQVhfRFJBVyxcbiAgICAgICAgICBhY2NvdW50SWRzOiBmaWx0ZXJzPy5hY2NvdW50cz8uam9pbigpID8/ICcnLFxuICAgICAgICAgIGJvb2ttYXJrOiByZXNwb25zZS5ib29rbWFyayxcbiAgICAgICAgICB0eXBlOiBmaWx0ZXJzPy50eXBlID8/IEFDVElWSVRJRVNfVFlQRVNfQUxMLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFc2NhcGUgdGhlIGxvb3AgaWYgdGhlIHJldHVybmVkIHJlc3VsdHMgaXMgZW1wdHkuIFRoaXMgbWVhbnMgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQuXG4gICAgICAgIGlmIChyZXNwb25zZS5yZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0cy5wdXNoKC4uLnJlc3BvbnNlLnJlc3VsdHMpO1xuICAgICAgfVxuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1hd2FpdC1pbi1sb29wICovXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIGFsbCBiYW5rIGFjY291bnRzIGxpbmtlZCB0byB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnQuXG4gICAqL1xuICBhc3luYyBnZXRCYW5rQWNjb3VudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkJBTktfQUNDT1VOVFMsIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHcmFiIGFsbCBkZXBvc2l0IHJlY29yZHMgb24gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgYXN5bmMgZGVwb3NpdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkRFUE9TSVRTLCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdHMgYWxsIHBvc2l0aW9ucyBpbiB0aGUgc3BlY2lmaWVkIHRyYWRpbmcgYWNjb3VudCB1bmRlciB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIEFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgYXN5bmMgcG9zaXRpb25zKGFjY291bnRJZCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QT1NJVElPTlMsIHsgYWNjb3VudElkIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFjY291bnRzO1xuIiwiY29uc3QgZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyID0ge1xuXG4gIC8vIERlZmF1bHQgZmFpbHVyZSBtZXRob2QgZm9yIGFsbCBlbmRwb2ludCBjYWxsc1xuICBvbkZhaWx1cmU6IChyZXNwb25zZSkgPT4gKHtcbiAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1c0NvZGUsXG4gICAgcmVhc29uOiByZXNwb25zZS5zdGF0dXNNZXNzYWdlLFxuICAgIGJvZHk6IHJlc3BvbnNlLmJvZHksXG4gICAgaGVhZGVyczogcmVzcG9uc2UucmF3SGVhZGVycyxcbiAgfSksXG5cbiAgLy8gRGVmYXVsdCBzdWNjZXNzIG1ldGhvZCBmb3IgYWxsIGVuZHBvaW50IGNhbGxzXG4gIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ib2R5LFxufTtcblxuY29uc3QgV2VhbHRoc2ltcGxlVHJhZGVFbmRwb2ludHMgPSB7XG5cbiAgLypcbiAgICogVGhlIExPR0lOIGVuZHBvaW50IGludGlhbGl6ZXMgYSBuZXcgc2Vzc2lvbiBmb3IgdGhlIGdpdmVuIGVtYWlsIGFuZFxuICAgKiBwYXNzd29yZCBzZXQuIElmIHRoZSBsb2dpbiBpcyBzdWNjZXNzZnVsLCBhY2Nlc3MgYW5kIHJlZnJlc2ggdG9rZW5zXG4gICAqIGFyZSByZXR1cm5lZCBpbiB0aGUgaGVhZGVycy4gVGhlIGFjY2VzcyB0b2tlbiBpcyB0aGUga2V5IGZvciBpbnZva2luZ1xuICAgKiBhbGwgb3RoZXIgZW5kIHBvaW50cy5cbiAgICovXG4gIExPR0lOOiB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYXV0aC9sb2dpbicsXG4gICAgYXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+ICh7XG4gICAgICB0b2tlbnM6IHtcbiAgICAgICAgYWNjZXNzOiByZXNwb25zZS5oZWFkZXJzWyd4LWFjY2Vzcy10b2tlbiddLFxuICAgICAgICByZWZyZXNoOiByZXNwb25zZS5oZWFkZXJzWyd4LXJlZnJlc2gtdG9rZW4nXSxcbiAgICAgICAgZXhwaXJlczogcGFyc2VJbnQocmVzcG9uc2UuaGVhZGVyc1sneC1hY2Nlc3MtdG9rZW4tZXhwaXJlcyddLCAxMCksXG4gICAgICB9LFxuXG4gICAgICBhY2NvdW50SW5mbzogcmVzcG9uc2UuYm9keSxcbiAgICB9KSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogR2VuZXJhdGVzIGEgbmV3IHNldCBvZiBhY2Nlc3MgYW5kIHJlZnJlc2ggdG9rZW5zLlxuICAgKi9cbiAgUkVGUkVTSDoge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2F1dGgvcmVmcmVzaCcsXG4gICAgYXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+ICh7XG4gICAgICB0b2tlbnM6IHtcbiAgICAgICAgYWNjZXNzOiByZXNwb25zZS5oZWFkZXJzWyd4LWFjY2Vzcy10b2tlbiddLFxuICAgICAgICByZWZyZXNoOiByZXNwb25zZS5oZWFkZXJzWyd4LXJlZnJlc2gtdG9rZW4nXSxcbiAgICAgICAgZXhwaXJlczogcGFyc2VJbnQocmVzcG9uc2UuaGVhZGVyc1sneC1hY2Nlc3MtdG9rZW4tZXhwaXJlcyddLCAxMCksXG4gICAgICB9LFxuICAgIH0pLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHcmFicyBhbGwgYWNjb3VudCBpZHMgaW4gdGhpcyBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIEFDQ09VTlRfSURTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2xpc3QnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5ib2R5O1xuXG4gICAgICAvLyBDb2xsZWN0IGFsbCBhY2NvdW50IGlkcyByZWdpc3RlcmVkIHVuZGVyIHRoaXMgV2VhbHRoc2ltcGxlIFRyYWRlIEFjY291bnRcbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMuZmlsdGVyKChhY2NvdW50KSA9PiBhY2NvdW50LnN0YXR1cyA9PT0gJ29wZW4nKS5tYXAoKGFjY291bnQpID0+IGFjY291bnQuaWQpO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBMSVNUX0FDQ09VTlQgZW5kcG9pbnQgcmV0cmlldmVzIGdlbmVyYWwgbWV0YWRhdGEgb2YgdGhlXG4gICAqIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LCBpbmNsdWRpbmcgYmFsYW5jZXMsIGFjY291bnQgaWQsIGFuZFxuICAgKiBtb3JlLlxuICAgKi9cbiAgTElTVF9BQ0NPVU5UOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2xpc3QnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJvZHkucmVzdWx0cyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogVGhlIE1FIGVuZHBvaW50IHJldHJpZXZlcyBzb21lIHN1cmZhY2UgaW5mb3JtYXRpb24gYWJvdXQgeW91IGxpa2VcbiAgICogeW91ciBuYW1lIGFuZCBlbWFpbC5cbiAgICovXG4gIE1FOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9tZScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBQRVJTT04gZW5kcG9pbnQgcmV0cmlldmVzIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IHlvdSB0aGF0XG4gICAqIHlvdSBwcm92aWRlZCBvbiBzaWdudXAsIGxpa2UgcmVzaWRlbnRpYWwgYW5kIG1haWxpbmcgYWRkcmVzc2VzLFxuICAgKiBlbXBsb3ltZW50LCBwaG9uZSBudW1iZXJzLCBhbmQgc28gb24uXG4gICAqL1xuICBQRVJTT046IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL3BlcnNvbicsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBISVNUT1JZX0FDQ09VTlQgZW5kcG9pbnQgcHJvdmlkZXMgaGlzdG9yaWNhbCBzbmFwc2hvdHMgb2YgdGhlXG4gICAqIFdlYWx0aHNpbXBsZSBhY2NvdW50IGZvciBhIHNwZWNpZmllZCB0aW1lZnJhbWUuXG4gICAqL1xuICBISVNUT1JZX0FDQ09VTlQ6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvaGlzdG9yeS97MH0/YWNjb3VudF9pZD17MX0nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2ludGVydmFsJyxcbiAgICAgIDE6ICdhY2NvdW50SWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQcm92aWRlcyB0aGUgbW9zdCByZWNlbnQgMjAgYWN0aXZpdGllcyAoZGVwb3NpdHMsIGRpdmlkZW5kcywgb3JkZXJzLCBldGMpIG9uIHRoZSBXZWFsdGhzaW1wbGVcbiAgICogVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIEFDVElWSVRJRVM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvYWN0aXZpdGllcz9saW1pdD17MH0mYWNjb3VudF9pZHM9ezF9JlsyXSZib29rbWFyaz17M30nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2xpbWl0JyxcbiAgICAgIDE6ICdhY2NvdW50SWRzJyxcbiAgICAgIDI6ICd0eXBlJyxcbiAgICAgIDM6ICdib29rbWFyaycsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEFsbCBkZXBvc2l0cyB1bmRlciB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICovXG4gIERFUE9TSVRTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9kZXBvc2l0cycsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYm9keS5yZXN1bHRzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBBbGwgbGlua2VkIGJhbmsgYWNjb3VudHMgdW5kZXIgdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqL1xuICBCQU5LX0FDQ09VTlRTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9iYW5rLWFjY291bnRzJyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ib2R5LnJlc3VsdHMsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEN1cnJlbnQgV2VhbHRoc2ltcGxlIFRyYWRlIFVTRC9DQUQgZXhjaGFuZ2UgcmF0ZXNcbiAgICovXG4gIEVYQ0hBTkdFX1JBVEVTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9mb3JleCcsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEdyYWJzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWN1cml0eSByZXNlbWJsZWQgYnkgdGhlIHRpY2tlci5cbiAgICovXG4gIFNFQ1VSSVRZOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9zZWN1cml0aWVzP3F1ZXJ5PXswfScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAndGlja2VyJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuYm9keTtcblxuICAgICAgaWYgKGRhdGEucmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZWN1cml0eSBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YS5yZXN1bHRzO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEZldGNoZXMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgYSBzZWN1cml0eSB1c2luZyBpdHMgdW5pcXVlXG4gICAqIHNlY3VyaXR5IGlkZW50aWZpZXIuIE1hcmtldCBxdW90ZSwgYmlkIGFuZCBhc2sgc2l6ZSwgYW5kIG90aGVyIGluZm9ybWF0aW9uXG4gICAqIGFyZSByZXR1cm5lZC5cbiAgICovXG4gIEVYVEVOU0lWRV9TRUNVUklUWV9ERVRBSUxTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9zZWN1cml0aWVzL3swfScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnaWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQcm92aWRlcyBhIGNvbXByZWhlbnNpdmUgbGlzdCBvbiBhbGwgc2VjdXJpdHkgZ3JvdXBzIGF2YWlsYWJsZVxuICAgKiBvbiB0aGUgcGxhdGZvcm0uXG4gICAqL1xuICBTRUNVUklUWV9HUk9VUFM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL3NlY3VyaXR5LWdyb3Vwcz9saW1pdD05OScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYm9keS5yZXN1bHRzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBSZXRyaWV2ZXMgYWxsIHNlY3VyaXRpZWlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc2VjdXJpdHkgZ3JvdXAgaWQuXG4gICAqL1xuICBTRUNVUklUWV9HUk9VUDoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vc2VjdXJpdHktZ3JvdXBzL3swfS9zZWN1cml0aWVzJyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdncm91cElkJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ib2R5LnJlc3VsdHMsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEZldGNoZXMgaGlzdG9yaWNhbCBxdW90ZXMgZm9yIGEgc2VjdXJpdHkgaW4gdGhlIHNwZWNpZmllZCBpbnRlcnZhbC5cbiAgICovXG4gIFFVT1RFU19ISVNUT1JZOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9zZWN1cml0aWVzL3swfS9oaXN0b3JpY2FsX3F1b3Rlcy97MX0/bWljPVhOQVMnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2lkJyxcbiAgICAgIDE6ICdpbnRlcnZhbCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIExpc3RzIGFsbCBwb3NpdGlvbnMgdW5kZXIgYSB0cmFkaW5nIGFjY291bnQuXG4gICAqL1xuICBQT1NJVElPTlM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvcG9zaXRpb25zP2FjY291bnRfaWQ9ezB9JyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdhY2NvdW50SWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJvZHkucmVzdWx0cyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogR3JhYiBhIHBhZ2Ugb2Ygb3JkZXJzICgyMCBvcmRlcnMpLlxuICAgKi9cbiAgT1JERVJTX0JZX1BBR0U6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycz9vZmZzZXQ9ezB9JmFjY291bnRfaWQ9ezF9JyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdvZmZzZXQnLFxuICAgICAgMTogJ2FjY291bnRJZCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmJvZHk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3RhbDogZGF0YS50b3RhbCxcbiAgICAgICAgb3JkZXJzOiBkYXRhLnJlc3VsdHMsXG4gICAgICB9O1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIENhbmNlbHMgYSBzcGVjaWZpYyBvcmRlciBieSBpdHMgaWQuXG4gICAqL1xuICBDQU5DRUxfT1JERVI6IHtcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycy97MH0nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ29yZGVySWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQbGFjZXMgYW4gb3JkZXIgZm9yIGEgc2VjdXJpdHkuXG4gICAqL1xuICBQTEFDRV9PUkRFUjoge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycycsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgV2VhbHRoc2ltcGxlVHJhZGVFbmRwb2ludHM7XG4iLCJjbGFzcyBBdXRoZW50aWNhdGlvbiB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBBdXRoZW50aWNhdGlvbiBjbGFzc3MgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgKiBwcm92aWRlZCB0b2tlbnMgYW5kIGh0dHBzIHdvcmtlci5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBodHRwc1dvcmtlclxuICAgKi9cbiAgY29uc3RydWN0b3IoaHR0cHNXb3JrZXIpIHtcbiAgICB0aGlzLndvcmtlciA9IGh0dHBzV29ya2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgZnVuY3Rpb24gdG8gcnVuIG9uIGEgY2VydGFpbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudCBUaGUgdHJpZ2dlciBmb3IgdGhlIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7Kn0gaGFuZGxlciBldmVudCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICovXG4gIG9uKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgdGhpcy53b3JrZXIub24oZXZlbnQsIGhhbmRsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGF1dGggbW9kdWxlIHdpdGggYW4gZXhpc3Rpbmcgc3RhdGUgb2YgdG9rZW5zLlxuICAgKiBUaGUgc3RhdGUgcHJvdmlkZWQgc2hvdWxkIGNvbnRhaW4gYWNjZXNzLCByZWZyZXNoLCBhbmQgZXhwaXJlcyBwcm9wZXJ0aWVzLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHN0YXRlIFByZS1leGlzdGluZyBhdXRoZW50aWNhdGlvbiBzdGF0ZVxuICAgKi9cbiAgdXNlKHN0YXRlKSB7XG4gICAgdGhpcy53b3JrZXIudG9rZW5zLnN0b3JlKHN0YXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTbmFwc2hvdCBvZiB0aGUgY3VycmVudCBhdXRoZW50aWNhdGlvbiB0b2tlbnMuXG4gICAqL1xuICB0b2tlbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY2VzczogdGhpcy53b3JrZXIudG9rZW5zLmFjY2VzcyxcbiAgICAgIHJlZnJlc2g6IHRoaXMud29ya2VyLnRva2Vucy5yZWZyZXNoLFxuICAgICAgZXhwaXJlczogdGhpcy53b3JrZXIudG9rZW5zLmV4cGlyZXMsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRlbXB0cyB0byBlc3RhYmxpc2ggYSBzZXNzaW9uIGZvciB0aGUgcHJvdmlkZWQgZW1haWwgYW5kIHBhc3N3b3JkLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGVtYWlsIGVtYWlsZWQgcmVnaXN0ZXJlZCBieSB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSBwYXNzd29yZCBUaGUgcGFzc3dvcmQgb2YgdGhlIGFjY291bnRcbiAgICovXG4gIGFzeW5jIGxvZ2luKGVtYWlsLCBwYXNzd29yZCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5sb2dpbihlbWFpbCwgcGFzc3dvcmQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIG5ldyBzZXQgb2YgYWNjZXNzIGFuZCByZWZyZXNoIHRva2Vucy5cbiAgICovXG4gIGFzeW5jIHJlZnJlc2goKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLnJlZnJlc2hBdXRoZW50aWNhdGlvbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1dGhlbnRpY2F0aW9uO1xuIiwiLy8gQ29uZGl0aW9uYWwgZmVhdHVyZXMgdGhhdCBhcmUgY3VycmVudGx5IHN1cHBvcnRlZCBieSB3c3RyYWRlLWFwaVxuY29uc3Qgc3VwcG9ydGVkRmVhdHVyZXMgPSBbJ2ltcGxpY2l0X3Rva2VuX3JlZnJlc2gnLCAnc2VjdXJpdGllc19jYWNoZSddO1xuY29uc3Qgc3VwcG9ydGVkID0gKGZlYXR1cmUpID0+IHtcbiAgaWYgKCFmZWF0dXJlPy5zdGFydHNXaXRoKCdub18nKSkge1xuICAgIHJldHVybiBzdXBwb3J0ZWRGZWF0dXJlcy5pbmNsdWRlcyhmZWF0dXJlKTtcbiAgfVxuXG4gIHJldHVybiBzdXBwb3J0ZWRGZWF0dXJlcy5pbmNsdWRlcyhmZWF0dXJlLnN1YnN0cmluZygnbm9fJy5sZW5ndGgpKTtcbn07XG5cbi8vIEhvbGRzIG9wdGlvbmFsIGZlYXR1cmVzIHRoYXQgaGF2ZSBiZWVuIGRpc2FibGVkLlxuY29uc3QgZGlzYWJsZWQgPSBbJ3NlY3VyaXRpZXNfY2FjaGUnXTtcbmV4cG9ydCBjb25zdCBjb25maWdFbmFibGVkID0gKGZlYXR1cmUpID0+ICFkaXNhYmxlZC5pbmNsdWRlcyhmZWF0dXJlKTtcblxuLyoqXG4gKiBFbmFibGUgb3IgZGlzYWJsZSBhbiBvcHRpb25hbCBmZWF0dXJlIHdpdGhpbiB3c3RyYWRlLWFwaS5cbiAqXG4gKiBFeGFtcGxlczpcbiAqIC0tLVxuICogY29uZmlnKCdpbXBsaWNpdF90b2tlbl9yZWZyZXNoJylcbiAqIEVuYWJsZXMgaW1wbGljaXQgcmVmcmVzaGluZyBvZiB0b2tlbnMuXG4gKlxuICogY29uZmlnKCdub19pbXBsaWNpdF90b2tlbl9yZWZyZXNoJylcbiAqIERpc2FibGVzIGltcGxpY2l0IHJlZnJlc2hpbmcgb2YgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7Kn0gZmVhdHVyZSBUaGUgc3RyaW5nIGlkZW50aWZpZXIgZm9yIHRoZSBmZWF0dXJlLCBzdGFydGluZyB3aXRoIFwibm9fXCIgaWZcbiAqICAgICAgICAgICAgICAgICAgICB5b3Ugd2lzaCB0byBkaXNhYmxlIGl0LlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb25maWcoZmVhdHVyZSkge1xuICBpZiAoIXN1cHBvcnRlZChmZWF0dXJlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJyR7ZmVhdHVyZX0nIGlzIG5vdCBzdXBwb3J0ZWQhYCk7XG4gIH1cblxuICBpZiAoZmVhdHVyZT8uc3RhcnRzV2l0aCgnbm9fJykpIHtcbiAgICBjb25zdCBjdXQgPSBmZWF0dXJlLnN1YnN0cmluZyhmZWF0dXJlLmluZGV4T2YoJ18nKSArIDEpO1xuXG4gICAgLy8gV2Ugd2lsbCBvbmx5IGFwcGVuZCB0aGlzIGlmIGl0IGlzbid0IGFscmVhZHkgaW4gdGhlcmUuXG4gICAgaWYgKGNvbmZpZ0VuYWJsZWQoY3V0KSkge1xuICAgICAgZGlzYWJsZWQucHVzaChjdXQpO1xuICAgIH1cblxuICAvLyBPbmx5IGRlbGV0ZSB0aGUgZmVhdHVyZSBpZiBpdCdzIGFscmVhZHkgZGlzYWJsZWQuXG4gIH0gZWxzZSBpZiAoIWNvbmZpZ0VuYWJsZWQoZmVhdHVyZSkpIHtcbiAgICBkaXNhYmxlZC5zcGxpY2UoZGlzYWJsZWQuaW5kZXhPZihmZWF0dXJlKSwgMSk7XG4gIH1cbn1cbiIsIi8vIEV4Y2hhbmdlcyBzdXBwb3J0ZWQgYnkgV2VhbHRoc2ltcGxlIFRyYWRlXG4vLyAnQ0MnIGlzIG5vdCBhbiBleGNoYW5nZTsgaXQgc3RhbmRzIGZvciBDcnlwdG8gY3VycmVuY3kgYW5kXG4vLyBpdCBhbGxvd3MgdXMgdG8gZGlzdGluZ3Vpc2ggaXQgZnJvbSBjb252ZW50aW9uYWwgc2VjdXJpdGllcy5cbmNvbnN0IGV4Y2hhbmdlcyA9IFsnTkFTREFRJywgJ05ZU0UnLCAnVFNYJywgJ1RTWC1WJywgJ0FFUVVJVEFTIE5FTyBFWENIQU5HRScsICdDQyddO1xuXG4vKipcbiAqIFRpY2tlciBwcm92aWRlcyBhIGxvZ2ljYWwgZW5jYXBzdWxhdGlvbiBmb3IgdGhlIGFsbG93ZWQgZm9ybXNcbiAqIG9mIGEgc2VjdXJpdHkgdGlja2VyIHdpdGhpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICpcbiAqIEl0IHByb3ZpZGVzIHZhbGlkYXRpb24gb2YgdGhlIGZvcm1hdCBvZiB0aGUgdGlja2VyLCBhbmQgdGhlXG4gKiB2YWx1ZSBvZiB0aGUgZXhjaGFuZ2UsIGlmIHByb3ZpZGVkLlxuICpcbiAqIFRpY2tlcnMgbWF5IGJlIHNwZWNpZmllZCBhcyB0d28gZGF0YSB0eXBlczpcbiAqXG4gKiAtIHN0cmluZzogVGhlIHRpY2tlciBtYXkgYmUgYSBzaW1wbGUgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIHN5bWJvbCwgb3IgYSBjb21iaW5hdGlvbiBvZlxuICogdGhlIHN5bWJvbCBhbmQgZXhjaGFuZ2Ugc2VwYXJhdGVkIGJ5IGEgY29sb24uXG4gKiAtIG9iamVjdDogVGhlIHRpY2tlciBtYXkgYmUgYW4gb2JqZWN0IHdpdGggc3ltYm9sLCBleGNoYW5nZSwgb3IgaWQgcHJvcGVydGllcy5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiBcIkFBUExcIlxuICogXCJVQkVSOk5ZU0VcIlxuICogeyBzeW1ib2w6IFwiQUFQTFwiIH1cbiAqIHsgc3ltYm9sOiBcIlVCRVJcIiwgZXhjaGFuZ2U6IFwiTllTRVwiIH1cbiAqIHsgaWQ6IFwic2VjLXMtNzZhNzE1NTI0MmU4NDc3ODgwY2JiNDMyNjkyMzVjYjZcIiB9XG4gKi9cbmNsYXNzIFRpY2tlciB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIHRoZSB0aWNrZXIgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBzZWN1cml0eSB0aWNrZXIgdmFsdWUsIHByb3ZpZGVkIGFzIGEgc3RyaW5nIG9yIGFuIG9iamVjdCB3aXRoIHN5bWJvbCxcbiAgICogZXhjaGFuZ2UsIG9yIGlkLlxuICAgKi9cbiAgY29uc3RydWN0b3IodmFsdWUpIHtcbiAgICB0aGlzLnN5bWJvbCA9IG51bGw7XG4gICAgdGhpcy5leGNoYW5nZSA9IG51bGw7XG4gICAgdGhpcy5pZCA9IG51bGw7XG4gICAgdGhpcy5jcnlwdG8gPSBmYWxzZTtcblxuICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIEVtcHR5IHRpY2tlcnMgYXJlIG5vdCBhbGxvd2VkXG4gICAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRW1wdHkgdGlja2VyJyk7XG4gICAgICB9XG5cbiAgICAgIFt0aGlzLnN5bWJvbCwgdGhpcy5leGNoYW5nZV0gPSB2YWx1ZS5zcGxpdCgnOicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBZb3UgbmVlZCBhdCBsZWFzdCBhIHN5bWJvbCBvciBpZCB0byBmb3JtIGEgdGlja2VyLlxuICAgICAgaWYgKCF2YWx1ZS5zeW1ib2wgJiYgIXZhbHVlLmlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0aWNrZXIgJyR7dmFsdWV9J2ApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN5bWJvbCA9IHZhbHVlLnN5bWJvbCB8fCBudWxsO1xuICAgICAgdGhpcy5leGNoYW5nZSA9IHZhbHVlLmV4Y2hhbmdlIHx8IG51bGw7XG4gICAgICB0aGlzLmlkID0gdmFsdWUuaWQgfHwgbnVsbDtcbiAgICB9XG5cbiAgICAvLyBXZWFsdGhzaW1wbGUgVHJhZGUgZG9lc24ndCBoYXZlIGEgc2hvcnQgZXhjaGFuZ2UgaWQgKCdORU8nKSBmb3JcbiAgICAvLyBBRVFVSVRBUyBORU8gRVhDSEFOR0UgZm9yIHNvbWUgcmVhc29uLi4uXG4gICAgLy8gV2UgaGF2ZSB0byBtYXAgaXQgdG8gdGhlIGZ1bGwgbmFtZSBmb3IgY29tcGFyaXNvbnMgdG8gd29yay5cbiAgICBpZiAodGhpcy5leGNoYW5nZSA9PT0gJ05FTycpIHtcbiAgICAgIHRoaXMuZXhjaGFuZ2UgPSAnQUVRVUlUQVMgTkVPIEVYQ0hBTkdFJztcbiAgICB9XG5cbiAgICAvLyBHdWFyYW50ZWUgdGhhdCB0aGUgZXhjaGFuZ2UgaXMgdmFsaWQgaWYgbm90IG51bGxcbiAgICBpZiAodGhpcy5leGNoYW5nZSAmJiAhZXhjaGFuZ2VzLmluY2x1ZGVzKHRoaXMuZXhjaGFuZ2UpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZXhjaGFuZ2UgJyR7dGhpcy5leGNoYW5nZX0nIWApO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgY3J5cHRvIHByb3BlcnR5IHRvIHRydWUgdG8gdHJlYXQgdGhpcyBzZWN1cml0eSBhcyBjcnlwdG9jdXJyZW5jeVxuICAgIGlmICh0aGlzLmV4Y2hhbmdlID09PSAnQ0MnIHx8IHRoaXMuaWQ/LnN0YXJ0c1dpdGgoJ3NlYy16JykpIHtcbiAgICAgIHRoaXMuY3J5cHRvID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVkdWNlcyB0aGUgdGlja2VyIG9iamVjdCB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAgICovXG4gIGZvcm1hdCgpIHtcbiAgICBpZiAodGhpcy5pZCkge1xuICAgICAgcmV0dXJuIHRoaXMuaWQ7XG4gICAgfVxuXG4gICAgLy8gV2UgbXVzdCByZXRyYW5zbGF0ZSB0aGUgZnVsbCBuYW1lIG9mIHRoZSBORU8gZXhjaGFuZ2UgYmFjayB0byBORU9cbiAgICBpZiAodGhpcy5leGNoYW5nZSA9PT0gJ0FFUVVJVEFTIE5FTyBFWENIQU5HRScpIHtcbiAgICAgIHJldHVybiBgJHt0aGlzLnN5bWJvbH06TkVPYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCR7dGhpcy5zeW1ib2x9JHt0aGlzLmV4Y2hhbmdlID8gYDoke3RoaXMuZXhjaGFuZ2V9YCA6ICcnfWA7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZXMgc3ltYm9sIG9yIGlkIHdpdGggYW5vdGhlciB0aWNrZXIuIFRoaXMgaXMgd2VhayBiZWNhdXNlXG4gICAqIGV4Y2hhbmdlIGlzIG5vdCBjb21wYXJlZCBoZXJlLCBhbGxvd2luZyBmb3IgZmFsc2UgcG9zaXRpdmVzXG4gICAqIG9mIHN5bWJvbHMgb24gZGlmZmVyZW50IGV4Y2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBvdGhlciBUaWNrZXIgdG8gY29tcGFyZSB1cyB3aXRoXG4gICAqL1xuICB3ZWFrRXF1YWxzKG90aGVyKSB7XG4gICAgaWYgKHRoaXMuaWQgJiYgdGhpcy5pZCA9PT0gb3RoZXIuaWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN5bWJvbCAmJiB0aGlzLnN5bWJvbCA9PT0gb3RoZXIuc3ltYm9sICYmIHRoaXMuY3J5cHRvID09PSBvdGhlci5jcnlwdG8pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaWNrZXI7XG4iLCJpbXBvcnQgQVBJQ2FjaGUgZnJvbSAnLi4vY29yZS9jYWNoZSc7XG5pbXBvcnQgVGlja2VyIGZyb20gJy4uL2NvcmUvdGlja2VyJztcblxuY29uc3QgY2FjaGUgPSBuZXcgQVBJQ2FjaGUoMTApO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgICAqIFF1ZXJ5IHRoZSBjYWNoZSBmb3IgdGhlIHNlY3VyaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBzZWN1cml0eVxuICAgICAqL1xuICBnZXQoc2VjdXJpdHkpIHtcbiAgICAvLyBNdXN0IGRpZ2VzdCB0aGUgc2VjdXJpdHkgaW50byB0aGUgc3RhbmRhcmQgZm9ybWF0XG4gICAgY29uc3QgcmVzdWx0ID0gY2FjaGUuZ2V0KG5ldyBUaWNrZXIoc2VjdXJpdHkpLmZvcm1hdCgpKTtcblxuICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcblxuICAvKipcbiAgICAgKiBSZW1lbWJlciB0aGUgc2VjdXJpdHkgZm9yIGEgZnV0dXJlIHF1aWNrIHJldHJpZXZhbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0ga2V5XG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqL1xuICBpbnNlcnQoa2V5LCB2YWx1ZSkge1xuICAgIGNhY2hlLmluc2VydChuZXcgVGlja2VyKGtleSkuZm9ybWF0KCksIHZhbHVlKTtcbiAgfSxcbn07XG4iLCIvKlxuICogQVBJQ2FjaGUgaXMgYW4gaW50ZXJuYWwgZWZmb3J0IHRvIG1pbmltaXplIHVubmVjZXNzYXJ5IEFQSSBjYWxscyB3aGVyZVxuICogcG9zc2libGUuIEEgc3BlY2lmaWMgdXNlY2FzZSB3aGVyZSBhIGNhY2hlIGlzIHVzZWZ1bCBpcyBmaWd1cmluZyBvdXQgdGhlXG4gKiBleGNoYW5nZSBhIHNlY3VyaXR5IGJlbG9uZ3MgdG8uIEEgY2FjaGUgd291bGQgYWxsb3cgdXMgdG8gbWVtb3JpemVcbiAqIHRoaXMgc3RhdGljIGRhdGEgZm9yIGEgcGVyaW9kIG9mIHRpbWUgdG8gYXZvaWQgdW5uZWNlc3NhcnkgQVBJIGNhbGxzLlxuICpcbiAqIFRoZSBjbGFzcyBlbmNhcHN1bGF0ZXMgdGhlIGZvbGxvd2luZyBjYWNoZSBiZWhhdmlvdXI6XG4gKiAtIEEgbWF4aW11bSBlbnRyaWVzIHByb3ZpZGVkIGFzIGEgY29uc3RydWN0b3IgYXJndW1lbnRcbiAqIC0gRmlyc3QgaW4sIEZpcnN0IG91dCAoRklGTykgbW9kZWxcbiAqXG4gKiBUaGUgaW50ZXJuZWwgZGF0YSBzdHJ1Y3R1cmUgaXMgYSBIYXNoU2V0LCBzbyBsb29rdXAgdGltZSBjb3N0IGlzIGZhaXJseVxuICogbWluaW1hbC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQVBJQ2FjaGUge1xuICBjb25zdHJ1Y3RvcihzaXplKSB7XG4gICAgdGhpcy5jYWNoZSA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICB9XG5cbiAgLyoqXG4gICAgICogU3RvcmUgdGhlIGtleS12YWx1ZSBwYWlyIGludG8gdGhpcyBjYWNoZS4gVGhlIG9sZGVzdCBlbnRyeSBpcyBldmljdGVkIGlmXG4gICAgICogd2UncmUgb3V0IG9mIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBrZXlcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICovXG4gIGluc2VydChrZXksIHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuY2FjaGUuc2l6ZSA+PSB0aGlzLnNpemUpIHtcbiAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKHRoaXMuY2FjaGUua2V5cygpLm5leHQoKS52YWx1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5jYWNoZS5zZXQoa2V5LCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICAgKiBSZXRyaWV2ZSB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IGtleVxuICAgICAqL1xuICBnZXQoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuZ2V0KGtleSk7XG4gIH1cbn1cbiIsImltcG9ydCBlbmRwb2ludHMgZnJvbSAnLi9hcGkvZW5kcG9pbnRzJztcbmltcG9ydCBUaWNrZXIgZnJvbSAnLi9jb3JlL3RpY2tlcic7XG5pbXBvcnQgeyBjb25maWdFbmFibGVkIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IGNhY2hlIGZyb20gJy4vb3B0aW9uYWwvc2VjdXJpdGllcy1jYWNoZSc7XG5cbmNsYXNzIERhdGEge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBEYXRhIHBiamVjdCBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIEh0dHBzIHdvcmtlciBzdGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBodHRwc1dvcmtlclxuICAgKi9cbiAgY29uc3RydWN0b3IoaHR0cHNXb3JrZXIpIHtcbiAgICB0aGlzLndvcmtlciA9IGh0dHBzV29ya2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgc25hcHNob3Qgb2YgdGhlIGN1cnJlbnQgVVNEL0NBRCBleGNoYW5nZSByYXRlcyBvbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlXG4gICAqIHBsYXRmb3JtLlxuICAgKi9cbiAgYXN5bmMgZXhjaGFuZ2VSYXRlcygpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuRVhDSEFOR0VfUkFURVMsIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmZvcm1hdGlvbiBhYm91dCBhIHNlY3VyaXR5IG9uIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgUGxhdGZvcm0uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gdXNlclRpY2tlciBUaGUgc2VjdXJpdHkgaWRcbiAgICogQHBhcmFtIHtib29sZWFufSBleHRlbnNpdmUgUHVsbHMgYSBtb3JlIGRldGFpbGVkIHJlcG9ydCBvZiB0aGUgc2VjdXJpdHkgdXNpbmcgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9zZWN1cml0aWVzL3tpZH0gQVBJXG4gICAqL1xuICBhc3luYyBnZXRTZWN1cml0eSh1c2VyVGlja2VyLCBleHRlbnNpdmUpIHtcbiAgICBsZXQgcmVzdWx0ID0gbnVsbDtcblxuICAgIC8vIFJ1biBzb21lIHZhbGlkYXRpb24gb24gdGhlIHRpY2tlclxuICAgIGNvbnN0IHRpY2tlciA9IG5ldyBUaWNrZXIodXNlclRpY2tlcik7XG5cbiAgICBpZiAoIWV4dGVuc2l2ZSAmJiBjb25maWdFbmFibGVkKCdzZWN1cml0aWVzX2NhY2hlJykpIHtcbiAgICAgIHJlc3VsdCA9IGNhY2hlLmdldCh0aWNrZXIpO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aWNrZXIuaWQpIHtcbiAgICAgIC8vIFdlIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgZXh0ZW5zaXZlIGRldGFpbHMgQVBJIHNpbmNlIHdlIGhhdmUgdGhlIHVuaXF1ZSBpZC5cbiAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkVYVEVOU0lWRV9TRUNVUklUWV9ERVRBSUxTLCB7XG4gICAgICAgIGlkOiB0aWNrZXIuaWQsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuU0VDVVJJVFksIHsgdGlja2VyOiB0aWNrZXIuc3ltYm9sIH0pO1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigoc2VjdXJpdHkpID0+IHNlY3VyaXR5LnN0b2NrLnN5bWJvbCA9PT0gdGlja2VyLnN5bWJvbCk7XG5cbiAgICAgIGlmICh0aWNrZXIuY3J5cHRvKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoKHNlY3VyaXR5KSA9PiBzZWN1cml0eS5zZWN1cml0eV90eXBlID09PSAnY3J5cHRvY3VycmVuY3knKTtcbiAgICAgIH0gZWxzZSBpZiAodGlja2VyLmV4Y2hhbmdlKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoKHNlY3VyaXR5KSA9PiBzZWN1cml0eS5zdG9jay5wcmltYXJ5X2V4Y2hhbmdlID09PSB0aWNrZXIuZXhjaGFuZ2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdWx0aXBsZSBzZWN1cml0aWVzIG1hdGNoZWQgcXVlcnkuJyk7XG4gICAgICB9IGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc2VjdXJpdGllcyBtYXRjaGVkIHF1ZXJ5LicpO1xuICAgICAgfVxuXG4gICAgICAvLyBDb252ZXJ0IHJlc3VsdCBmcm9tIGEgc2luZ2xldG9uIGxpc3QgdG8gaXRzIHJhdyBlbnRyeVxuICAgICAgW3Jlc3VsdF0gPSByZXN1bHQ7XG5cbiAgICAgIGlmIChleHRlbnNpdmUpIHtcbiAgICAgICAgLy8gVGhlIGNhbGxlciBoYXMgb3B0ZWQgdG8gcmVjZWl2ZSB0aGUgZXh0ZW5zaXZlIGRldGFpbHMgYWJvdXQgdGhlIHNlY3VyaXR5LlxuICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5FWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUywge1xuICAgICAgICAgIGlkOiByZXN1bHQuaWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb25maWdFbmFibGVkKCdzZWN1cml0aWVzX2NhY2hlJykgJiYgY2FjaGUuZ2V0KHRpY2tlcikgPT09IG51bGwpIHtcbiAgICAgIGNhY2hlLmluc2VydCh0aWNrZXIsIHJlc3VsdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaGVzIGEgbWFwcGluZyBvZiBhbGwgc2VjdXJpdHkgZ3JvdXBzIChhdmFpbGFibGUgb24gdGhlIFRyYWRlIHBsYXRmb3JtKSB0b1xuICAgKiB0aGVpciBncm91cCBpZHMuXG4gICAqL1xuICBhc3luYyBzZWN1cml0eUdyb3VwcygpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5TRUNVUklUWV9HUk9VUFMsIHt9KTtcblxuICAgIC8vIENvbnN0cnVjdCBhIG1hcCBvZiBjYXRlZ29yeSBuYW1lIHRvIGNhdGVnb3J5IGlkXG4gICAgcmV0dXJuIHJlc3VsdC5yZWR1Y2UoKG1hcCwgaXRlbSkgPT4gKHtcbiAgICAgIC4uLm1hcCwgW2l0ZW0ubmFtZV06IGl0ZW0uZXh0ZXJuYWxfc2VjdXJpdHlfZ3JvdXBfaWQsXG4gICAgfSksIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYWxsIHNlY3VyaXRpZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBncm91cCBuYW1lIG9yIGlkLlxuICAgKlxuICAgKiAtIElmIHlvdSBwcm92aWRlIHRoZSBncm91cCBuYW1lLCB3ZSB3aWxsIGF1dG9tYXRpY2FsbHkgZG8gYSBsb29rdXBcbiAgICogZnJvbSB0aGUgVHJhZGUgc2VydmVycyB0byBnZXQgaXRzIGlkZW50aWZpZXIuXG4gICAqXG4gICAqIC0gQWx0ZXJuYXRpdmVseSwgWW91IGNhbiBnZXQgYSBsaXN0IG9mIGFsbCBncm91cHMgKHdpdGggdGhlaXIgZ3JvdXAgaWRzKSBmcm9tXG4gICAqIGRhdGEuZ3JvdXBzKCkgYW5kIHByb3ZpZGUgdGhlIGdyb3VwIGlkZW50aWZpZXIgZGlyZWN0bHkuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZ3JvdXAgVGhlIHNlY3VyaXR5IGdyb3VwIG5hbWUgb3IgaWRlbnRpZmllclxuICAgKi9cbiAgYXN5bmMgZ2V0U2VjdXJpdHlHcm91cChncm91cCkge1xuICAgIGxldCBncm91cElkID0gZ3JvdXA7XG5cbiAgICAvLyBGZXRjaCB0aGUgZ3JvdXAgaWQgZnJvbSB0aGUgZ3JvdXAgbmFtZVxuICAgIGlmICghZ3JvdXA/LnN0YXJ0c1dpdGgoJ3NlY3VyaXR5LWdyb3VwJykpIHtcbiAgICAgIGNvbnN0IGdyb3VwcyA9IGF3YWl0IHRoaXMuc2VjdXJpdHlHcm91cHMoKTtcblxuICAgICAgaWYgKCEoZ3JvdXAgaW4gZ3JvdXBzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke2dyb3VwfScgaXMgbm90IGEgdmFsaWQgZ3JvdXAgbmFtZSFgKTtcbiAgICAgIH1cblxuICAgICAgLy8gcmVjb3JkIHRoZSBtYXRjaGVkIGdyb3VwIGlkLlxuICAgICAgZ3JvdXBJZCA9IGdyb3Vwc1tncm91cF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlNFQ1VSSVRZX0dST1VQLCB7IGdyb3VwSWQgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0YTtcbiIsImltcG9ydCB7IEhlYWRlcnMgfSBmcm9tICdub2RlLWZldGNoJztcblxuY29uc3QgY3VzdG9tSGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICogQXBwZW5kcyBhIGhlYWRlciBuYW1lLXZhbHVlIHBhaXIgdG8gYWxsIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG5hbWUgSGVhZGVyIGtleVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIEhlYWRlciB2YWx1ZVxuICAgKi9cbiAgYWRkOiAobmFtZSwgdmFsdWUpID0+IGN1c3RvbUhlYWRlcnMuYXBwZW5kKG5hbWUsIHZhbHVlKSxcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGN1c3RvbSBoZWFkZXIgZnJvbSBhbGwgcmVxdWVzdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbmFtZSBIZWFkZXIga2V5XG4gICAqL1xuICByZW1vdmU6IChuYW1lKSA9PiBjdXN0b21IZWFkZXJzLmRlbGV0ZShuYW1lKSxcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBjdXN0b20gaGVhZGVycy5cbiAgICovXG4gIGNsZWFyOiAoKSA9PiBbLi4uY3VzdG9tSGVhZGVyc10uZm9yRWFjaCgoaGVhZGVyKSA9PiBjdXN0b21IZWFkZXJzLmRlbGV0ZShoZWFkZXJbMF0pKSxcblxuICAvKipcbiAgICogUHJvZHVjZXMgYSBsaXN0IG9mIGN1c3RvbSBoZWFkZXJzLlxuICAgKi9cbiAgdmFsdWVzOiAoKSA9PiBbLi4uY3VzdG9tSGVhZGVyc10sXG59O1xuIiwicmVxdWlyZSgnc291cmNlLW1hcC1zdXBwb3J0JykuaW5zdGFsbCgpO1xuXG5jb25zdCBBdXRoZW50aWNhdGlvbiA9IHJlcXVpcmUoJy4vYXV0aCcpLmRlZmF1bHQ7XG5jb25zdCBoZWFkZXJzID0gcmVxdWlyZSgnLi9oZWFkZXJzJykuZGVmYXVsdDtcbmNvbnN0IEFjY291bnRzID0gcmVxdWlyZSgnLi9hY2NvdW50cycpLmRlZmF1bHQ7XG5jb25zdCBPcmRlcnMgPSByZXF1aXJlKCcuL29yZGVycycpLmRlZmF1bHQ7XG5jb25zdCBEYXRhID0gcmVxdWlyZSgnLi9kYXRhJykuZGVmYXVsdDtcbmNvbnN0IFF1b3RlcyA9IHJlcXVpcmUoJy4vcXVvdGVzJykuZGVmYXVsdDtcbmNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vY29uZmlnJykuZGVmYXVsdDtcblxuY29uc3QgSHR0cHNXb3JrZXIgPSByZXF1aXJlKCcuL25ldHdvcmsvaHR0cHMnKS5kZWZhdWx0O1xuXG4vKipcbiAqIEJ1aWxkcyBhIG5ldyBUcmFkZSBzZXNzaW9uIHdpdGggYW4gaW5kZXBlbmRlbnQgYXV0aGVudGljYXRpb25cbiAqIHN0YXRlLCBmYWNpbGl0YXRpbmcgY29uY3VycmVudCB1c2FnZSBvZiB0aGUgVHJhZGUgQVBJcy5cbiAqXG4gKiBUaGUgaGVhZGVycyBhbmQgY29uZmlnIG1vZHVsZSwgaG93ZXZlciwgaXMgbXV0dWFsbHkgc2hhcmVkIGJldHdlZW5cbiAqIGFsbCBzZXNzaW9ucy5cbiAqL1xuY29uc3QgU2Vzc2lvbiA9ICgpID0+IHtcbiAgY29uc3Qgd29ya2VyID0gbmV3IEh0dHBzV29ya2VyKCk7XG4gIGNvbnN0IGRhdGEgPSBuZXcgRGF0YSh3b3JrZXIpO1xuXG4gIHJldHVybiB7XG4gICAgYXV0aDogbmV3IEF1dGhlbnRpY2F0aW9uKHdvcmtlciksXG4gICAgaGVhZGVycyxcbiAgICBhY2NvdW50czogbmV3IEFjY291bnRzKHdvcmtlciksXG4gICAgb3JkZXJzOiBuZXcgT3JkZXJzKHdvcmtlciwgZGF0YSksXG4gICAgcXVvdGVzOiBuZXcgUXVvdGVzKHdvcmtlciwgZGF0YSksXG4gICAgZGF0YSxcbiAgICBjb25maWcsXG4gIH07XG59O1xuXG4vLyBXZSBuZWVkIGEgZGVmYXVsdCBzZXNzaW9uIGV4cG9ydGVkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSByZWFzb25zLFxuLy8gYnV0IGFsc28gYmVjYXVzZSBub3QgZXZlcnlvbmUgY2FyZXMgYWJvdXQgY29uY3VycmVudCB1c2FnZXMuXG5jb25zdCBkZWZhdWx0U2Vzc2lvbiA9IG5ldyBTZXNzaW9uKCk7XG4vLyBBbGxvdyB0aGUgY3JlYXRpb24gb2YgbXVsdGlwbGUgc2Vzc2lvbnMgdGhyb3VnaCBhIFNlc3Npb24oKSBjb25zdHJ1Y3RvclxuZGVmYXVsdFNlc3Npb24uU2Vzc2lvbiA9ICgpID0+IG5ldyBTZXNzaW9uKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVmYXVsdFNlc3Npb247XG4iLCIvKipcbiAqIENvbXB1dGVzIHRoZSBjdXJyZW50IHRpbWUgaW4gZXBvY2ggc2Vjb25kcy5cbiAqL1xuY29uc3QgZXBvY2hTZWNvbmRzID0gKCkgPT4gcGFyc2VJbnQoRGF0ZS5ub3coKSAvIDEwMDAsIDEwKTtcbmV4cG9ydCBkZWZhdWx0IGVwb2NoU2Vjb25kcztcbiIsImltcG9ydCBlcG9jaFNlY29uZHMgZnJvbSAnLi4vaGVscGVycy90aW1lJztcblxuLyoqXG4gKiBUaGlzIG1vZHVsZSB3aWxsIHByb3ZpZGUgYSB1bmlmb3JtIGludGVyZmFjZSBmb3Igc3RvcmFnZVxuICogYW5kIHJldHJpZXZhbCBvZiBhdXRoZW50aWNhdG9uIHRva2VucyB0aHJvdWdob3V0IHdzdHJhZGUtYXBpLlxuICovXG5jbGFzcyBUb2tlbnMge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBhdXRoZW50aWNhdGlvbiB0b2tlbnMgb2JqZWN0LlxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5hY2Nlc3MgPSBudWxsO1xuICAgIHRoaXMucmVmcmVzaCA9IG51bGw7XG4gICAgdGhpcy5leHBpcmVzID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBhdXRoZW50aWNhdGlvbiB0b2tlbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdG9rZW5zIFRoZSBuZXcgdG9rZW5zXG4gICAqL1xuICBzdG9yZSh0b2tlbnMpIHtcbiAgICB0aGlzLmFjY2VzcyA9IHRva2Vucy5hY2Nlc3M7XG4gICAgdGhpcy5yZWZyZXNoID0gdG9rZW5zLnJlZnJlc2g7XG4gICAgdGhpcy5leHBpcmVzID0gdG9rZW5zLmV4cGlyZXM7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHRva2VucyBoYXZlIGV4cGlyZWQuXG4gICAqL1xuICBleHBpcmVkKCkge1xuICAgIHJldHVybiB0aGlzLmV4cGlyZXMgJiYgZXBvY2hTZWNvbmRzKCkgPj0gdGhpcy5leHBpcmVzO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRva2VucztcbiIsImltcG9ydCBjbG91ZHNjcmFwZXIgZnJvbSAnY2xvdWRzY3JhcGVyJztcbmltcG9ydCBjdXN0b21IZWFkZXJzIGZyb20gJy4uL2hlYWRlcnMnO1xuaW1wb3J0IGVuZHBvaW50cyBmcm9tICcuLi9hcGkvZW5kcG9pbnRzJztcbmltcG9ydCB7IGNvbmZpZ0VuYWJsZWQgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IFRva2VucyBmcm9tICcuLi9jb3JlL3Rva2Vucyc7XG5cbmNvbnN0IFtIVFRQX09LLCBIVFRQX0NSRUFURURdID0gWzIwMCwgMjAxXTtcblxuLypcbiAqIENvbXBsZXRlIHRoZSBVUkwgYnkgZmlsbGluZyB0aGUgcGFyYW1ldGVyIHBsYWNlaG9sZGVycyB3aXRoIHRoZVxuICogZGF0YSBhcmd1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIGZpbmFsaXplUmVxdWVzdChlbmRwb2ludCwgZGF0YSkge1xuICAvLyBNYWtlIGEgY29weSBzbyB3ZSBkb24ndCBtb2RpZnkgdGhlIG9yaWdpbmFsIG9uZS5cbiAgY29uc3QgcGFyYW1zID0geyAuLi5kYXRhIH07XG4gIGxldCB7IHVybCB9ID0gZW5kcG9pbnQ7XG5cbiAgLy8gTm8gbmVlZCB0byBkbyBhbnl0aGluZyBpZiB0aGUgVVJMIGlzIHN0YXRpYyAobm8gcGFyYW1ldGVycylcbiAgaWYgKGVuZHBvaW50LnBhcmFtZXRlcnMpIHtcbiAgICAvLyBTd2FwIGFsbCB0aGUgcGFyYW1ldGVyIHBsYWNlaG9sZGVycyB3aXRoIHRoZSBhcmd1bWVudHMuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IE9iamVjdC5rZXlzKGVuZHBvaW50LnBhcmFtZXRlcnMpLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgcGFyYW1ldGVyTmFtZSA9IGVuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdO1xuXG4gICAgICAvLyB3ZSBoYXZlIHRvIGV4cGxpY2l0bHkgY2hlY2sgZm9yIG51bGwgYW5kIHVuZGVmaW5lZCBzaW5jZSBwYXJhbWV0ZXJcbiAgICAgIC8vIHZhbHVlcyBtaWdodCBiZSAwLlxuICAgICAgaWYgKHBhcmFtc1twYXJhbWV0ZXJOYW1lXSA9PT0gbnVsbCB8fCBwYXJhbXNbcGFyYW1ldGVyTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVSTCBwYXJhbWV0ZXIgJyR7cGFyYW1ldGVyTmFtZX0nIG1pc3NpbmchYCk7XG4gICAgICB9XG5cbiAgICAgIC8qXG4gICAgICAgICogUGFyYW1ldGVycyBzdXJyb3VuZGVkIHdpdGggY3VybHkgYnJhY2VzIChlLmcuLCB7Mn0pIGFyZSBzaW1wbGUgdmFsdWUgcmVwbGFjZW1lbnRzLFxuICAgICAgICAqIHdoaWxlIG9uZXMgc3Vycm91bmRlZCB3aXRoIHNxdWFyZSBicmFja2V0cyAoZS5nLiwgWzFdKSBhcmUgYXJyYXktdmFsdWUgcmVwbGFjZW1lbnRzLlxuICAgICAgICAqL1xuICAgICAgaWYgKHVybC5pbmRleE9mKGB7JHtpbmRleH19YCkgPj0gMCkge1xuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShgeyR7aW5kZXh9fWAsIHBhcmFtc1tlbmRwb2ludC5wYXJhbWV0ZXJzW2luZGV4XV0pO1xuICAgICAgfSBlbHNlIGlmICh1cmwuaW5kZXhPZihgWyR7aW5kZXh9XWApID49IDApIHtcbiAgICAgICAgLy8gZXh0cmFjdCBxdWVyeSBwYXJhbWV0ZXIgbmFtZSBhbmQgdGhlIGFycmF5IG9mIHZhbHVlc1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtTmFtZSA9IGVuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBwYXJhbXNbcXVlcnlQYXJhbU5hbWVdO1xuXG4gICAgICAgIC8vIENvbnN0cnVjdCB0aGUgcXVlcnlQYXJhbSB1c2luZyBldmVyeSB2YWx1ZSBpbiB0aGUgdmFsdWVzIGFycmF5LlxuICAgICAgICAvLyBIZXJlIGlzIGFuIGV4YW1wbGUgb2Ygd2hhdCBxdWVyeVBhcmFtIGVuZHMgdXAgYmVpbmc6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIHF1ZXJ5UGFyYW1OYW1lID0gJ3R5cGUnXG4gICAgICAgIC8vIHZhbHVlcyA9IFsnYnV5JywgJ3NlbGwnLCAnZGl2aWRlbmQnXVxuICAgICAgICAvLyBxdWVyeVBhcmFtID0gJ3R5cGU9YnV5JnR5cGU9c2VsbCZ0eXBlPWRpdmlkZW5kJ1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtID0gdmFsdWVzLm1hcCgodmFsdWUpID0+IGAke3F1ZXJ5UGFyYW1OYW1lfT0ke3ZhbHVlfWApLmpvaW4oJyYnKTtcblxuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShgWyR7aW5kZXh9XWAsIHF1ZXJ5UGFyYW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNYWxmb3JtZWQgVVJMISBUaGlzIGlzIGFuIGludGVybmFsIGVycm9yOiByYWlzZSBhbiBpc3N1ZSEnKTtcbiAgICAgIH1cblxuICAgICAgLy8gTXVzdCByZW1vdmUgdGhpcyBrZXkgZnJvbSB0aGUgcGF5bG9hZCBhcyBpdCBoYXMgYmVlbiBjb25zdW1lZCBieSB0aGUgVVJMXG4gICAgICBkZWxldGUgcGFyYW1zW2VuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdXTtcbiAgICB9XG4gIH1cblxuICAvLyBObyBwYXlsb2FkIGF0dGFjaGVkIHRvIEdFVC9ERUxFVEUgcmVxdWVzdHNcbiAgaWYgKFsnR0VUJywgJ0hFQUQnXS5pbmNsdWRlcyhlbmRwb2ludC5tZXRob2QpKSB7XG4gICAgcmV0dXJuIHsgdXJsLCBwYXlsb2FkOiB1bmRlZmluZWQgfTtcbiAgfVxuXG4gIHJldHVybiB7IHVybCwgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkocGFyYW1zKSB9O1xufVxuXG5jbGFzcyBIdHRwc1dvcmtlciB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgSHR0cHNXb3JrZXIgd2l0aCBpdHMgb3duIGF1dGhlbnRpY2F0aW9uIHN0YXRlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50b2tlbnMgPSBuZXcgVG9rZW5zKCk7XG5cbiAgICAvLyBhdXRoZW50aWNhdGlvbiBldmVudHNcbiAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgIG90cDogbnVsbCxcbiAgICAgIHJlZnJlc2g6IG51bGwsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHRvIHJ1biBvbiBhIGNlcnRhaW4gZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnQgVGhlIHRyaWdnZXIgZm9yIHRoZSBmdW5jdGlvblxuICAgKiBAcGFyYW0geyp9IGhhbmRsZXIgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAqL1xuICBvbihldmVudCwgaGFuZGxlcikge1xuICAgIGlmICghKGV2ZW50IGluIHRoaXMuZXZlbnRzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBhdXRoZW50aWNhdGlvbiBldmVudCAnJHtldmVudH0nIWApO1xuICAgIH1cblxuICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IGhhbmRsZXI7XG4gIH1cblxuICAvKlxuICAgKiBJbXBsZW1lbnRzIHRoZSBuZXR3b3JrIGxldmVsIHByb3RvY29sIGZvciB0YWxraW5nIHRvIHRoZVxuICAgKiBXZWFsdGhzaW1wbGUgVHJhZGUgSFRUUFMgQVBJLlxuICAgKi9cbiAgYXN5bmMgdGFsayhlbmRwb2ludCwgZGF0YSkge1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfTtcblxuICAgIGlmIChlbmRwb2ludC5hdXRoZW50aWNhdGVkKSB7XG4gICAgICAvLyBubyBhY2Nlc3MgdG9rZW4gbWVhbnMgd2Ugd2lsbCBwcmVtYXR1cmVseSBmYWlsIHRoZSByZXF1ZXN0IGJlY2F1c2VcbiAgICAgIC8vIHRoaXMgaXMgYSBwcml2aWxlZ2VkIGVuZHBvaW50LlxuICAgICAgaWYgKCF0aGlzLnRva2Vucy5hY2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdXRoZW50aWNhdGlvbiByZXF1aXJlZCBmb3IgJyR7ZW5kcG9pbnQudXJsfSdgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbmZpZ0VuYWJsZWQoJ2ltcGxpY2l0X3Rva2VuX3JlZnJlc2gnKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmltcGxpY2l0VG9rZW5SZWZyZXNoKCk7XG4gICAgICB9XG5cbiAgICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IHRoaXMudG9rZW5zLmFjY2VzcztcbiAgICB9XG5cbiAgICAvLyBBcHBseSBhbGwgY3VzdG9tIGhlYWRlcnNcbiAgICBjdXN0b21IZWFkZXJzLnZhbHVlcygpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4geyBoZWFkZXJzW2tleV0gPSB2YWx1ZTsgfSk7XG5cbiAgICAvLyBmaWxsIHBhdGggYW5kIHF1ZXJ5IHBhcmFtZXRlcnMgaW4gdGhlIFVSTFxuICAgIGNvbnN0IHsgdXJsLCBwYXlsb2FkIH0gPSBmaW5hbGl6ZVJlcXVlc3QoZW5kcG9pbnQsIGRhdGEpO1xuXG4gICAgLy8gV2VhbHRoc2ltcGxlIGVuZHBvaW50cyBhcmUgcHJvdGVjdGVkIGJ5IENsb3VkZmxhcmUuXG4gICAgLy8gVGhlIGNsb3Vkc2NyYXBlciBsaWJyYXJ5IHRha2VzIGNhcmUgb2YgdGhlIENsb3VkZmxhcmUgY2hhbGxlbmdlc1xuICAgIC8vIHdoaWxlIGFsc28gZXhlY3V0aW5nIG91ciByZXF1ZXN0XG4gICAgbGV0IHJlc3BvbnNlID0gbnVsbDtcbiAgICBhd2FpdCBjbG91ZHNjcmFwZXIoe1xuICAgICAgdXJsLFxuICAgICAgYm9keTogcGF5bG9hZCxcbiAgICAgIG1ldGhvZDogZW5kcG9pbnQubWV0aG9kLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGNhbGxiYWNrOiAodW51c2VkLCByZXMpID0+IHtcbiAgICAgICAgLy8gU2F2ZSB0aGUgSFRUUCByZXNwb25zZVxuICAgICAgICByZXNwb25zZSA9IHJlcztcbiAgICAgIH0sXG4gICAgfSkuY2F0Y2goKCkgPT4geyB9KTtcblxuICAgIHRyeSB7XG4gICAgICByZXNwb25zZS5ib2R5ID0gSlNPTi5wYXJzZShyZXNwb25zZS5ib2R5KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gaXQncyBub3QgSlNPTiwgYnV0IHRoYXQncyBmaW5lLiBXZSBkb24ndCBkbyBhbnl0aGluZ1xuICAgICAgLy8gZm9yIG5vdy5cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cblxuICAvKlxuICAgKiBGdWxmaWxsIHRoZSBlbmRwb2ludCByZXF1ZXN0IGdpdmVuIHRoZSBlbmRwb2ludCBjb25maWd1cmF0aW9uLCBvcHRpb25hbFxuICAgKiBkYXRhLlxuICAgKi9cbiAgYXN5bmMgaGFuZGxlUmVxdWVzdChlbmRwb2ludCwgZGF0YSkge1xuICAgIC8vIFN1Ym1pdCB0aGUgSFRUUCByZXF1ZXN0IHRvIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgU2VydmVyc1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy50YWxrKGVuZHBvaW50LCBkYXRhKTtcblxuICAgIGlmIChbSFRUUF9PSywgSFRUUF9DUkVBVEVEXS5pbmNsdWRlcyhyZXNwb25zZS5zdGF0dXNDb2RlKSkge1xuICAgICAgcmV0dXJuIGVuZHBvaW50Lm9uU3VjY2VzcyhyZXNwb25zZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVuZHBvaW50Lm9uRmFpbHVyZShyZXNwb25zZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGVtcHRzIHRvIGVzdGFibGlzaCBhIHNlc3Npb24gZm9yIHRoZSBwcm92aWRlZCBlbWFpbCBhbmQgcGFzc3dvcmQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZW1haWwgZW1haWxlZCByZWdpc3RlcmVkIGJ5IHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHBhc3N3b3JkIFRoZSBwYXNzd29yZCBvZiB0aGUgYWNjb3VudFxuICAgKi9cbiAgYXN5bmMgbG9naW4oZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgbGV0IHJlc3BvbnNlID0gbnVsbDtcblxuICAgIC8qXG4gICAgICogSWYgd2UgYXJlIGdpdmVuIGEgZnVuY3Rpb24gZm9yIG90cCwgdGhlbiB3ZSBtdXN0IGZhaWwgYSBsb2cgaW4gdG9cbiAgICAgKiB0cmlnZ2VyIGFuIE9UUCBldmVudCB3aXRoIFdlYWx0aHNpbXBsZSBUcmFkZS4gVGhpcyB3aWxsIGFsbG93IHRoZSB1c2VyXG4gICAgICogb3RwIHRodW5rIHRvIHJldHJpZXZlIHRoZSBjb2RlLlxuICAgICAqXG4gICAgICogSWYgYSBsaXRlcmFsIHZhbHVlIGlzIHByb3ZpZGVkIGZvciBvdHAsIGl0IG1lYW5zIHRoZSB1c2VyIGhhcyBtYW51YWxseVxuICAgICAqIHByb3ZpZGVkIHVzIHdpdGggdGhlIG90cCBjb2RlLiBXZSBjYW4gc2tpcCB0aGlzIGxvZ2luIGF0dGVtcHQuXG4gICAgICovXG4gICAgaWYgKHR5cGVvZiAodGhpcy5ldmVudHMub3RwKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5MT0dJTiwge1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICB9KS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIH1cblxuICAgIC8vIFRyeSB0byBsb2cgaW4gZm9yIHJlYWwgdGhpcyB0aW1lLlxuICAgIHRyeSB7XG4gICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuTE9HSU4sIHtcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHBhc3N3b3JkLFxuICAgICAgICBvdHA6IHR5cGVvZiAodGhpcy5ldmVudHMub3RwKSA9PT0gJ2Z1bmN0aW9uJyA/IGF3YWl0IHRoaXMuZXZlbnRzLm90cCgpIDogdGhpcy5ldmVudHMub3RwLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IEF1dGhTdWNjZXNzT1RQRmFpbCA9IGVycm9yLmhlYWRlcnMgJiYgZXJyb3IuaGVhZGVycy5pbmRleE9mKCd4LXdlYWx0aHNpbXBsZS1vdHAtcmVxdWlyZWQnKSA+IC0xO1xuXG4gICAgICBpZiAoQXV0aFN1Y2Nlc3NPVFBGYWlsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGlmaWNhdGlvbiBzdWNjZXNzZnVsIGJ1dCBPVFAgaXMgbWlzc2luZyEnKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBjcmVkZW50aWFscyBvciB3cm9uZyBPVFAhJyk7XG4gICAgfVxuXG4gICAgLy8gQ2FwdHVyZSB0aGUgdG9rZW5zIGZvciBsYXRlciB1c2FnZS5cbiAgICB0aGlzLnRva2Vucy5zdG9yZShyZXNwb25zZS50b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idGFpbiBhIG5ldyBzZXQgb2YgYXV0aGVudGljYXRpb24gdG9rZW5zIHVzaW5nIHRoZVxuICAgKiBleGlzdGluZyByZWZyZXNoIHRva2VuLlxuICAgKlxuICAgKiBJZiB3ZSBhcmUgZ2l2ZW4gYSBmdW5jdGlvbiBmb3IgcmVmcmVzaCwgY2FsbCB0aGF0IGZ1bmN0aW9uXG4gICAqIHdpdGggdGhlIHJlZnJlc2hlZCB0b2tlbnMuXG4gICAqL1xuICBhc3luYyByZWZyZXNoQXV0aGVudGljYXRpb24oKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlJFRlJFU0gsIHtcbiAgICAgIHJlZnJlc2hfdG9rZW46IHRoaXMudG9rZW5zLnJlZnJlc2gsXG4gICAgfSk7XG5cbiAgICB0aGlzLnRva2Vucy5zdG9yZShyZXNwb25zZS50b2tlbnMpO1xuICAgIHRyeSB7XG4gICAgICAvLyBhbmQgY2FsbCB0aGUgaGFuZGxlciBmb3IgdGhpcyBldmVudCBpZiB3ZSBoYXZlIG9uZVxuICAgICAgaWYgKHR5cGVvZiAodGhpcy5ldmVudHMucmVmcmVzaCkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5ldmVudHMucmVmcmVzaCh0aGlzLnRva2Vucyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFRoZSBoYW5kbGVyIGhhZCBhbiBpc3N1ZVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBpbiBhdXRoLm9uKCkgaGFuZGxlciBmb3IgJ3JlZnJlc2gnOiAke2Vycm9yfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgZXhpc3Rpbmcgc2V0IG9mIHRva2VucyBoYXZlIGV4cGlyZWQsIGF1dG9tYXRpY2FsbHlcbiAgICogdHJpZ2dlcmluZyBhIHJlZnJlc2ggaWYgdGhleSBoYXZlIGV4cGlyZWQuXG4gICAqL1xuICBhc3luYyBpbXBsaWNpdFRva2VuUmVmcmVzaCgpIHtcbiAgICBpZiAodGhpcy50b2tlbnMuZXhwaXJlZCgpKSB7XG4gICAgICBpZiAodGhpcy50b2tlbnMucmVmcmVzaCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIExldCdzIGltcGxpY2l0bHkgcmVmcmVzaCB0aGUgYWNjZXNzIHRva2VuIHVzaW5nIHRoZSByZWZyZXNoIHRva2VuLlxuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEF1dGhlbnRpY2F0aW9uKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gVGhlIHJlZnJlc2ggdG9rZW4gaXMgbm90IHZhbGlkLlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHJlZnJlc2ggZXhwaXJlZCB0b2tlbjogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2UgYXJlIGZvcmNlZCB0byByZWplY3QgYXMgb3VyIGFjY2VzcyB0b2tlbiBoYXMgZXhwaXJlZCBhbmQgd2VcbiAgICAgICAgLy8gZG8gbm90IGhhdmUgYSByZWZyZXNoIHRva2VuLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjY2VzcyB0b2tlbiBleHBpcmVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEh0dHBzV29ya2VyO1xuIiwiaW1wb3J0IGVuZHBvaW50cyBmcm9tICcuL2FwaS9lbmRwb2ludHMnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuL2NvcmUvdGlja2VyJztcblxuLy8gVGhlIG1heGltdW0gbnVtYmVyIG9mIG9yZGVycyByZXRyaWV2ZWQgYnkgdGhlIC9vcmRlcnMgQVBJLlxuY29uc3QgT1JERVJTX1BFUl9QQUdFID0gMjA7XG5cbmNvbnN0IGlzQ2FuYWRpYW5TZWN1cml0eSA9IChleGNoYW5nZSkgPT4gWydUU1gnLCAnVFNYLVYnXS5pbmNsdWRlcyhleGNoYW5nZSk7XG5cbi8qXG4gKiBSZXRyaWV2ZSBmaWx0ZXJlZCBvcmRlcnMgYnkgdGlja2VyIGFuZCBzdGF0dXMuXG4gKi9cbmZ1bmN0aW9uIGZpbHRlcmVkT3JkZXJzKGxpc3QsIHRpY2tlciwgc3RhdHVzKSB7XG4gIGNvbnN0IG9yZGVyRmlsdGVyID0gKG9yZGVyKSA9PiB7XG4gICAgaWYgKHRpY2tlcikge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3IFRpY2tlcih7IHN5bWJvbDogb3JkZXIuc3ltYm9sLCBpZDogb3JkZXIuc2VjdXJpdHlfaWQgfSk7XG4gICAgICAvLyBvcmRlciBvYmplY3RzIGRvbid0IGluY2x1ZGUgZXhjaGFuZ2VzLCBzbyB3ZSBhcmUgdW5hYmxlIHRvIG1ha2VcbiAgICAgIC8vIGEgc3Ryb25nIGNvbXBhcmlzb24gd2l0aG91dCByZXF1aXJpbmcgYSBsaW5lYXIgaW5jcmVhc2Ugb2ZcbiAgICAgIC8vIGVuZHBvaW50IGNhbGxzICh3aGljaCBpcyBub3QgcmVhc29uYWJsZSkuXG4gICAgICAvL1xuICAgICAgLy8gVGhlIHVzZXIgc2hvdWxkIHByb3ZpZGUgdGhlIHNlY3VyaXR5IGlkIGZvciBhIHN0cm9uZyBjb21wYXJpc29uIGhlcmUuXG4gICAgICBpZiAoIW5ldyBUaWNrZXIodGlja2VyKS53ZWFrRXF1YWxzKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvcmRlci5zdGF0dXMgPT09IHN0YXR1cztcbiAgfTtcblxuICAvLyBBcHBseSBmaWx0ZXIgdG8gdGhlIHJlc3VsdFxuICBjb25zdCBmaWx0ZXJlZCA9IGxpc3Qub3JkZXJzLmZpbHRlcihvcmRlckZpbHRlcik7XG5cbiAgcmV0dXJuIHtcbiAgICBvcmRlcnM6IGZpbHRlcmVkLFxuICAgIHRvdGFsOiBmaWx0ZXJlZC5sZW5ndGgsXG4gIH07XG59XG5cbmNsYXNzIE9yZGVycyB7XG4gIC8qKlxuICAgKiBDcmVhdGV3IGEgbmV3IE9yZGVySGlzdG9yeSBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIGFuIEh0dHBzIHdvcmtlciBzdGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBodHRwc1dvcmtlclxuICAgKi9cbiAgY29uc3RydWN0b3IoaHR0cHNXb3JrZXIsIGRhdGEpIHtcbiAgICB0aGlzLndvcmtlciA9IGh0dHBzV29ya2VyO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gIH1cblxuICAvKipcbiAgICogQ29sbGVjdHMgb3JkZXJzIChmaWxsZWQsIHBlbmRpbmcsIGNhbmNlbGxlZCkgZm9yIHRoZSBwcm92aWRlZCBwYWdlIGFuZFxuICAgKiBhY2NvdW50IGlkLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSBwYWdlTnVtIFRoZSBvcmRlcnMgcGFnZSBpbmRleCB0byBzZWVrIHRvXG4gICAqL1xuICBhc3luYyBwYWdlKGFjY291bnRJZCwgcGFnZU51bSkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5PUkRFUlNfQllfUEFHRSwge1xuICAgICAgb2Zmc2V0OiAocGFnZU51bSAtIDEpICogT1JERVJTX1BFUl9QQUdFLFxuICAgICAgYWNjb3VudElkLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbGxlY3RzIGFsbCBvcmRlcnMgKGZpbGxlZCwgcGVuZGluZywgY2FuY2VsbGVkKSBmb3IgdGhlIHNwZWNpZmljIGFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgYXN5bmMgYWxsKGFjY291bnRJZCkge1xuICAgIC8vIFdlIHN0YXJ0IGJ5IGNhcHR1cmluZyB0aGUgZmlyc3QgcGFnZSBvZiBvcmRlcnMgaW4gb3JkZXIgdG9cbiAgICAvLyBkZXRlcm1pbmUgdGhlIG51bWJlciBvZiBwYWdlcyBhdmFpbGFibGVcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5wYWdlKGFjY291bnRJZCwgMSk7XG4gICAgY29uc3QgcGFnZXMgPSBNYXRoLmNlaWwoZGF0YS50b3RhbCAvIE9SREVSU19QRVJfUEFHRSk7XG5cbiAgICBpZiAocGFnZXMgPiAxKSB7XG4gICAgICBjb25zdCB0YXNrcyA9IFtdO1xuXG4gICAgICAvLyBCdWlsZCB0aGUgdGFzayBxdWV1ZSB0aGF0IHdpbGwgcmV0cmlldmUgdGhlIHJlbWFpbmluZyBwYWdlcyBvZiBvcmRlcnNcbiAgICAgIGZvciAobGV0IHBhZ2VOdW0gPSAyOyBwYWdlTnVtIDw9IHBhZ2VzOyBwYWdlTnVtKyspIHtcbiAgICAgICAgdGFza3MucHVzaCh0aGlzLnBhZ2UoYWNjb3VudElkLCBwYWdlTnVtKS50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5vcmRlcnMpKTtcbiAgICAgIH1cblxuICAgICAgLy8gT3V0LW9mLW9yZGVyIGludm9jYXRpb24gaXMgZGVzaXJlZC4gV2hhdCBtYXR0ZXJzIGlzIHRoYXQgUHJvbWlzZS5hbGwgd2lsbFxuICAgICAgLy8gZ3VhcmFudGVlIHRoYXQgdGhlIGRhdGEgb3JkZXIgaXMgcHJlc2VydmVkLlxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5hbGwodGFza3MpO1xuICAgICAgcmVzdWx0LmZvckVhY2goKGxpc3QpID0+IGRhdGEub3JkZXJzLnB1c2goLi4ubGlzdCkpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHRvdGFsIGF0dHJpYnV0ZSB0byByZWZsZWN0IHRoZSBuZXcgc2l6ZVxuICAgICAgZGF0YS50b3RhbCA9IGRhdGEub3JkZXJzLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgcGVuZGluZyBvcmRlcnMgZm9yIHRoZSBzcGVjaWZpZWQgc2VjdXJpdHkgaW4gdGhlIGFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHRpY2tlciAob3B0aW9uYWwpIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICovXG4gIGFzeW5jIHBlbmRpbmcoYWNjb3VudElkLCB0aWNrZXIpIHtcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCB0aGlzLmFsbChhY2NvdW50SWQpO1xuICAgIHJldHVybiBmaWx0ZXJlZE9yZGVycyhvcmRlcnMsIHRpY2tlciwgJ3N1Ym1pdHRlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBmaWxsZWQgb3JkZXJzIGZvciB0aGUgc3BlY2lmaWVkIHNlY3VyaXR5IGluIHRoZSBhY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgKG9wdGlvbmFsKSBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqL1xuICBhc3luYyBmaWxsZWQoYWNjb3VudElkLCB0aWNrZXIpIHtcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCB0aGlzLmFsbChhY2NvdW50SWQpO1xuICAgIHJldHVybiBmaWx0ZXJlZE9yZGVycyhvcmRlcnMsIHRpY2tlciwgJ3Bvc3RlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBjYW5jZWxsZWQgb3JkZXJzIGZvciB0aGUgc3BlY2lmaWVkIHNlY3VyaXR5IGluIHRoZSBhY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgKG9wdGlvbmFsKSBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqL1xuICBhc3luYyBjYW5jZWxsZWQoYWNjb3VudElkLCB0aWNrZXIpIHtcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCB0aGlzLmFsbChhY2NvdW50SWQpO1xuICAgIHJldHVybiBmaWx0ZXJlZE9yZGVycyhvcmRlcnMsIHRpY2tlciwgJ2NhbmNlbGxlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgdGhlIHBlbmRpbmcgb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBvcmRlciBpZC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBvcmRlcklkIFRoZSBwZW5kaW5nIG9yZGVyIHRvIGNhbmNlbFxuICAgKi9cbiAgYXN5bmMgY2FuY2VsKG9yZGVySWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb3JkZXI6IG9yZGVySWQsXG4gICAgICByZXNwb25zZTogYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuQ0FOQ0VMX09SREVSLCB7IG9yZGVySWQgfSksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIGFsbCBwZW5kaW5nIG9yZGVycyB1bmRlciB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIEFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgYXN5bmMgY2FuY2VsUGVuZGluZyhhY2NvdW50SWQpIHtcbiAgICBjb25zdCBwZW5kaW5nID0gYXdhaXQgdGhpcy5wZW5kaW5nKGFjY291bnRJZCk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHBlbmRpbmcub3JkZXJzLm1hcChhc3luYyAob3JkZXIpID0+IHRoaXMuY2FuY2VsKG9yZGVyLm9yZGVyX2lkKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcmtldCBidXkgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBwdXJjaGFzZVxuICAgKi9cbiAgYXN5bmMgbWFya2V0QnV5KGFjY291bnRJZCwgdGlja2VyLCBxdWFudGl0eSkge1xuICAgIGNvbnN0IGRldGFpbHMgPSBhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyLCB0cnVlKTtcblxuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IGRldGFpbHMuaWQsXG4gICAgICBsaW1pdF9wcmljZTogIShuZXcgVGlja2VyKHRpY2tlcikuY3J5cHRvKSA/IGRldGFpbHMucXVvdGUuYW1vdW50IDogdW5kZWZpbmVkLFxuICAgICAgcXVhbnRpdHksXG4gICAgICBvcmRlcl90eXBlOiAnYnV5X3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnbWFya2V0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZyYWN0aW9uYWwgYnV5IGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBtYXJrZXRWYWx1ZSBUaGUgcHJpY2Ugb2Ygc2VjdXJpdGllcyB0byBwdXJjaGFzZVxuICAgKi9cbiAgYXN5bmMgZnJhY3Rpb25hbEJ1eShhY2NvdW50SWQsIHRpY2tlciwgbWFya2V0VmFsdWUpIHtcbiAgICAvLyBjb25zdCBkZXRhaWxzID0gYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlciwgdHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgICBzZWN1cml0eV9pZDogKGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpKS5pZCxcbiAgICAgIG1hcmtldF92YWx1ZTogbWFya2V0VmFsdWUsXG4gICAgICBvcmRlcl90eXBlOiAnYnV5X3ZhbHVlJyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnZnJhY3Rpb25hbCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW1pdCBidXkgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IGxpbWl0IFRoZSBtYXhpbXVtIHByaWNlIHRvIHB1cmNoYXNlIHRoZSBzZWN1cml0eSBhdFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBwdXJjaGFzZVxuICAgKi9cbiAgYXN5bmMgbGltaXRCdXkoYWNjb3VudElkLCB0aWNrZXIsIGxpbWl0LCBxdWFudGl0eSkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IChhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyKSkuaWQsXG4gICAgICBsaW1pdF9wcmljZTogbGltaXQsXG4gICAgICBxdWFudGl0eSxcbiAgICAgIG9yZGVyX3R5cGU6ICdidXlfcXVhbnRpdHknLFxuICAgICAgb3JkZXJfc3ViX3R5cGU6ICdsaW1pdCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIGxpbWl0IGJ1eSBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gc3RvcCBUaGUgcHJpY2UgYXQgd2hpY2ggdGhlIG9yZGVyIGNvbnZlcnRzIHRvIGEgbGltaXQgb3JkZXJcbiAgICogQHBhcmFtIHsqfSBsaW1pdCBUaGUgbWF4aW11bSBwcmljZSB0byBwdXJjaGFzZSB0aGUgc2VjdXJpdHkgYXRcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gcHVyY2hhc2VcbiAgICovXG4gIGFzeW5jIHN0b3BMaW1pdEJ1eShhY2NvdW50SWQsIHRpY2tlciwgc3RvcCwgbGltaXQsIHF1YW50aXR5KSB7XG4gICAgY29uc3Qgc2VjdXJpdHkgPSBhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyKTtcblxuICAgIC8vIFRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYmFja2VuZCBkb2Vzbid0IGNoZWNrIGZvciB0aGlzLCBldmVuIHRob3VnaCB0aGUgYXBwIGRvZXMuLlxuICAgIGlmIChpc0NhbmFkaWFuU2VjdXJpdHkoc2VjdXJpdHkuc3RvY2sucHJpbWFyeV9leGNoYW5nZSkgJiYgc3RvcCAhPT0gbGltaXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVFNYL1RTWC1WIHNlY3VyaXRpZXMgbXVzdCBoYXZlIGFuIGVxdWl2YWxlbnQgc3RvcCBhbmQgbGltaXQgcHJpY2UuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgICBzZWN1cml0eV9pZDogc2VjdXJpdHkuaWQsXG4gICAgICBzdG9wX3ByaWNlOiBzdG9wLFxuICAgICAgbGltaXRfcHJpY2U6IGxpbWl0LFxuICAgICAgcXVhbnRpdHksXG4gICAgICBvcmRlcl90eXBlOiAnYnV5X3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnc3RvcF9saW1pdCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJrZXQgc2VsbCBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHB1cmNoYXNlXG4gICAqL1xuICBhc3luYyBtYXJrZXRTZWxsKGFjY291bnRJZCwgdGlja2VyLCBxdWFudGl0eSkge1xuICAgIGNvbnN0IGRldGFpbHMgPSBhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyLCB0cnVlKTtcblxuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IGRldGFpbHMuaWQsXG4gICAgICBtYXJrZXRfdmFsdWU6ICEobmV3IFRpY2tlcih0aWNrZXIpLmNyeXB0bykgPyBkZXRhaWxzLnF1b3RlLmFtb3VudCA6IHVuZGVmaW5lZCxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ3NlbGxfcXVhbnRpdHknLFxuICAgICAgb3JkZXJfc3ViX3R5cGU6ICdtYXJrZXQnLFxuICAgICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTGltaXQgc2VsbCBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gbGltaXQgVGhlIG1pbmltdW0gcHJpY2UgdG8gc2VsbCB0aGUgc2VjdXJpdHkgYXRcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gc2VsbFxuICAgKi9cbiAgYXN5bmMgbGltaXRTZWxsKGFjY291bnRJZCwgdGlja2VyLCBsaW1pdCwgcXVhbnRpdHkpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiAoYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlcikpLmlkLFxuICAgICAgbGltaXRfcHJpY2U6IGxpbWl0LFxuICAgICAgcXVhbnRpdHksXG4gICAgICBvcmRlcl90eXBlOiAnc2VsbF9xdWFudGl0eScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ2xpbWl0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgbGltaXQgc2VsbCBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gc3RvcCBUaGUgcHJpY2UgYXQgd2hpY2ggdGhlIG9yZGVyIGNvbnZlcnRzIHRvIGEgbGltaXQgb3JkZXJcbiAgICogQHBhcmFtIHsqfSBsaW1pdCBUaGUgbWluaW11bSBwcmljZSB0byBzZWxsIHRoZSBzZWN1cml0eSBhdFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBzZWxsXG4gICAqL1xuICBhc3luYyBzdG9wTGltaXRTZWxsKGFjY291bnRJZCwgdGlja2VyLCBzdG9wLCBsaW1pdCwgcXVhbnRpdHkpIHtcbiAgICBjb25zdCBzZWN1cml0eSA9IGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpO1xuXG4gICAgLy8gVGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBiYWNrZW5kIGRvZXNuJ3QgY2hlY2sgZm9yIHRoaXMsIGV2ZW4gdGhvdWdoIHRoZSBhcHAgZG9lcy4uXG4gICAgaWYgKGlzQ2FuYWRpYW5TZWN1cml0eShzZWN1cml0eS5zdG9jay5wcmltYXJ5X2V4Y2hhbmdlKSAmJiBzdG9wICE9PSBsaW1pdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUU1gvVFNYLVYgc2VjdXJpdGllcyBtdXN0IGhhdmUgYW4gZXF1aXZhbGVudCBzdG9wIGFuZCBsaW1pdCBwcmljZS4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiBzZWN1cml0eS5pZCxcbiAgICAgIHN0b3BfcHJpY2U6IHN0b3AsXG4gICAgICBsaW1pdF9wcmljZTogbGltaXQsXG4gICAgICBxdWFudGl0eSxcbiAgICAgIG9yZGVyX3R5cGU6ICdzZWxsX3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnc3RvcF9saW1pdCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBPcmRlcnM7XG4iLCIvKipcbiAqIFRoZSBkZWZhdWx0IHByb3ZpZGVyIGZvciBxdW90ZXMgaXMgV2VhbHRoc2ltcGxlIFRyYWRlLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IChkYXRhKSA9PiAoe1xuXG4gIC8qKlxuICAgICAqIFF1b3RlIGZvciBhIHRpY2tlciBmcm9tIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgZW5kcG9pbnQuXG4gICAgICpcbiAgICAgKiBSZW1lbWJlciB0aGF0IHRoaXMgcXVvdGUgaXMgTk9UIHJlYWwtdGltZSFcbiAgICAgKi9cbiAgYXN5bmMgcXVvdGUodGlja2VyKSB7XG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IGRhdGEuZ2V0U2VjdXJpdHkodGlja2VyLCB0cnVlKTtcbiAgICByZXR1cm4gaW5mby5xdW90ZS5hbW91bnQ7XG4gIH0sXG59KTtcbiIsImltcG9ydCBUcmFkZVF1b3RlcyBmcm9tICcuL2RlZmF1bHQnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuLi9jb3JlL3RpY2tlcic7XG5pbXBvcnQgZW5kcG9pbnRzIGZyb20gJy4uL2FwaS9lbmRwb2ludHMnO1xuXG5jbGFzcyBRdW90ZXMge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBRdW90ZXMgb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gSFRUUFMgV29ya2VyIHN0YXRlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGh0dHBzV29ya2VyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihodHRwc1dvcmtlciwgZGF0YSkge1xuICAgIC8vIFdlYWx0aHNpbXBsZSBUcmFkZSBpcyBvdXIgZGVmYXVsdCBzb3VyY2UgZm9yIHF1b3RlcywgZGVzcGl0ZVxuICAgIC8vIGhhdmluZyBhIDE1IG1pbiBkZWxheVxuICAgIHRoaXMuZGVmYXVsdFByb3ZpZGVyID0gbmV3IFRyYWRlUXVvdGVzKGRhdGEpO1xuXG4gICAgLy8gTWFpbnRhaW5zIHF1b3RlIHByb3ZpZGVycyBvbiBhbiBleGNoYW5nZSBiYXNpc1xuICAgIHRoaXMucHJvdmlkZXJzID0ge307XG5cbiAgICB0aGlzLndvcmtlciA9IGh0dHBzV29ya2VyO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gIH1cblxuICAvKipcbiAgICAgKiBMb2FkIGEgY3VzdG9tIHByb3ZpZGVyIGZvciB0aGUgZXhjaGFuZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IGV4Y2hhbmdlIFRoZSBleGNoYW5nZSB0aGF0IHRoZSBwcm92aWRlciBmZXRjaGVzIHF1b3RlcyBmb3JcbiAgICAgKiBAcGFyYW0geyp9IHByb3ZpZGVyIFRoZSBwcm92aWRlciBvYmplY3QgY29udGFpbmluZyB0aGUgcXVvdGUoKSBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKi9cbiAgdXNlKGV4Y2hhbmdlLCBwcm92aWRlcikge1xuICAgIGlmICh0eXBlb2YgKHByb3ZpZGVyLnF1b3RlKSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gVGhlIHByb3ZpZGVyIG11c3QgaGF2ZSBhIHF1b3RlKCkgaW1wbGVtZW50YXRpb24gdGhhdCB3ZSBjYW4gY2FsbCBsYXRlciFcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBxdW90ZSBwcm92aWRlciBmb3IgJHtleGNoYW5nZX0hYCk7XG4gICAgfVxuXG4gICAgdGhpcy5wcm92aWRlcnNbZXhjaGFuZ2VdID0gcHJvdmlkZXI7XG4gIH1cblxuICAvKipcbiAgICAgKiBPYnRhaW5zIGEgcXVvdGUgZm9yIHRoZSB0aWNrZXIuIFRoZSBzb3VyY2Ugb2YgdGhlIHF1b3RlIG1heSBiZSBhIGN1c3RvbVxuICAgICAqIHByb3ZpZGVyIGlmIGEgdmFsaWQgcHJvdmlkZXIgaXMgcmVnaXN0ZXJlZCBmb3IgdGhlIGV4Y2hhbmdlIHRoYXQgdGhlXG4gICAgICogdGlja2VyIHRyYWRlcyBvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gc2VjdXJpdHkgVGhlIHNlY3VyaXR5IHRvIGdldCBhIHF1b3RlIGZvci5cbiAgICAgKi9cbiAgYXN5bmMgZ2V0KHNlY3VyaXR5KSB7XG4gICAgbGV0IGV4Y2hhbmdlID0gbnVsbDtcbiAgICBjb25zdCB0aWNrZXIgPSBuZXcgVGlja2VyKHNlY3VyaXR5KTtcblxuICAgIGlmICh0aWNrZXIuZXhjaGFuZ2UpIHtcbiAgICAgIC8vIFdlIG5lZWQgdGhlIGV4Y2hhbmdlIGluIHRoZSBuZXh0IHN0ZXAgaWYgdGhlIHVzZXIgaGFzIHNwZWNpZmllZFxuICAgICAgLy8gYSBjdXN0b20gcHJvdmlkZXIgZm9yIGFuIGV4Y2hhbmdlLiBTbyBpZiB0aGUgdXNlciBoYXNuJ3QgcHJvdmlkZWRcbiAgICAgIC8vIGl0LCB3ZSB3aWxsIGhhdmUgdG8gcGluZyBXZWFsdGhzaW1wbGUgdHJhZGUgdG8gZ2V0IGl0LlxuICAgICAgZXhjaGFuZ2UgPSB0aWNrZXIuZXhjaGFuZ2U7XG4gICAgfSBlbHNlIGlmICh0aWNrZXIuY3J5cHRvICYmIHRpY2tlci5pZCkge1xuICAgICAgLy8gSWYgdGhlIGlkIGlzIG9ubHkgZ2l2ZW4gYnV0IHdlIGtub3cgaXQncyBhIGNyeXB0byBpZCxcbiAgICAgIC8vIHdlIHdpbGwgYXV0b21hdGljYWxseSBzZXQgZXhjaGFuZ2UgdG8gJ0NDJy5cbiAgICAgIGV4Y2hhbmdlID0gJ0NDJztcbiAgICB9IGVsc2UgaWYgKE9iamVjdC5rZXlzKHRoaXMucHJvdmlkZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpbmZvID0gYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlciwgZmFsc2UpO1xuICAgICAgZXhjaGFuZ2UgPSBpbmZvLnN0b2NrLnByaW1hcnlfZXhjaGFuZ2U7XG4gICAgfVxuXG4gICAgLy8gQSBjdXN0b20gcHJvdmlkZXIgd2lsbCB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aGUgZGVmYXVsdCBzb3VyY2VcbiAgICBpZiAoZXhjaGFuZ2UgaW4gdGhpcy5wcm92aWRlcnMpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVyc1tleGNoYW5nZV0ucXVvdGUodGlja2VyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kZWZhdWx0UHJvdmlkZXIucXVvdGUodGlja2VyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGhpc3RvcmljYWwgcXVvdGVzIHdpdGhpbiBhIHNwZWNpZmllZCBpbnRlcnZhbCBmb3IgdGhlIHRpY2tlci5cbiAgICogVGhlIHNvdXJjZSBvZiB0aGUgaGlzdG9yaWNhbCBkYXRhIGlzIG5vdCBjdXN0b21pemFibGUgYXQgdGhpcyB0aW1lIGJlY2F1c2VcbiAgICogdGhlcmUgaXMgbm8gbmVlZCBmb3IgaXQgdG8gYmUgc28uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSB0aWNrZXIgdG8gc2VhcmNoIGhpc3RvcmljYWwgcXVvdGVzIGZvclxuICAgKiBAcGFyYW0geyp9IGludGVydmFsIFRoZSB0aW1lIHJhbmdlIG9mIHRoZSBxdW90ZXNcbiAgICovXG4gIGFzeW5jIGhpc3Rvcnkoc2VjdXJpdHksIGludGVydmFsKSB7XG4gICAgLy8gdmFsaWRhdGUgdGhlIHVzZXItZ2l2ZW4gc2VjdXJpdHlcbiAgICBjb25zdCB0aWNrZXIgPSBuZXcgVGlja2VyKHNlY3VyaXR5KTtcbiAgICBpZiAoIXRpY2tlci5pZCkge1xuICAgICAgdGlja2VyLmlkID0gKGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpKS5pZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUVVPVEVTX0hJU1RPUlksIHsgaWQ6IHRpY2tlci5pZCwgaW50ZXJ2YWwgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUXVvdGVzO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG52YXIgcnVudGltZSA9IChmdW5jdGlvbiAoZXhwb3J0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgT3AgPSBPYmplY3QucHJvdG90eXBlO1xuICB2YXIgaGFzT3duID0gT3AuaGFzT3duUHJvcGVydHk7XG4gIHZhciB1bmRlZmluZWQ7IC8vIE1vcmUgY29tcHJlc3NpYmxlIHRoYW4gdm9pZCAwLlxuICB2YXIgJFN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbCA6IHt9O1xuICB2YXIgaXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiO1xuICB2YXIgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCBcIkBAYXN5bmNJdGVyYXRvclwiO1xuICB2YXIgdG9TdHJpbmdUYWdTeW1ib2wgPSAkU3ltYm9sLnRvU3RyaW5nVGFnIHx8IFwiQEB0b1N0cmluZ1RhZ1wiO1xuXG4gIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci5cbiAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjtcbiAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXG4gICAgLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cbiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9XG4gIGV4cG9ydHMud3JhcCA9IHdyYXA7XG5cbiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uXG4gIC8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZFxuICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcbiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkXG4gIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcbiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWVcbiAgLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlXG4gIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcbiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLlxuICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gXCJzdXNwZW5kZWRTdGFydFwiO1xuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCA9IFwic3VzcGVuZGVkWWllbGRcIjtcbiAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcbiAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIjtcblxuICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG4gIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC5cbiAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTtcblxuICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmRcbiAgLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yXG4gIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG4gIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuXG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIC8vIFRoaXMgaXMgYSBwb2x5ZmlsbCBmb3IgJUl0ZXJhdG9yUHJvdG90eXBlJSBmb3IgZW52aXJvbm1lbnRzIHRoYXRcbiAgLy8gZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdC5cbiAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG4gIEl0ZXJhdG9yUHJvdG90eXBlW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gIHZhciBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTtcbiAgaWYgKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICYmXG4gICAgICBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAhPT0gT3AgJiZcbiAgICAgIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkpIHtcbiAgICAvLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZFxuICAgIC8vIG9mIHRoZSBwb2x5ZmlsbC5cbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlO1xuICB9XG5cbiAgdmFyIEdwID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlID1cbiAgICBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdwLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb247XG4gIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlW3RvU3RyaW5nVGFnU3ltYm9sXSA9XG4gICAgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBcIkdlbmVyYXRvckZ1bmN0aW9uXCI7XG5cbiAgLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGVcbiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC5cbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuICAgIFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgcHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgdmFyIGN0b3IgPSB0eXBlb2YgZ2VuRnVuID09PSBcImZ1bmN0aW9uXCIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiBjdG9yXG4gICAgICA/IGN0b3IgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8XG4gICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW5cbiAgICAgICAgLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LlxuICAgICAgICAoY3Rvci5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWUpID09PSBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgICAgIDogZmFsc2U7XG4gIH07XG5cbiAgZXhwb3J0cy5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gICAgICBpZiAoISh0b1N0cmluZ1RhZ1N5bWJvbCBpbiBnZW5GdW4pKSB7XG4gICAgICAgIGdlbkZ1blt0b1N0cmluZ1RhZ1N5bWJvbF0gPSBcIkdlbmVyYXRvckZ1bmN0aW9uXCI7XG4gICAgICB9XG4gICAgfVxuICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTtcbiAgICByZXR1cm4gZ2VuRnVuO1xuICB9O1xuXG4gIC8vIFdpdGhpbiB0aGUgYm9keSBvZiBhbnkgYXN5bmMgZnVuY3Rpb24sIGBhd2FpdCB4YCBpcyB0cmFuc2Zvcm1lZCB0b1xuICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdFxuICAvLyBgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzXG4gIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuXG4gIGV4cG9ydHMuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTtcbiAgfTtcblxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvciwgUHJvbWlzZUltcGwpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZztcbiAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGludm9rZShcIm5leHRcIiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCBlcnIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHtcbiAgICAgICAgICAvLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lc1xuICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZVxuICAgICAgICAgIC8vIGN1cnJlbnQgaXRlcmF0aW9uLlxuICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IHVud3JhcHBlZDtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWYgYSByZWplY3RlZCBQcm9taXNlIHdhcyB5aWVsZGVkLCB0aHJvdyB0aGUgcmVqZWN0aW9uIGJhY2tcbiAgICAgICAgICAvLyBpbnRvIHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gc28gaXQgY2FuIGJlIGhhbmRsZWQgdGhlcmUuXG4gICAgICAgICAgcmV0dXJuIGludm9rZShcInRocm93XCIsIGVycm9yLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykge1xuICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUltcGwoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9XG4gICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWxcbiAgICAgICAgLy8gYWxsIHByZXZpb3VzIFByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyBpbnZva2UsXG4gICAgICAgIC8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWZcbiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG9cbiAgICAgICAgLy8gY2FsbCBpbnZva2UgaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBvbiBhIGNhbGxiYWNrIHRvIGZpcmUsXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvXG4gICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHlcbiAgICAgICAgLy8gaXMgd2h5IHRoZSBQcm9taXNlIGNvbnN0cnVjdG9yIHN5bmNocm9ub3VzbHkgaW52b2tlcyBpdHNcbiAgICAgICAgLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGVcbiAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGFzeW5jIGdlbmVyYXRvcnMsIGl0IGlzIGVzcGVjaWFsbHlcbiAgICAgICAgLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLlxuICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihcbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxcbiAgICAgICAgICAvLyBBdm9pZCBwcm9wYWdhdGluZyBmYWlsdXJlcyB0byBQcm9taXNlcyByZXR1cm5lZCBieSBsYXRlclxuICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci5cbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZ1xuICAgICAgICApIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLlxuICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7XG4gIH1cblxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpO1xuICBBc3luY0l0ZXJhdG9yLnByb3RvdHlwZVthc3luY0l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgZXhwb3J0cy5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvcjtcblxuICAvLyBOb3RlIHRoYXQgc2ltcGxlIGFzeW5jIGZ1bmN0aW9ucyBhcmUgaW1wbGVtZW50ZWQgb24gdG9wIG9mXG4gIC8vIEFzeW5jSXRlcmF0b3Igb2JqZWN0czsgdGhleSBqdXN0IHJldHVybiBhIFByb21pc2UgZm9yIHRoZSB2YWx1ZSBvZlxuICAvLyB0aGUgZmluYWwgcmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBpdGVyYXRvci5cbiAgZXhwb3J0cy5hc3luYyA9IGZ1bmN0aW9uKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0LCBQcm9taXNlSW1wbCkge1xuICAgIGlmIChQcm9taXNlSW1wbCA9PT0gdm9pZCAwKSBQcm9taXNlSW1wbCA9IFByb21pc2U7XG5cbiAgICB2YXIgaXRlciA9IG5ldyBBc3luY0l0ZXJhdG9yKFxuICAgICAgd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCksXG4gICAgICBQcm9taXNlSW1wbFxuICAgICk7XG5cbiAgICByZXR1cm4gZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG4gICAgICA/IGl0ZXIgLy8gSWYgb3V0ZXJGbiBpcyBhIGdlbmVyYXRvciwgcmV0dXJuIHRoZSBmdWxsIGl0ZXJhdG9yLlxuICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuICAgICAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHtcbiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZykge1xuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHRocm93IGFyZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6XG4gICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcbiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5tZXRob2QgPSBtZXRob2Q7XG4gICAgICBjb250ZXh0LmFyZyA9IGFyZztcblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgdmFyIGRlbGVnYXRlUmVzdWx0ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG4gICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQgPT09IENvbnRpbnVlU2VudGluZWwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAvLyBTZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgICAgIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZztcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmFyZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgY29udGV4dC5hcmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUV4ZWN1dGluZztcblxuICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIikge1xuICAgICAgICAgIC8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT1cbiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uXG4gICAgICAgICAgc3RhdGUgPSBjb250ZXh0LmRvbmVcbiAgICAgICAgICAgID8gR2VuU3RhdGVDb21wbGV0ZWRcbiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtcblxuICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5hcmcsXG4gICAgICAgICAgICBkb25lOiBjb250ZXh0LmRvbmVcbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIGV4Y2VwdGlvbiBieSBsb29waW5nIGJhY2sgYXJvdW5kIHRvIHRoZVxuICAgICAgICAgIC8vIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIENhbGwgZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdKGNvbnRleHQuYXJnKSBhbmQgaGFuZGxlIHRoZVxuICAvLyByZXN1bHQsIGVpdGhlciBieSByZXR1cm5pbmcgYSB7IHZhbHVlLCBkb25lIH0gcmVzdWx0IGZyb20gdGhlXG4gIC8vIGRlbGVnYXRlIGl0ZXJhdG9yLCBvciBieSBtb2RpZnlpbmcgY29udGV4dC5tZXRob2QgYW5kIGNvbnRleHQuYXJnLFxuICAvLyBzZXR0aW5nIGNvbnRleHQuZGVsZWdhdGUgdG8gbnVsbCwgYW5kIHJldHVybmluZyB0aGUgQ29udGludWVTZW50aW5lbC5cbiAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF07XG4gICAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3dcbiAgICAgIC8vIG1ldGhvZCBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuXG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgLy8gTm90ZTogW1wicmV0dXJuXCJdIG11c3QgYmUgdXNlZCBmb3IgRVMzIHBhcnNpbmcgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgaWYgKGRlbGVnYXRlLml0ZXJhdG9yW1wicmV0dXJuXCJdKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBhIHJldHVybiBtZXRob2QsIGdpdmUgaXQgYVxuICAgICAgICAgIC8vIGNoYW5jZSB0byBjbGVhbiB1cC5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG5cbiAgICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgLy8gSWYgbWF5YmVJbnZva2VEZWxlZ2F0ZShjb250ZXh0KSBjaGFuZ2VkIGNvbnRleHQubWV0aG9kIGZyb21cbiAgICAgICAgICAgIC8vIFwicmV0dXJuXCIgdG8gXCJ0aHJvd1wiLCBsZXQgdGhhdCBvdmVycmlkZSB0aGUgVHlwZUVycm9yIGJlbG93LlxuICAgICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICBcIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2RcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChtZXRob2QsIGRlbGVnYXRlLml0ZXJhdG9yLCBjb250ZXh0LmFyZyk7XG5cbiAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciBpbmZvID0gcmVjb3JkLmFyZztcblxuICAgIGlmICghIGluZm8pIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIik7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIGlmIChpbmZvLmRvbmUpIHtcbiAgICAgIC8vIEFzc2lnbiB0aGUgcmVzdWx0IG9mIHRoZSBmaW5pc2hlZCBkZWxlZ2F0ZSB0byB0aGUgdGVtcG9yYXJ5XG4gICAgICAvLyB2YXJpYWJsZSBzcGVjaWZpZWQgYnkgZGVsZWdhdGUucmVzdWx0TmFtZSAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWU7XG5cbiAgICAgIC8vIFJlc3VtZSBleGVjdXRpb24gYXQgdGhlIGRlc2lyZWQgbG9jYXRpb24gKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHQubmV4dCA9IGRlbGVnYXRlLm5leHRMb2M7XG5cbiAgICAgIC8vIElmIGNvbnRleHQubWV0aG9kIHdhcyBcInRocm93XCIgYnV0IHRoZSBkZWxlZ2F0ZSBoYW5kbGVkIHRoZVxuICAgICAgLy8gZXhjZXB0aW9uLCBsZXQgdGhlIG91dGVyIGdlbmVyYXRvciBwcm9jZWVkIG5vcm1hbGx5LiBJZlxuICAgICAgLy8gY29udGV4dC5tZXRob2Qgd2FzIFwibmV4dFwiLCBmb3JnZXQgY29udGV4dC5hcmcgc2luY2UgaXQgaGFzIGJlZW5cbiAgICAgIC8vIFwiY29uc3VtZWRcIiBieSB0aGUgZGVsZWdhdGUgaXRlcmF0b3IuIElmIGNvbnRleHQubWV0aG9kIHdhc1xuICAgICAgLy8gXCJyZXR1cm5cIiwgYWxsb3cgdGhlIG9yaWdpbmFsIC5yZXR1cm4gY2FsbCB0byBjb250aW51ZSBpbiB0aGVcbiAgICAgIC8vIG91dGVyIGdlbmVyYXRvci5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCAhPT0gXCJyZXR1cm5cIikge1xuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZS15aWVsZCB0aGUgcmVzdWx0IHJldHVybmVkIGJ5IHRoZSBkZWxlZ2F0ZSBtZXRob2QuXG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9XG5cbiAgICAvLyBUaGUgZGVsZWdhdGUgaXRlcmF0b3IgaXMgZmluaXNoZWQsIHNvIGZvcmdldCBpdCBhbmQgY29udGludWUgd2l0aFxuICAgIC8vIHRoZSBvdXRlciBnZW5lcmF0b3IuXG4gICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gIH1cblxuICAvLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZVxuICAvLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhHcCk7XG5cbiAgR3BbdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JcIjtcblxuICAvLyBBIEdlbmVyYXRvciBzaG91bGQgYWx3YXlzIHJldHVybiBpdHNlbGYgYXMgdGhlIGl0ZXJhdG9yIG9iamVjdCB3aGVuIHRoZVxuICAvLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZVxuICAvLyBpdGVyYXRvciBwcm90b3R5cGUgY2hhaW4gaW5jb3JyZWN0bHkgaW1wbGVtZW50IHRoaXMsIGNhdXNpbmcgdGhlIEdlbmVyYXRvclxuICAvLyBvYmplY3QgdG8gbm90IGJlIHJldHVybmVkIGZyb20gdGhpcyBjYWxsLiBUaGlzIGVuc3VyZXMgdGhhdCBkb2Vzbid0IGhhcHBlbi5cbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuXG4gIEdwW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEdwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH07XG5cbiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcbiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9O1xuXG4gICAgaWYgKDEgaW4gbG9jcykge1xuICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdO1xuICAgIH1cblxuICAgIGlmICgyIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdO1xuICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuICAgIH1cblxuICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcbiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTtcbiAgICByZWNvcmQudHlwZSA9IFwibm9ybWFsXCI7XG4gICAgZGVsZXRlIHJlY29yZC5hcmc7XG4gICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2hcbiAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG4gICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LlxuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV07XG4gICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gIH1cblxuICBleHBvcnRzLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBrZXlzLnJldmVyc2UoKTtcblxuICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwXG4gICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5O1xuICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZVxuICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcbiAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLlxuICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG4gICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTtcbiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cblxuICBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblxuICAgIHJlc2V0OiBmdW5jdGlvbihza2lwVGVtcFJlc2V0KSB7XG4gICAgICB0aGlzLnByZXYgPSAwO1xuICAgICAgdGhpcy5uZXh0ID0gMDtcbiAgICAgIC8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICB2YXIgcm9vdEVudHJ5ID0gdGhpcy50cnlFbnRyaWVzWzBdO1xuICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjtcbiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikge1xuICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZWNvcmQudHlwZSA9IFwidGhyb3dcIjtcbiAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcbiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jO1xuXG4gICAgICAgIGlmIChjYXVnaHQpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLFxuICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhISBjYXVnaHQ7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuICAgICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlXG4gICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgXCJjYXRjaExvY1wiKTtcbiAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cbiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcbiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgZmluYWxseUVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJlxuICAgICAgICAgICh0eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuICAgICAgICAgIGZpbmFsbHlFbnRyeS50cnlMb2MgPD0gYXJnICYmXG4gICAgICAgICAgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcbiAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLlxuICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVjb3JkID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcbiAgICAgIHJlY29yZC5hcmcgPSBhcmc7XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2M7XG4gICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZShyZWNvcmQpO1xuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICB0aGlzLm5leHQgPSBcImVuZFwiO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7XG4gICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbih0cnlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHtcbiAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRocm93bjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cbiAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLFxuICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLFxuICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlXG4gIC8vIG9yIG5vdCwgcmV0dXJuIHRoZSBydW50aW1lIG9iamVjdCBzbyB0aGF0IHdlIGNhbiBkZWNsYXJlIHRoZSB2YXJpYWJsZVxuICAvLyByZWdlbmVyYXRvclJ1bnRpbWUgaW4gdGhlIG91dGVyIHNjb3BlLCB3aGljaCBhbGxvd3MgdGhpcyBtb2R1bGUgdG8gYmVcbiAgLy8gaW5qZWN0ZWQgZWFzaWx5IGJ5IGBiaW4vcmVnZW5lcmF0b3IgLS1pbmNsdWRlLXJ1bnRpbWUgc2NyaXB0LmpzYC5cbiAgcmV0dXJuIGV4cG9ydHM7XG5cbn0oXG4gIC8vIElmIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZSwgdXNlIG1vZHVsZS5leHBvcnRzXG4gIC8vIGFzIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgbmFtZXNwYWNlLiBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGVtcHR5XG4gIC8vIG9iamVjdC4gRWl0aGVyIHdheSwgdGhlIHJlc3VsdGluZyBvYmplY3Qgd2lsbCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgLy8gdGhlIHJlZ2VuZXJhdG9yUnVudGltZSB2YXJpYWJsZSBhdCB0aGUgdG9wIG9mIHRoaXMgZmlsZS5cbiAgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiA/IG1vZHVsZS5leHBvcnRzIDoge31cbikpO1xuXG50cnkge1xuICByZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xufSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHtcbiAgLy8gVGhpcyBtb2R1bGUgc2hvdWxkIG5vdCBiZSBydW5uaW5nIGluIHN0cmljdCBtb2RlLCBzbyB0aGUgYWJvdmVcbiAgLy8gYXNzaWdubWVudCBzaG91bGQgYWx3YXlzIHdvcmsgdW5sZXNzIHNvbWV0aGluZyBpcyBtaXNjb25maWd1cmVkLiBKdXN0XG4gIC8vIGluIGNhc2UgcnVudGltZS5qcyBhY2NpZGVudGFsbHkgcnVucyBpbiBzdHJpY3QgbW9kZSwgd2UgY2FuIGVzY2FwZVxuICAvLyBzdHJpY3QgbW9kZSB1c2luZyBhIGdsb2JhbCBGdW5jdGlvbiBjYWxsLiBUaGlzIGNvdWxkIGNvbmNlaXZhYmx5IGZhaWxcbiAgLy8gaWYgYSBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBmb3JiaWRzIHVzaW5nIEZ1bmN0aW9uLCBidXQgaW4gdGhhdCBjYXNlXG4gIC8vIHRoZSBwcm9wZXIgc29sdXRpb24gaXMgdG8gZml4IHRoZSBhY2NpZGVudGFsIHN0cmljdCBtb2RlIHByb2JsZW0uIElmXG4gIC8vIHlvdSd2ZSBtaXNjb25maWd1cmVkIHlvdXIgYnVuZGxlciB0byBmb3JjZSBzdHJpY3QgbW9kZSBhbmQgYXBwbGllZCBhXG4gIC8vIENTUCB0byBmb3JiaWQgRnVuY3Rpb24sIGFuZCB5b3UncmUgbm90IHdpbGxpbmcgdG8gZml4IGVpdGhlciBvZiB0aG9zZVxuICAvLyBwcm9ibGVtcywgcGxlYXNlIGRldGFpbCB5b3VyIHVuaXF1ZSBwcmVkaWNhbWVudCBpbiBhIEdpdEh1YiBpc3N1ZS5cbiAgRnVuY3Rpb24oXCJyXCIsIFwicmVnZW5lcmF0b3JSdW50aW1lID0gclwiKShydW50aW1lKTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMjE0X187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181NDVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzk0OV9fOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gbW9kdWxlIGV4cG9ydHMgbXVzdCBiZSByZXR1cm5lZCBmcm9tIHJ1bnRpbWUgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xucmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMzUyKTtcbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IG1vZHVsZVsnZGVmYXVsdCddIDpcblx0XHQoKSA9PiBtb2R1bGU7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSJdLCJzb3VyY2VSb290IjoiIn0=